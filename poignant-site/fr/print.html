<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Le Guide (Poignant) de Why vers Ruby</title>
    <link rel="stylesheet" type="text/css" href="guide.css" />
</head>
<body>

<div id="container">
<div class="page" style="margin-top: 90pt;">
    <div class="pageTitle">
    <p style="margin-bottom: 180pt;"><img src="i/poignant.guide.gif" alt="Why's (Poignant) Guide to Ruby" /></p>
    <p style="margin: 0px; padding: 0px;">tenderly written and illustrated by</p>
    <h3 style="margin: 0px; padding: 0px;">why the lucky stiff</h3>
    <p style="margin-top: 40pt;"><img src="i/cc-by.gif" alt="Attribution" /><img src="i/cc-sa.gif" alt="Share Alike" /><br />
    Licensed under the Attribution-ShareAlike license.<br />
    See http://creativecommons.org/licenses/by-sa/2.0/ for details.</p>
    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>1.</h3>
        <h1>A propos de ce livre</h1>
        <p><img src="i/chapter.poignant.guide-1.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/about.the.poignant.guide-1.gif" title="Quel voyage fantastique!" alt="Quel voyage fantastique!" /></p>


	<p><img src="i/about.the.poignant.guide-2.jpg" title="Même les bébés peuvent le faire." alt="Même les bébés peuvent le faire." /></p>


	<p><img src="i/about.the.poignant.guide-3.gif" title="Le lecteur en pleine réflexion." alt="Le lecteur en pleine réflexion." /></p>


	<p><img src="i/about.the.poignant.guide-4.gif" title="Meep." alt="Meep." /></p>

    
    

    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>2.</h3>
        <h1>Kon&#8217;nichi wa, Ruby</h1>
        <p><img src="i/chapter.poignant.guide-2.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    
        
        <a name="section1" />
        <h2>1. En ouvrant ce livre</h2>

        <p>Supposons que vous ayez ouvert ce livre (bien que vous <em>ayez</em> probablement ouvert ce livre), et que vous trouviez un énorme oignon juste au milieu. (L&#8217;imprimeur du livre a inclus l&#8217;oignon à ma demande.)</p>


	<p>Donc, vous pensez, &#8220;Whoua, ce livre est livré avec un oignon !&#8221; (Même si vous n&#8217;aimez pas particulièrement les oignons, je suis sûr que vous êtes à même d&#8217;apprécier la logistique nécessaire à la livraison discrète de quelque produit que ce soit à l&#8217;intérieur d&#8217;un prétendu manuel de programmation.)</p>


	<p>Puis vous vous demandez, &#8220;Attend une minute. Je pensais que c&#8217;était un livre sur Ruby, l&#8217;incroyable nouveau langage de programmation en provenance du Japon. Et, bien que j&#8217;apprécie la logistique nécessaire à la livraison discrète de quelque produit que ce soit à l&#8217;intérieur d&#8217;un prétendu manuel de programmation, Pourquoi un oignon ? Que suis-je supposé faire avec ?&#8221;</p>


	<p>Non. S&#8217;il vous plait, ne vous posez pas de question. Vous ne devez rien faire avec cet oignon. Mettez l&#8217;oignon de côté et laissez <em>le</em> faire quelque chose pour <em>vous</em>.</p>


	<p>Je serais direct avec vous. Je veux vous faire pleurer. Sangloter, larmoyer gentillement. Ce livre est un guide <strong>poignant</strong> vers Ruby. Ce qui veut dire un code si beau qu&#8217;il vous en tirera des larmes. Cela veut dire des contes galants et de sombres vérités qui feront que vous vous réveillerez le matin suivant dans les bras de ce livre. Le serrant étroitement contre vous toute la journée. Si nécessaire, fabriquez un étui pour le <em>Guide (Poignant) de Why vers Ruby</em>, afin de l&#8217;avoir toujours contre vous.</p>


	<p>Vous devriez vraiment sangloter une fois. Ou au moins renifler. Et sinon, l&#8217;oignon vous aidera.</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Ce que Je Vais Faire Avec les Gains Massifs Générés par ce Livre</h2>
        

        <p>Tous ceux qui ont écrit un livre vous diront combien un auteur est facilement distrait par des visions de grandeurs. En ce qui me concerne, je m&#8217;arrête deux fois pour chaque paragraphe, et quatre fois pour chaque bande-dessinée, juste pour évaluer la fortune et la prospérité que ce livre me procurera. Aussi j&#8217;ai peur que l&#8217;écriture de ce livre ne s&#8217;arrête pour faire place à l&#8217;armada de <span class="caps">SUV</span> et de voitures de luxe qui brillent dans mon esprit.</p>


	<p>Plutôt que d&#8217;arrêter l&#8217;écriture du Guide (Poignant), j&#8217;ai réservé cet espace en tant que &#8220;zone de sécurité&#8221; afin de déverser mes voeux vains.</p>


	<p>Aujourd&#8217;hui j&#8217;étais dans un restaurant italien, Granado,et j&#8217;étais en train de payer ma note. J&#8217;ai alors remarqué une bouteille de vinaigre balsamique à 150 euros. Très petite. Je pouvais la faire tenir dans ma main. Âgée de 22 ans.</p>


	<p>J&#8217;ai passé beaucoup de temps à penser à cette bouteille. C&#8217;est souvent un accessoire de mes fantasmes obsessionnels. Dans un de ces fantasmes, je rentrais dans le restaurant, je retournais une pile de feuillage sur le comptoir, et demandais instamment au caissier: &#8220;Vite! J&#8217;ai une salade importante à faire!&#8221;</p>


	<p>Dans un autre fantasme du même acabit, je jette de la laitue. Cette saleté ne convient pas à mon nouveau vinaigre. Non, j&#8217;arriverai à un point où la célébrité et l&#8217;aristocratie m&#8217;auront corrompu au plus profond de mon être. Ma nouvelle laitue sera de l&#8217;argent. De l&#8217;argent froid et dur, Madame Price.</p>


	<p>Bientôt, je dépenserai des centaines d&#8217;euros pour un morceau de myzithra<sup><a href="#fn1">1</a></sup>.</p>


	<p>Mes fantaisies sont toutefois allées plus loin que la possession. Certes, j&#8217;ai examiné par le détail mes acquisitions d&#8217;urnes grecques, de cortèges de voitures, de compagnies aériennes, de pyramides et d&#8217;os de dinosaures. De temps à autres, je verrai des villes secouées par le vent aux informations, et je rajouterai sur ma liste: <em>Ouragan</em>.</p>


	<p>Mais maintenant j&#8217;envisage un but plus large. Pour parler simplement: que va-t-il se passer si j&#8217;amasse une fortune telle que les Monnaies ne puisse pas imprimer assez pour soutenir ma demande? Tous les autres seraient obligés d&#8217;utiliser des billets de Monopoly. Et vous devriez gagner au Monopoly pour pouvoir manger. Ce serait des parties assez tendues. Je veux dire que vous devriez hypothéquer vos biens, et vos enfants commenceraient à pleurer. En plus, je pense que vous commenceriez à voir la fin de ceux qui choisissent les places libre de stationnement comme les <a href="http://monopolyste.online.fr/regles.shtml#freeparc">coffres alternatifs</a> pour les fonds de la ville.
Vous aurez à vous en remettre à de l&#8217;argent factice toutefois. Le faux argent est le meilleur. Vous pouvez en avoir si facilement. Pendant un instant, c&#8217;est comme si vous étiez un riche fou. Quand j&#8217;étais enfant, nous avions construit avec des enfants du voisinage ce petit <a href="http://fr.wikipedia.org/wiki/Tijuana">Tijuana</a> dans notre rue. Nous avions fabriqué nos propres pesos et portions des sombreros et tout le reste!</p>


	<p>Un des enfants vendait des <a href="http://fr.wikipedia.org/wiki/Tamales">tamales</a> chauds pour deux pesos chacun. <em>Deux pesos!</em> Est-ce qu&#8217;il savait que la monnaie était fausse ? A quoi pensait-il ? Qui a invité ce gosse? Savait-il que ce n&#8217;était pas vraiment Tijuana? Peut-être était-il vraiment de Tijuana! Peut-être que c&#8217;était de <em>vrais</em> pesos!  Fabriquons plus de <em>vrais</em> pesos!</p>


	<p>Je crois que nous avions même une taverne, ou vous pouviez vous saouler de Kool-Aid<sup><a href="#fn2">2</a></sup>. Il n&#8217;y a rien de tel qu&#8217;un groupe de gosses trébuchants, marmonnant de façon incohérente avec des lèvres rouges comme celles d&#8217;un clown.</p>


	<p id="fn1"><sup>1</sup> NDT: fromage grec.</p>

	<p id="fn2"><sup>2</sup> NDT: sorte de cristaux qui, une fois</p>
     dilué dans l&#8217;eau donne une boisson aromatisée et sucrée.
        <h1>sidebar!</h1>
        </div>

    
    
        
        <a name="section2" />
        <h2>2. L'Histoire du Chien</h2>

        <p>OK, essayons ce premier morceau d&#8217;intensité:</p>


	<p>Un jour, alors que je marchais sur une de ces routes à grand trafic pleines de vendeurs de voitures (c&#8217;était peu après l&#8217;annulation de mon mariage), j&#8217;ai trouvé un chien abandonné sur la route. Un chien laineux, noir avec des yeux rouges verdâtres. Me sentant moi-même un peu abandonné, j&#8217;attrapais quelques ballons accrochés à un poteau devant une agence, et je les accrochais au collier du chien. Ensuite j&#8217;ai décidé qu&#8217;il serait mon chien. Je l&#8217;appelai Bigelow.</p>


	<p>Nous sommes partis chercher des croquettes pour Bigelow, puis pour aller chez moi, ou nous pourrions nous asseoir dans des fauteuils et écouter du <a href="http://fr.wikipedia.org/wiki/Gorky%27s_Zygotic_Mynci">Gorky&#8217;s Zygotic Mynci</a>. Oh, et nous devions aussi nous arrêter afin d&#8217;acheter à Bigelow son propre fauteuil.</p>


	<p>Mais Bigelow ne m&#8217;avait pas accepté pour maître. Aussi au bout de cinq minutes, ce chien stupide a choisi une autre route à un croisement et je ne l&#8217;ai plus jamais revu. Ainsi, tandis qu&#8217;il n&#8217;avait précédemment été perdu qu&#8217;une seule fois, il l&#8217;était maintenant deux fois. J&#8217;ai alors ralenti le pas qui me menait vers une vie faite de croquette et de fauteuils supplémentaires. J&#8217;ai eu un chien pendant cinq minutes.</p>


	<p>Quel chien stupide. Je m&#8217;assis sur un banc et jetais des pommes de pin sur la statue de trois chèvres traversant un pont. Après cela, j&#8217;ai pleuré pendant des heures. Les larmes coulaient toutes seules. Voilà quelque chose de poignant.</p>


	<p>Je me demande où il est allé avec tous ces ballons. Ce chien fou ressemblait à une fête sur pattes.</p>


	<p>Ce n&#8217;est que peu de temps après que j&#8217;ai joué mon propre Bigelow. J&#8217;avais imprimé un ensemble de pages sur Ruby. des articles trouvés sur le Net. Je les ai parcouru lors de mon trajet de retour, en train, un soir. J&#8217;ai joué avec pendant cinq minutes avant d&#8217;abandonner. Pas impressionné.</p>


	<p>Je m&#8217;assis, contemplant le monde depuis la fenêtre, un mixer géant mélangeant les graffitis et l&#8217;acier fondant devant moi. <em>Ce monde est trop grand pour un si petit langage</em>, pensais-je. <em>Cette pauvre petite chose n&#8217;a aucune chance. Même pas de jambe pour tenir debout. Même pas de bras pour nager.</em></p>


	<p>Et pourtant, j&#8217;étais là. Un petit homme sur un petit train fragile (et j&#8217;avais même encore une dent de lait à cette époque) parmi des milliards de personnes sur une pierre bleue flottante. Comment pourrais je dénigrer Ruby? Qui peut dire si je ne vais pas m&#8217;étouffer avec mon téléphone portable et mourir plus tard dans la soirée. Why mort, Ruby continuera à vivre.</p>


	<p>La pierre tombale:</p>


	<blockquote>
		<p>Qu&#8217;y a-t-il dans sa trachée?</p>
	</blockquote>
Oh, regarde, un Nokia!

	<p>Quelle chance. Finalement réussir à avoir un bon et long somme sous terre, juste pour être constamment dérangé par le <a href="http://fr.wikipedia.org/wiki/Pachelbel"><em>Canon de Pachelbel</em></a> sortant de mon estomac.</p>

    
    
        
        <a name="section3" />
        <h2>3. Le Soleil Rouge Se Lève</h2>

        <p>Donc, maintenant, vous vous demandez pourquoi j&#8217;ai changé d&#8217;avis quant à Ruby. La réponse rapide est: on s&#8217;est tapé dans l&#8217;oeil.</p>


	<p>Comme lorsque vous rencontrez Quelqu&#8217;un au lycée, et qu&#8217;il ressemble à Quelqu&#8217;un qui avait l&#8217;habitude de vous peinturlurer le visage quand vous êtiez enfant. Impulsivement, vous aviez conclus que ce Quelqu&#8217;un n&#8217;était pas un ami.  Vous critiquiez sa coiffure. Vous décrochiez bruyamment le téléphone aux moments cruciaux des histoires qu&#8217;il racontait. Vous utilisiez votre <a href="http://www.tpactivite.com/jeux_grands.php">baton sauteur</a> juste là où il essayait de marcher!</p>


	<p>Toutefois, six mois plus tard, vous et Quelqu&#8217;un bavardiez tranquillement à côté d&#8217;une fontaine. Il ne ressemblait plus à votre cauchemard d&#8217;enfance. Vous aviez trouvé le Bon Jumeau. Le coup de foudre.</p>


	<p>Aussi, là où je devrais sans doute vous assomer d&#8217;exagérations à propos de Ruby, ainsi qu&#8217;avec le lot d&#8217;acronymes pertinents qui l&#8217;accompagne partout (soulevant les sifflements collectifs de votre patron et du patron de votre patron), je vous laisserai juste faire une promenade. Je vous laisserai tomber dans du code, intervenant parfois avec mes propres expériences. Ce sera très simple, très naturel.</p>


	<p>Je devrais toutefois vous offrir quelque motivation. Aussi, Smotchkkiss, je vais vous donner mes trois meilleures raisons d&#8217;apprendre Ruby.</p>


<ol>
	<li><strong>Santé du cerveau.</strong> <p>Vitamine R. Monte directememnt au cerveau. Ruby vous apprendra à <em>exprimer</em> vos idées grâce à l&#8217;ordinateur. Vous écrirez des histoires pour une machine.</p><p>Le talent créatif, les gars. Déduction. Raison. Signe de tête intelligent. Ce langage deviendra pour vous un outil vous permettant de connecter votre esprit au monde. J&#8217;ai remarqué que beaucoup d&#8217;utilisateur expérimentés de Ruby semble avoir les idées claires et être objectifs. (A contrario de fortement partial et brut).</p></li>
	<li><strong>Un homme sur une île.</strong> <p> Ruby est né au Japon. Ce qui est original. Le Japon n&#8217;est pas connu pour ses logiciels. Et puisque les langages de programmation sont principalement écrit en Anglais, qui suspecterait un langage de venir du Japon?<p><p> Et pourtant, nous avons Ruby. Contre tout attente, Yukihiro Matsumoto a créé Ruby le 24 Février 1993. Durant les dix dernières années, il a progressivement amené Ruby à une plus large audience. C&#8217;est noble, triomphant et tout ça. Supportez la diversité. Aidez nous à incliner la Terre juste un peu.</p></li>
	<li><strong>Libre.</strong> <p>Utiliser Ruby ne coûte rien. Le code de Ruby lui-même est ouvert à tous. Aussi, ce livre est libre. Tout cela fait partie d&#8217;un grand et gros don qui devrait avoir un gros accroc.</p> <p>Vous pensiez que nous allons vous faire acheter des aspirateurs, du temps-partagé ou de faux Monets. Vous pensiez qu&#8217;il y aurait une présentation de 90 minutes, à la fin de laquelle le propriètaire de la compagnie viendrait vous taper dans le dos pour conclure le marché.</p><p>Non, libre.</p></li>
</ol>

	<p>Maintenant, il est temps de commencer ce livre. Vous pouvez donc sortir votre surligneur et commencer à le promener sur chacun des mots captivants de cette phrase. Je pense que j&#8217;ai assez de laque et de fausse monnaie sur moi pour me sustenter jusqu&#8217;à la dernière page.</p>

    
    
        
        <a name="section4" />
        <h2>4. Comment Commencent Les Livres</h2>

        <p>Bien, si vous avez jamais lu un livre, vous savez qu&#8217;aucun livre ne commence sans une parfaite synergie. Oui, synergie. Peut-être ne le saviez-vous pas. La synergie signifie que vous et moi sommes supposés coopérer afin de faire de la lecture de ce livre une expérience à part entière.</p>


	<p>Nous allons commencer ce livre par bien nous entendre lors de l&#8217;Introduction. Cette unité, cette <strong>synergie</strong> nous propulsera tout au long du livre, avec moi pour guide. Vous me donnerez un rassurant hochement de tête ou un rire pour m&#8217;indiquer votre progression.</p>


	<p>Je suis Peter Pan tenant votre main. Allez, viens Wendy! Deuxième étoile sur la droite puis tout droit jusqu&#8217;au matin.</p>


	<p>Un seul problème ici. Je ne m&#8217;entends pas bien avec les personnes. Je ne tiens pas bien les mains.</p>


	<p>N&#8217;importe qui dans mon équipe vous le dira. Aux Cérémonies d&#8217;Ouverture de Ce Livre (un évennement approvisioné sur des sièges de stade), j&#8217;ai découvert que les sandwiches au concombre n&#8217;était pas servi avec des essuie-mains. Du coup le beurre ne tenait pas bien avec les concombres&#8230; De toute façon, j&#8217;ai fait un bon show et mis le feu a plusieurs des camions publicitaires à l&#8217;entrée. J&#8217;ai éclaté des projecteurs et tout ça. J&#8217;ai eu ce fort rire de maniaque dans la nuit. C&#8217;était vraiment la pagaille.</p>


	<p>Mais comme je ne m&#8217;entends pas très bien avec les personnes, je n&#8217;avais invité personne à part moi au Cérémonies d&#8217;Ouverture de Ce Livre. Donc ce n&#8217;était pas vraiment embarassant. Je l&#8217;ai gardé secret et personne n&#8217;a encore découvert cela.</p>


	<p>Aussi, vous devez savoir que <strong>synergies</strong> ne veut pas exactement dire <strong>synergie</strong> dans ce livre. Je ne peux pas être en <strong>synergie</strong> normale. Non, dans ce livre, <strong>synergie</strong> veut dire des <strong>renards de bande-dessinée</strong>. Ce que je veux dire c&#8217;est que ce livre va commencer par un grand nombre de <strong>renards de bande-dessinée</strong>.</p>


	<p>Et je compte sur vous pour les transformer en <strong>synergie</strong>.</p>

    
    

    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>3.</h3>
        <h1>Un Tour Rapide (et J&#8217;Espère Sans Peine) de Ruby (avec des Renards de Bande-Dessinée)</h1>
        <p><img src="i/chapter.poignant.guide-3.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/the.foxes-1.png" title="Les renards apparaissent." alt="Les renards apparaissent." /></p>


	<p>Yeah, ils sont deux. Mon asthme revient, aussi dois-je prendre une bouffée de médicament maintenant. Je reviens dans deux minutes.</p>


	<p><img src="i/the.foxes-2.png" title="Renards dans des boites." alt="Renards dans des boites." /></p>


	<p>On m&#8217;a dit qu&#8217;il vallait mieux être équipé d&#8217;un mouchoir pour ce chapitre. Quelque chose pour vous éponger le visage lorsque vous allez suer.</p>


	<p>En effet, nous allons faire un tour à travers le langage en entier. Comme allumer chaque allumette d&#8217;une boite, aussi vite que possible.</p>

    
    
        
        <a name="section1" />
        <h2>1. Le Langage et JE VEUX DIRE le Langage</h2>

        <p><img src="i/the.foxes-3.png" title="Nos amis, ces deux renards impuissants, réalise finalement la gravité de leur embarras." alt="Nos amis, ces deux renards impuissants, réalise finalement la gravité de leur embarras." /></p>


	<p>Ma conscience ne me laisserais pas appeler Ruby un langage pour <em>ordinateur</em>. Cela impliquerait que le langage utilise principalement des termes de l&#8217;ordinateur. Que le langage est fait pour aider l&#8217;ordinateur en premier lieu. Et que donc, nous, les développeurs sommes des étrangers, cherchant à nous acclimater à l&#8217;ordinateur. C&#8217;est le langage de l&#8217;ordinateur et nous sommes les traducteurs pour le monde.</p>


	<p>Mais comment appelez-vous un langage, quand votre cerveau commence à penser dans ce langage? Quand vous commencez à utiliser les propres mots du langage pour vous exprimer. Une machine ne peut faire ça. Comment cela pourrait-il être le langage de la machine? C&#8217;est le notre, nous le parlons naturellement!</p>


	<p>Nous ne pouvons donc décemment pas l&#8217;appeler un langage pour <em>ordinateur</em>. C&#8217;est un <em>dialecte de développeur</em>. C&#8217;est le langage de nos pensées.</p>


	<p><strong>Lisez ce qui suit à haute voix, pour vous-même.</strong></p>


	<blockquote>
		<p><code><span class="number">5</span><span class="punct">.</span><span class="ident">times</span> <span class="punct">{</span> <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Odelay!</span><span class="punct">&quot;</span> <span class="punct">}</span></code></p>
	</blockquote>

	<p>Dans les phrases françaises, les signes de ponctuation (telle que le point, le point d&#8217;exclamation, les parenthèses) sont des silences. La ponctuation ajoute du sens aux mots, en donnat des informations sur ce que l&#8217;auteur de lap hrase veut exprimer. Aussi lisons ce qui précède comme: <em>Cinq fois affiche &#8220;Odelay!&#8221;.</em></p>


	<p>Ce qui est exactement ce que fait ce petit programme en Ruby. L&#8217;exclamation en <a href="http://www.whiskeyclone.net/ghost/L/lordonlyknows.html">Espagnol mutant</a> de Beck s&#8217;affichera cinq fois à l&#8217;écran.</p>


	<p><strong>Lisez ce qui suit à haute voix, pour vous-même.</strong></p>


	<blockquote>
		<p><code><span class="ident">exit</span> <span class="keyword">unless</span> <span class="punct">&quot;</span><span class="string">restaurant</span><span class="punct">&quot;.</span><span class="ident">include?</span> <span class="punct">&quot;</span><span class="string">aura</span><span class="punct">&quot;</span></code></p>
	</blockquote>

	<p>Ici nous faisons un test réel basique. Notre program sortira (<strong>exit</strong>: le programmera s&#8217;arrètera) <strong>à moins que</strong> (<strong>unless</strong>) le mot <strong>restaurant</strong> ne contienne (<strong>includes</strong>) le mot <strong>aura</strong>. Encore une fois, en Français: <em>Arrête à moins que le mot restaurant n&#8217;inclue le mot aura.</em></p>


	<p>Avez-vous déjà vu un langage de programmation utiliser les points d&#8217;interrogation de façon si effective? Ruby utilise certains signes de ponctuation, comme les points d&#8217;exclamation ou d&#8217;interrogation, pour augmenter la lisibilité du code. Dans le code précédent nous posons une question, aussi pourquoi ne pas rendre cela explicite?</p>


	<p><strong>Lisez ce qui suit à haute voix, pour vous-même.</strong></p>


	<blockquote>
		<p><code><span class="punct">['</span><span class="string">pain</span><span class="punct">',</span> <span class="punct">'</span><span class="string">fromage</span><span class="punct">',</span> <span class="punct">'</span><span class="string">vin</span><span class="punct">'].</span><span class="ident">each</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">food</span><span class="punct">|</span> <span class="ident">print</span> <span class="ident">food</span><span class="punct">.</span><span class="ident">capitalize</span> <span class="punct">}</span></code></p>
	</blockquote>

	<p>Bien que ce bout de code soit moins lisible et moins semblable à une phrase que le précédent, je vous encourage quand même à le lire à haute voix. Même si Ruby peut se lire parfois comme de l&#8217;Anglais, il se lit aussi parfois comme un Anglais plus concis. En traduisant complètement ce qui précède en Anglais, vous auriez: <em>With the words &#8216;pain&#8217;, &#8216;fromage&#8217;, and &#8216;vin&#8217;: take each food and print it capitalized.</em> (NDT: En Français: <em>Avec les mots &#8216;pain&#8217;, &#8216;fromage&#8217; et &#8216;vin&#8217;: prendre chaque nourriture et l&#8217;afficher avec la première lettre en majuscule.</em>)</p>


	<p>L&#8217;ordinateur repondra alors courtoisement: <code><span class="constant">Pain</span></code>, <code><span class="constant">Fromage</span></code> et <code><span class="constant">Vin</span></code>.</p>


	<p>Maintenant, vous devez vous demander comment ces mots vont en fait ensembles. Smotchkkiss se demande ce que signifient les points et les crochets. Je vais maintenant traiter les différents <em>constituants du discours</em>.</p>


	<p>Tout ce que vous avez besoin de savoir est que Ruby est, à la base, fait de phrases. Ce ne sont pas exactement des phrases anglaises. Ce sont des ensembles de mots et de signes de ponctuation qui entourent une idée simple. Ces phrases peuvent former des livres. Elles peuvent former des pages. elles peuvent former des nouvelles entières, en les assemblant. Ces nouvelles peuvent être lues par des humains, mais aussi par des ordinateurs.</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>De l&#8217;Utilisation Commerciale de ce Guide (Poignant)</h2>
        

        <p>Ce livre est délivré sous une licence Creative Commons qui permet un usage commercial illimité de ce livre. Ce qui en pratique veut dire que vous pouvez vendre des copies de ce livre et garder tous les gains pour vous. Je fais confiance à mes lecteurs (et au monde qui les entoure) pour me copier. Pour créer une édition moisie sur une Xerox avec ce clipart classique de deux mains en prière sur la couverture.</p>


	<p>Les mecs, les procès n&#8217;en valent pas la peine. Aussi je vais directement accepter le piratage. N&#8217;importe qui désirant lire ce livre doit être capable de le faire. Je serais flatté si quelqu&#8217;un désire commercialiser ce livre ou faire des éditions spéciales.</p>


	<p>Pourquoi désirerais-je de l&#8217;argent? <span class="caps">IGNOREZ TOUTES LES AUTRES COLONNES</span>: j&#8217;ai perdu toute volonté de devenir un plouc riche. Cela semble inhumain, mais j&#8217;aime ma petite télé en noir et blanc. Ansi que ma lampe-fleur en plastique. Je ne veux pas devenir un écrivain. Le cash ne m&#8217;inspire pas. Aucun intérêt.</p>


	<p>Aussi, si l&#8217;argent ne veut rien dire pour le cadavre chanceux (NDT: &#8220;why the lucky stiff&#8221; se traduit par &#8220;why le cadavre chanceux&#8221;), pourquoi me pomper quand vous pouvez coopter des pratiques commerciales louches pour litéralement anéantir mon pshychisme et laisser mes poumons d&#8217;acier pleins de suie? Sans parler de l&#8217;ironie qui consiste à utiliser mon propre travail contre moi!  Meurs, Mec Poignant!</p>


	<p>Pour vous donner une idée de ce que je veux dire, voici quelques concepts sournois qui pourraient sérieusement endommager ma volonté et me forcer à reconsidérer certains choses comme l&#8217;existence.</p>


	<p><strong>PREMIERE <span class="caps">IDEE</span>: BEAUCOUP <span class="caps">DE TABAC</span></strong></p>


	<p>Acheter une fabrique de cigarettes. Utilisez mes renards de bande-dessinée dans une campgagne publicitaire aggressive. Voilà un panneau d&#8217;affichage pour les débutants:</p>


	<p><img src="i/the.foxes-0a.png" title="La dépendance c'est comme les Pokemon!" alt="La dépendance c'est comme les Pokemon!" /></p>


	<p>Dites explicitement que vous visez les enfants et les asthmatiques. Ensuite, une fois que vous avez fait marcher tout le monde, laissez les gens de <strong>vérité</strong> faire un exposé sur moi et ma ferme de renards d&#8217;encre.</p>


	<blockquote>
		<p><strong>Hippie Sensible se Tenant Sur la Bordure du Trotoir dans le Désert Urbain</strong>: Il s&#8217;appelle lui-même le macchabée chanceux.</p>
	</blockquote>

	<blockquote>
		<p>(Il lève le rideau, révélant un corps gris sur brancard.)</p>
	</blockquote>

	<blockquote>
		<p><strong>Le Hippie</strong>: certains macchabées ne sont pas chanceux.</p>
	</blockquote>

	<blockquote>
		<p>(Zoom erratique. Renards de bande-dessinée en surimpression pour un voyage subliminal à la Willy Wonka.)</p>
	</blockquote>

	<p>Hé. Pourquoi qu&#8217;tu fumes ces gros cigares comme ça, Holmes?</p>


	<p><strong>DEUXIEME <span class="caps">IDEE</span>: PELOTON D&#8217;EXECUTION</strong></p>


	<p>Comme je l&#8217;ai dit, vous pouvez commencer à vendre des copies de mon livre, mais en altérant le texte. Ces copies modifiées contiendraient des références flagrantes (et diffamatoires) à des agences gouvernementales, telles que les U.S. Marshals et le Pentagone. Vous pouvez me faire passer pour un vrai traitre. Comme si j&#8217;avais tous ces plans pour, vous savez, tuer certains des membres les moins désirables des U.S. Marshals ou du Pentagone.</p>


	<p>Non pas qu&#8217;il y ait des membres moins désirables chez les U.S. Marshals et au Pentagone. Euh, je ne voulais pas dire ça.</p>


	<p>Et mince.</p>


	<p>Et mince, mince, mince.</p>


	<p>Eteignons les lumières. Baissons-nous.</p>


	<p><strong>TROISIEME <span class="caps">IDEE</span>: PANNEAUX D&#8217;AFFICHAGE, <span class="caps">SECONDE PARTIE</span></strong></p>


	<p>Et pourquoi ne pas se moquer directement des asmathiques?</p>


	<p><img src="i/the.foxes-0b.png" title="Appelle le teuf-teuf! ROFL!" alt="Appelle le teuf-teuf! ROFL!" /></p>


	<p><strong>QUATRIEME <span class="caps">IDEE</span>: ALEC <span class="caps">BALDWIN</span></strong></p>


	<p>Adaptez le livre au cinéma. Et comme je suis un personnage de ce livre, vous pourriez avoir quelqu&#8217;un comme Alec Baldwin pour jouer mon rôle. Quelqu&#8217;un qui est vraiment à un point bas de sa carrière.</p>


	<p>Vous pourriez faire comme si je prenais des tonnes de drogues. Comme si j&#8217;étais un aliéné avec qui l&#8217;on ne peut travailler.Comme si je virais les gens et les enfermais dans la salle des scooters en leur faisant porter une tenue en pain. Ouais, je pourrais en fait <em>cuire au four</em> ces gens dans leur tenue.</p>


	<p>Je pourrais avoir un moule géant où j&#8217;attacherais les gens. Ensuite je verserais la pâte sur eux et les cuirais jusqu&#8217;à ce que le pain aie gonflé et qu&#8217;ils soient presque morts. Et quand les équipes de télévision arriveraient et que je serais dans &#8216;Good Morning America&#8217;, ils demanderaient, &#8220;Alors combien de personnes avez vous employées lors de l&#8217;écriture de votre livre?&#8221; et je répondrais &#8220;Une douzaine de chez le boulanger!&#8221; et éclaterais de ce rire lourd de maniaque qui forcerait les spectateurs à se boucher les oreilles.</p>


	<p>Bien sûr, en proie à ma folie, je déclarerais la guerre au monde. Les gens-pains livreraient un bon combat. Jusqu&#8217;à ce que les U.S. Marshals (ou le Pentagone) créent un cerveau robotique géant de singe (joué par Burt Lancaster) pour me poursuivre.</p>


	<p>Et voici là où vous me feriez paraître complètement piètre. Non seulement je sacrifierais tous les gens-pains (les Starchtroopers<sup><a href="#fn1">1</a></sup>) pour me sauver, non seulement je me rendrais comme un lâche au cerveau robotique géant de singe, mais quand je m&#8217;échapperais de justesse, je hurlerais vers les spectateurs. Vociférant avec insistance que c&#8217;est <em>MON</em> film et que plus personne ne doit le regarder, je déchirerais l&#8217;écran en deux et le projecteur tournerait avec sa bobine s&#8217;agitant dans la défaite. Et ce serait la fin du film. Les spectateurs seraient <em>tellement</em> ennuyés.</p>


	<p id="fn1"><sup>1</sup> NDT: Jeux de mots: &#8220;Starch&#8221; veut dire &#8220;Amidon&#8221; ... et &#8220;Starchtroopers&#8221; ressemble à &#8220;Starship troopers&#8221;.</p>

	<p>Maintenant, je dois penser. Voyez, Alec Baldwin a fait un commentaire décent dans <a href="http://www.allocine.fr/film/fichefilm.html?cfilm=29188">La Famille Tenenbaums</a>. Sa carrière est peut-être O.K. Vous ne voudrez peut-être pas l&#8217;utiliser. Il ne devrait pas le faire.</p>


	<p>Je vais vous dire. Je jouerais mon rôle. J&#8217;ai fait des points bas ma spécialité.</p>
        <h1>sidebar!</h1>
        </div>

    
    
        
        <a name="section2" />
        <h2>2. Les Constituants Du Discours</h2>

        <p>Comme la raie blanche en bas du dos de la mouffette et l&#8217;enroulement blanc du cortège de la mariée, plusieurs des constituants du discours de Ruby ont des indices visuels afin de vous aider à les identifier. La ponctuation et la capitalisation aideront votre cerveau à voir des parties de code et à ressentir une intense identification. Votre esprit vous criera fréquemment <em>Hé, je connais ça mec!</em> Vous serez aussi capable de placer ces noms dans les conversations avec d&#8217;autres Rubyistes.</p>


	<p>Essayez de vous focaliser sur l&#8217;apparence de chacuns de ces constituants. Le reste du livre detaillera chaque spécificité. Je donne une description courte pour chacun des constituants, mais vous n&#8217;avez pas à comprendre l&#8217;explication. A la fin de ce chapitre, vous devriez pouvoir reconnaître chaque partie d&#8217;un programme écrit en Ruby.</p>


	<h3>Variables</h3>

	<p>N&#8217;importe quel mots constitué de lettres minuscules est une variable en Ruby. Les variables peuvent être constituées de lettres, chiffres ou de soulignés (NDT: _).</p>


	<blockquote>
		<p><code><span class="ident">x</span></code>, <code><span class="ident">y</span></code>, <code><span class="ident">banane2</span></code> ou <code><span class="ident">telephoner_a_une_caille</span></code> sont des exemples.</p>
	</blockquote>

	<p>Les variables sont comme des surnoms. Vous vous rappelez quand tout le monde vous appelait Pierre-Qui-Pue? Les gens disait, &#8220;Viens ici Pierre-Qui-Pue!&#8221; et tout le monde savait miraculeusement que vous étiez Pierre-Qui-Pue.</p>


	<p>Les variables vous permettent de donner un surnom à ce que vous utilisez fréquemment. Par exemple, supposons que vous dirigiez un orphelinat. C&#8217;est un orphelinat moyen. Et quand Papa Warbucks vient pour acheter plus d&#8217;enfants, on insiste pour qu&#8217;il paie <strong>cent vingt et un euros et huit centimes</strong> pour l&#8217;ourson en peluche de l&#8217;enfant, auquel il s&#8217;est attaché dans les moments sombres de sa vie de cauchemard.</p>


	<blockquote>
		<p><code><span class="ident">frais_d_ourson</span> <span class="punct">=</span> <span class="number">121.08</span></code></p>
	</blockquote>

	<p>Plus tard, quand vous le retrouverez à la caisse enregistreuse (une caisse enregistreuse de première puisqu&#8217;elle tourne sous Ruby), vous devrez additioner ensemble toutes ces factures pour obtenir le <strong>total</strong>.</p>


	<blockquote>
		<p><code><span class="ident">total</span> <span class="punct">=</span> <span class="ident">frais_d_orphelin</span> <span class="punct">+</span> <span class="ident">frais_d_ourson</span> <span class="punct">+</span> <span class="ident">gratuite</span></code></p>
	</blockquote>

	<p>Ces noms de variables aident vraiment. Et dans le milieu miteux de la vente d&#8217;enfants, je suis sûr que toute aide est appréciée.</p>


	<p><img src="i/the.foxes-4a.png" title="Ils se moquent de mes examples." alt="Ils se moquent de mes examples." /></p>


	<h3>Nombres</h3>

	<p>Le type le plus basique de nombre est l&#8217;<em>entier</em> (<em>integer</em>), une <strong>série de chiffres</strong> qui peut commencer avec un <strong>signe plus ou moins</strong>.</p>


	<blockquote>
		<p><code><span class="number">1</span></code>, <code><span class="number">23</span></code>, et <code><span class="punct">-</span><span class="number">10000</span></code> en sont des exemples.</p>
	</blockquote>

	<p>Les virgules ne sont pas autorisées dans les nombres, mais les soulignés (NDT: _) le sont. Donc, si vous sentez la nécessité de marquer les milliers afin que vos nombres soient plus lisibles, utilisez un souligné.</p>


	<blockquote>
		<p><code><span class="ident">population</span> <span class="punct">=</span> <span class="number">12_000_000_000</span></code></p>
	</blockquote>

	<p>Les nombres décimaux sont appelés <em>flottants</em> (<em>floats</em>) en Ruby. Les flottants sont faits de nombres avec une <strong>partie décimale</strong> ou une <strong>notation scientifique</strong>.</p>


	<blockquote>
		<p><code><span class="number">3.14</span></code>, <code><span class="punct">-</span><span class="number">808.08</span></code> et <code><span class="number">12.043</span><span class="ident">e</span><span class="punct">-</span><span class="number">04</span></code> en sont des exemples.</p>
	</blockquote>

	<h3>Les chaines de caractères</h3>

	<p>Les chaines de caractères sont composées de n&#8217;importe quel caractère (lettre, chiffre, signe de ponctuation) entourés par des guillemets. A la fois les <strong>guillemets</strong> simples et doubles sont utilisés pour créer des chaines de caractères.</p>


	<blockquote>
		<p><code><span class="punct">&quot;</span><span class="string">laboratoire</span><span class="punct">&quot;</span></code>, <code><span class="punct">'</span><span class="string">2021</span><span class="punct">'</span></code> ou <code><span class="punct">&quot;</span><span class="string">Ces bande-dessinées sont hilarantes!</span><span class="punct">&quot;</span></code> en sont des exemples.</p>
	</blockquote>

	<p>Quand vous entourez des caractères par des guillemets, ils sont stoqués ensemble, comme une seule chaine.</p>


	<p>Pensez à un journaliste qui transcrit les divagations d&#8217;une célébrité. &#8220;Je suis beaucoup plus raisonnable,&#8221; dit Avril Lavigne. &#8220;Maintenant, je sais à quoi ressemble le mileu&#8212;ce que vous devez faire et comment le faire.&#8221;</p>


<div class='example'><pre><code> <span class="ident">avril_citation</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">Je suis beaucoup plus
  raisonnable. Maintenant, je sais à quoi ressemble 
  le mileu -- ce que vous devez faire et comment le
  faire.</span><span class="punct">&quot;</span></code></pre></div>
	<p>De même que nous venions de stoquer un nombre dans la variable <strong>frais_d_ourson</strong>, nous stoquons maintenant une suite de caractères (une chaine) dans la variable <strong>avril_citation</strong>. Le journaliste envoie cette citation à l&#8217;impression, qui par chance, utilise Ruby pour faire fonctionner sa presse.</p>


<div class='example'><pre><code> <span class="ident">print</span> <span class="ident">oprah_citation</span>
 <span class="ident">print</span> <span class="ident">avril_citation</span>
 <span class="ident">print</span> <span class="ident">ashlee_simpson_debacle</span></code></pre></div>
	<p><img src="i/the.foxes-4b.png" title="Ils veulent faire partie des mes exemples." alt="Ils veulent faire partie des mes exemples." /></p>


	<h3>Symboles</h3>

	<p>Les symboles sont des mots qui ressemblent à des variables. Encore une fois, ils peuvent contenir des lettres, des chiffres ou des soulignés. Mais ils <strong>commencent avec deux points</strong>.</p>


	<blockquote>
		<p><code><span class="symbol">:a</span></code>, <code><span class="symbol">:b</span></code>, ou <code><span class="symbol">:ponce_de_leon</span></code> en sont des exemples.</p>
	</blockquote>

	<p>Les symboles sont des chaines de caratères &#8220;légères&#8221;. Généralement les symboles sont utilisés dans les situations ou vous avez besoin d&#8217;une chaine de caractères mais où vous ne voulez pas l&#8217;afficher à l&#8217;écran.</p>


	<p>Vous pouvez voir les symboles comme étant plus léger pour l&#8217;ordinateur. Ils sont comme un antiacide. Les deux points ressemblent aux bulles remontant de l&#8217;estomac de l&#8217;ordinateur alors qu&#8217;il digère le symbole. Ah, quel soulagement!</p>


	<p><img src="i/the.foxes-4c.png" title="Chunky bacon!!" alt="Chunky bacon!!" /></p>


	<h3>Constantes</h3>

	<p>Les constantes sont des mots, à l&#8217;instar des variables, mais elles commencent par une lettre majuscule. Si les variables sont les noms de Ruby, alors pensez les constantes comme étant les noms propres.</p>


	<blockquote>
		<p><code><span class="constant">Time</span></code>, <code><span class="constant">Array</span></code> ou <code><span class="constant">Bunny_Lake_a_Disparu</span></code> en sont des exemples.</p>
	</blockquote>

	<p>En Anglais (NDT: et en Français), les noms propres commencent par une majuscule. L&#8217;Empire State Building. Vous ne pouvez pas changer l&#8217;Empire State Building. Vous ne pouvez pas décider que l&#8217;Empire State Building désignera quelque chose d&#8217;autre. Les noms propres sont comme celà. Ils se rapportent à quelque chose de très spécifique et généralement ne changent pas au cours du temps.</p>


	<p>De la même façon, les constantes ne peuvent pas changer après avoir été assignées.</p>


	<blockquote>
		<p><code><span class="constant">EmpireStateBuilding</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">350 5th Avenue, NYC, NY</span><span class="punct">&quot;</span></code></p>
	</blockquote>

	<p>Si nous essayons de changer la constante, Ruby se plaindra. On désaprouve de telles pratiques.</p>


	<p><img src="i/the.foxes-4d.png" title="Allez, chunky bacon." alt="Allez, chunky bacon." /></p>


	<h3>Méthodes</h3>

	<p>Si les variables et les constantes sont les noms, alors les méthodes sont les verbes. Les méthodes sont généralement rattachées à la fin des variables par un <strong>point</strong>. Vous avez déjà vu des méthodes:</p>


	<blockquote>
		<p><code><span class="ident">porte_devant</span><span class="punct">.</span><span class="ident">ouvre</span></code></p>
	</blockquote>

	<p>Dans l&#8217;exemple précédent, <strong>ouvre</strong> est la méthode. C&#8217;est l&#8217;action, le verbe. Dans certains cas vous pouvez voir des actions enchainées.</p>


	<blockquote>
		<p><code><span class="ident">porte_devant</span><span class="punct">.</span><span class="ident">ouvre</span><span class="punct">.</span><span class="ident">ferme</span></code></p>
	</blockquote>

	<p>Nous avons demandé à l&#8217;ordinateur d&#8217;ouvrir la porte de devant et de la fermer immédiatement.</p>


	<blockquote>
		<p><code><span class="ident">porte_devant</span><span class="punct">.</span><span class="ident">est_ouverte?</span></code></p>
	</blockquote>

	<p>Ce qui précède est aussi une action. Nous demandons à l&#8217;ordinateur de tester la porte afin de savoir si elle est ouverte. On aurait pu appeler la méthode <code><span class="constant">Porte</span><span class="punct">.</span><span class="ident">essaie_de_savoir_si_elle_est_ouverte</span></code> mais le nom <code><span class="ident">est_ouverte?</span></code> est plus succint et tout aussi correct. On peut utiliser à la fois les points d&#8217;exclamation et d&#8217;interrogation dans les noms de méthodes.</p>


	<h3>Les Arguments de Méthode</h3>

	<p>Une méthode peut avoir besoin de plus d&#8217;information pour effectuer son action. Si nous voulons demander à l&#8217;ordinateur de peindre la porte, nous devons lui en indiquer la couleur.</p>


	<p>Les arguments des methodes sont attachés à la fin des méthodes. Ils sont générallement entourés par des <strong>parenthèses</strong> et séparés par des <strong>virgules</strong>.</p>


	<blockquote>
		<p><code><span class="ident">porte_devant</span><span class="punct">.</span><span class="ident">peindre</span><span class="punct">(</span> <span class="number">3</span><span class="punct">,</span> <span class="symbol">:rouge</span> <span class="punct">)</span></code></p>
	</blockquote>

	<p>Ce qui précède peint de 3 couches rouges la porte.</p>


	<p>Représentez le vous comme une chambre à air que la méthode traine avec elle. Les parentèses forment les bords ronds et humides de la chambre à air. Les virgules sont les pieds de chaque argument accrochés au bord. Le dernier argument a ses pieds sous lui de façon à les cacher.</p>


	<p>A l&#8217;instar d&#8217;un bateau pouvant remorquer plusieurs chambres à air, on peut enchainer les méthodes avec arguments.</p>


	<blockquote>
		<p><code><span class="ident">porte_devant</span><span class="punct">.</span><span class="ident">peindre</span><span class="punct">(</span> <span class="number">3</span><span class="punct">,</span> <span class="symbol">:rouge</span> <span class="punct">).</span><span class="ident">seche</span><span class="punct">(</span> <span class="number">30</span> <span class="punct">).</span><span class="ident">ferme</span><span class="punct">()</span></code></p>
	</blockquote>

	<p>Ce qui pécède peint de 3 couche de rouge la porte, la sèche pendant 30 minutes et la referme. Même si la dernière méthode n&#8217;a pas d&#8217;argument vous pouvez quand même mettre des parenthèses si celà vous chante. Toutefois, il est inutile de trainer une chambre à air vide, donc on ommet généralement les parenthèses.</p>


	<p>Certaines méthode (comme <code><span class="ident">print</span></code>) sont des méthode de base (NDT: des méthodes du Kernel de Ruby). Ces méthodes sont utilisées partout en Ruby. Comme elles sont très fréquentes, on n&#8217;utilise pas le point.</p>


	<blockquote>
		<p><code><span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Voyez, aucun point.</span><span class="punct">&quot;</span></code></p>
	</blockquote>

	<h3>Méthodes de Classe</h3>

	<p>Comme les méthodes dont on vient de parler (que l&#8217;on appelle aussi des méthode d&#8217;<em>instance</em> (NDT: en anglais, <em>instance</em> methods)), les méthodes de classe sont généralement attachées aux variables et aux constantes. Plutôt qu&#8217;un point, on utilise <strong>deux double points</strong> pour les séparer.</p>


	<blockquote>
		<p><code><span class="constant">Door</span><span class="punct">::</span><span class="ident">new</span><span class="punct">(</span> <span class="symbol">:oak</span> <span class="punct">)</span></code></p>
	</blockquote>

	<p>Comme on peut le voir, la méthode de classe <code><span class="ident">new</span></code> est généralement utilisée pour créer de nouvelles choses. Dans l&#8217;exemple précédent, on demande à Ruby de nous créer une nouvelle porte en chêne. Bien sûr, Ruby doit savoir comment fabriquer une porte&#8212;de même que du bois de charpente, des bucherons et ces longues scies à deux hommes.</p>


	<p><img src="i/the.foxes-4e.png" title="Plein de petits morceaux de bacon." alt="Plein de petits morceaux de bacon." /></p>


	<h3>Variables globales</h3>

	<p>Les variables commençant par un <strong>signe dollar</strong> sont globales.</p>


	<blockquote>
		<p><code><span class="global">$x</span></code>, <code><span class="global">$1</span></code>, <code><span class="global">$chunky</span></code> et <code><span class="global">$CHunKY_bACOn</span></code> en sont des exemples.</p>
	</blockquote>

	<p>La plupart des variables sont par nature temporaires. Certaines parties de votre programme sont comme de petites maisons. Vous y entrez et elles ont leurs propres variables. Dans une maison, vous pouvez avoir <code><span class="ident">papa</span></code> qui représente Archie, le représentant de commerce et collectionneur de squelette. Dans une autre maison, <code><span class="ident">papa</span></code> peut représenter Pierre, un dompteur de lion ayant un penchant pour la flanelle. Chaque maison a sa propre signification pour <code><span class="ident">papa</span></code>.</p>


	<p>Avec les variables globales, vous avez la garantie que la variable sera la même dans chaque petite maison. Le signe dollar est tout à fait approprié à cela. Chaque foyer américain respecte la valeur du dollar. Nous en sommes dingues. Essayez de frapper à la porte de n&#8217;importe quelle maison américaine et tendez leur du fric. Je peux vous garantir que vous n&#8217;obtiendrez pas le même effet si vous frappez à une porte et leur offrez Pierre, le dompteur de lion ayant un penchant pour la flanelle.</p>


	<p>Les variables globales peuvent être utilisées n&#8217;importe où dans votre programme. Elles ne sont jamais perdues de vue.</p>


	<h3>Variables d&#8217;Instance</h3>

	<p>Les variables commençant par une <strong>arobase</strong> sont des variables d&#8217;instance.</p>


	<blockquote>
		<p><code><span class="ident">x</span></code>, <code><span class="ident">y</span></code>, et <code><span class="ident">only_the_chunkiest_cut_of_bacon_I_have_ever_seen</span></code> en sont des exemples.</p>
	</blockquote>

	<p>Ces variables sont généralement utilisées pour définir les attributs de quelque chose. Par exemple vous pouvez fournir à Ruby la largeur de la <code><span class="ident">porte_devant</span></code> en affectant une valeur à la variable <code><span class="ident">largeur</span></code> dans cette <code><span class="ident">porte_devant</span></code>. En Ruby, les variables d&#8217;instance sont utilisées pour définir les caractèristiques d&#8217;un objet donné.</p>


	<p>Pensez au symbole <code><span class="ident">arobas</span></code> comme signifiant <strong>attribut</strong>. (NDT: marche mieux en anglais, où l&#8217;arobas se nomme <strong>at</strong>).</p>


	<h3>Variables de Classe</h3>

	<p>Les variables commençant par une <strong>double arobase sont des variables de classe.</p>


	<blockquote>
		<p><code><span class="attribute">@x</span></code>, <code><span class="attribute">@y</span></code>, et <code><span class="attribute">@i_will_take_your_chunky_bacon_and_raise_you_two</span></code> en sont des exemples.</p>
	</blockquote>

	<p>Les variables de classe sont aussi utilisées pour définir des attributs. Mais plutôt que de définir un attribut pour un seul objet en Ruby, les variables de classe définissent un attribut pour plusieurs objets apparentés. Si les variables d&#8217;instance définissent les attributs pour une seule <code><span class="ident">porte_devant</span></code>, alors les variables de classe définissent les attributs pour tout ce qui est une <code><span class="constant">Porte</span></code>.</p>


	<p>Pensez au *double arobas</strong> comment signifiant <strong>attributs pour tous</strong> . Ou vous pouvez vous les imaginer comme un essaim de chasseurs <strong>AT-AT</strong> de <em>Star Wars</em>, tous commandés par Ruby (NDT: marche bien mieux en anglais ou l&#8217;arobase se nomme <code><span class="ident">at</span></code>). Vous modifiez une variable de classe et tous changent, pas seulement un.</p>


	<p><img src="i/the.foxes-4f.png" title="Woohoo! Chunky bacon terminé!" alt="Woohoo! Chunky bacon terminé!" /></p>


	<h3>Blocs</h3>

	<p>Tout code entourré par des <strong>accolades</strong> est un bloc.</p>


	<blockquote>
		<p><code><span class="number">2</span><span class="punct">.</span><span class="ident">times</span> <span class="punct">{</span> <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Oui, j'ai utilisé Chunky Bacon dans mes exemple, mais je ne le ferai plus!</span><span class="punct">&quot;</span> <span class="punct">}</span></code> en est un exemple.</p>
	</blockquote>

	<p>Avec les blocs, vous pouvez grouper un ensemble d&#8217;instruction de façon à les transmettre au cours de votre programme. Les accolades ressemblents à des pinces de crabe qui auraient aggripé le code et le tiendrait groupé. Quand vous voyez ces deux pinces, rappelez vous que le code enserré a été compressé en une seule unité.</p>


	<p>C&#8217;est comme l&#8217;une des ces petites boites <a href="http://fr.wikipedia.org/wiki/Hello_Kitty">Hello Kitty</a> qu&#8217;ils vendent au supermaché, remplies de petits stylos et de papier microscopique, le tout empaqueté dans une petite trousse transparente et brillante qui tient dans le creux de la main. Mis à part que les blocs évitent de trop loucher.</p>


	<p>Les accolades peuvent aussi être remplacées par les mots <strong>do</strong> et <strong>end</strong>, ce qui est plus clair si votre bloc tient sur plusieurs lignes.</p>


<div class='example'><pre><code> <span class="ident">loop</span> <span class="keyword">do</span>
   <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Beaucoup mieux.</span><span class="punct">&quot;</span> 
   <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Ah. Plus d'espace!</span><span class="punct">&quot;</span> 
   <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">J'avais mal au dos à cause de ces pinces de crabe.</span><span class="punct">&quot;</span> 
 <span class="keyword">end</span></code></pre></div>
	<h3>Arguments de bloc</h3>

	<p>Les arguments de bloc sont un ensemble de variables entourées par des <strong>pipes</strong> (NDT: |) et séparées par des <strong>virgules</strong>.</p>


	<blockquote>
		<p><code lang="en">|x|</code>, <code><span class="punct">|</span><span class="ident">x</span><span class="punct">,</span><span class="ident">y</span><span class="punct">|</span></code>, et <code><span class="punct">|</span><span class="ident">up</span><span class="punct">,</span> <span class="ident">down</span><span class="punct">,</span> <span class="ident">all_around</span><span class="punct">|</span></code> en sont des exemples.</p>
	</blockquote>

	<p>Les arguments de bloc sont utilisés au début d&#8217;un bloc.</p>


	<blockquote>
		<p><code><span class="punct">{</span> <span class="punct">|</span><span class="ident">x</span><span class="punct">,</span><span class="ident">y</span><span class="punct">|</span> <span class="ident">x</span> <span class="punct">+</span> <span class="ident">y</span> <span class="punct">}</span></code></p>
	</blockquote>

	<p>Dans l&#8217;exemple précédent, <code><span class="punct">|</span><span class="ident">x</span><span class="punct">,</span><span class="ident">y</span><span class="punct">|</span></code> sont les arguments. Le code se trouve après les arguments. L&#8217;expression <code><span class="ident">x</span> <span class="punct">+</span> <span class="ident">y</span></code> ajoute les deux arguments ensembles.</p>


	<p>J&#8217;aime me représenter les deux caractères pipe comme un tunnel. Ils donnent l&#8217;impression d&#8217;un toboggan sur lequel les variables glissent. (<code><span class="ident">x</span></code> descend en écartant les jambes, alors que <code><span class="ident">y</span></code> croise les jambes.) Ce toboggan joue le rôle d&#8217;un passage entre les blocs et le monde qui les entoure.</p>


	<p>Les variables sont passées grâce à ce toboggan (ou tunnel) au bloc.</p>


	<p><img src="i/the.foxes-4g.png" title="And then, the dismal truth." alt="And then, the dismal truth." /></p>


	<h3>Intervalles</h3>

	<p>Un intervalle est composé de deux valeurs entourées par des <strong>parenthèses</strong> et séparées par une <strong>ellipse</strong> (sous la forme de deux ou trois points).</p>


	<blockquote>
		<p><code><span class="punct">(</span><span class="number">1</span><span class="punct">..</span><span class="number">3</span><span class="punct">)</span></code> est un intervalle, comprenant les nombres 1 à 3.</p>
	</blockquote>

	<blockquote>
		<p><code><span class="punct">('</span><span class="string">a</span><span class="punct">'..'</span><span class="string">z</span><span class="punct">')</span></code> est un intervalle comprenant les lettres minuscules.</p>
	</blockquote>

	<p>Voyez-le comme un accordéon qui a été plié afin d&#8217;être transporté. (Bien sûr, le fait de vous promener avec un accordéon déplié peut vous apporter une grande vanité, mais parfois une personne a besoin de se vautrer dans le doute, en le transportant, plié, dans son étui.) Les parenthèses représentent les poignées sur les côté d&#8217;un bandoléon. Les points représentent la chaine qui maintient l&#8217;accordéon plié.</p>


	<p>Généralement, on utilise seulement deux points. Si un troisième point est utilisé, la dernière valeur de l&#8217;intervalle est exclue.</p>


	<blockquote>
		<p><code><span class="punct">(</span><span class="number">0</span><span class="punct">...</span><span class="number">5</span><span class="punct">)</span></code> représente les nombres de 0 à 4 inclus.</p>
	</blockquote>

	<p>Quand vous voyez ce troisième point, imaginez que vous ouvrez légèrement l&#8217;accordéon. A peine assez pour laisser s&#8217;échapper une seule note. La note est la valeur de fin. Laissons-là monter vers le ciel.</p>


	<h3>Tableaux</h3>

	<p>Un tableau est une liste entourée par des <strong>crochets</strong> et dont les éléments sont séparés par des <strong>virgules</strong>.</p>


	<blockquote>
		<p><code><span class="punct">[</span><span class="number">1</span><span class="punct">,</span> <span class="number">2</span><span class="punct">,</span> <span class="number">3</span><span class="punct">]</span></code> est un tableau de nombres.</p>
	</blockquote>

	<blockquote>
		<p><code><span class="punct">['</span><span class="string">coat</span><span class="punct">',</span> <span class="punct">'</span><span class="string">mittens</span><span class="punct">',</span> <span class="punct">'</span><span class="string">snowboard</span><span class="punct">']</span></code> est un tableau de chaine de caractères.</p>
	</blockquote>

	<p>Représentez le vous comme une chenille qui aurait été aggrafée sur votre code. Les deux crochets sont les aggrafes qui l&#8217;empèche de bouger, afin de noter où se trouvent la tête et la queue. Les virgules sont les jambes de la chenille frétillantes entre chaque section de son corps.</p>


	<p>Il était une fois une chenille qui avait des virgules à la place des jambes. Ce qui veut dire qu&#8217;elle devait faire une pause littéraire après chaque pas. Les autres chenilles la respectaient beaucoup pour cette particularité, et elle servait un peu de chef. Et sans parler d&#8217;un philanthrope! Il était connu pour donner des feuilles fraiches aux moins fortunées.</p>


	<p>Oui, un tableau est une collection de choses, mais il garde aussi ces choses dans un ordre spécifique.</p>


	<h3>Hachage</h3>

	<p>Une table de hachage est un dictionnaire entouré par des <strong>accolades</strong>. Les dictionnaires font correspondre des noms à leur définition. Ruby indique celà par une <strong>flêche</strong>, faite d&#8217;un signal egal suivit par un signe supérieur.</p>


	<blockquote>
		<p><code><span class="punct">{'</span><span class="string">a</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">aardvark</span><span class="punct">',</span> <span class="punct">'</span><span class="string">b</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">badger</span><span class="punct">'}</span></code> en est un exemple.</p>
	</blockquote>

	<p>Cette fois, les accolades représentent de petits symboles en forme de livre. Regardez comme elles ressemblent à de petits livres ouvert, pliés en leur milieu. Ils représentent l&#8217;ouverture et la fermeture de notre dictionnaire.</p>


	<p>Imaginez que notre dictionnaire ait une définition sur chaque page. Les virgules représentent les coins de chacune des pages, que nous tournons pour voir la prochaine définition. Et sur chaque page: un mot suivi par une flêche poitant vers sa définition.</p>


<div class='example'><pre><code> <span class="punct">{</span>
   <span class="punct">'</span><span class="string">nom</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">Pierre</span><span class="punct">',</span>
   <span class="punct">'</span><span class="string">profession</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">dresseur de lion</span><span class="punct">',</span>
   <span class="punct">'</span><span class="string">grand amour</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">flannelle</span><span class="punct">'</span>
 <span class="punct">}</span></code></pre></div>
	<p>Je ne compare pas les tables de hachage aux dictionnaires pour indiquer que l&#8217;on ne peut stocker que des définitions dans les tables de hachage. Dans l&#8217;exemple précédent, j&#8217;ai stocké les informations personnelles de Pierre, le dresseur de lion avec un penchant pour la flannelle. Les tables de hachage sont comme les dictionnaires car elles permettent une recherche facile.</p>


	<p>A la différence des tableaux, les éléments d&#8217;une table de hachage ne sont pas gardés selon un ordre spécifique.
<img src="i/the.foxes-5.png" title="The foxes think silence will kill the comic." alt="The foxes think silence will kill the comic." /></p>


	<h3>Expression Régulières</h3>

	<p>Un expression régulière(ou <em>regexp</em>) est un ensemble de caractères entourés par des <strong>slashes</strong>.</p>


	<blockquote>
		<p><code><span class="punct">/</span><span class="regex">ruby</span><span class="punct">/</span></code>, <code><span class="punct">/</span><span class="regex">[0-9]+</span><span class="punct">/</span></code> et <code><span class="punct">/</span><span class="regex">^<span class="escape">\d</span>{3}-<span class="escape">\d</span>{3}-<span class="escape">\d</span>{4}</span><span class="punct">/</span></code> en sont des exemples.</p>
	</blockquote>

	<p>Les expressions régulières sont utilisées pour trouver des mots ou des motifs dans du texte. Les slahes de chaque côté de l&#8217;expressions sont des épingles.</p>


	<p>Imaginez que vous ayez un petit mot avec des épingles de chaque côté et que vous le passiez sur le livre. Vous promenez le mot sur le texte et quand il s&#8217;approche d&#8217;un mot correspondant, il commence à clignoter. Vous épinglez alors l&#8217;expression régulière sur le livre, juste sur le mot correspondant et il fait briller les lettres du mot.</p>


	<p>Et quand vous plantez les épingles dans le livre, le papier éternue, &#8220;<em>reg-exp!</em>&#8221;.</p>


	<p>Les expressions régulières sont beaucoup plus rapide que de passer vos mains sur les pages du livres. Ruby peut utliser une expression régulière pour chercher à travers énormément de livres très rapidement.</p>


	<h3>Opérateurs</h3>

	<p>Vous utiliserez la liste suivantes d&#8217;opérateurs pour faires des maths en Ruby ou pour comparer des choses. Lisez la liste, essayez d&#8217;en reconnaître certains. Vous savez, l&#8217;addition <code><span class="punct">+</span></code>, la soustraction <code><span class="punct">-</span></code> et tout celà...</p>


<div class='example'><pre class="text">  ** !  ~  *  /  %  +  -  &#38;  
  &lt;&lt; &gt;&gt; |  ^  &gt;  &gt;= &lt;  &lt;= &lt;=&gt;
  || != =~ !~ &#38;&#38; += -=  =
  .. ... not and or          
</pre></div>
	<h3>Mots Clé</h3>

	<p>Ruby comporte un certain nombre de mots-clé, imprégnés de signification. Ces mots ne peuvent être utilisés comme nom de variable ou modifiés afin de s&#8217;accorder à vos désirs. Nous avons déjà parlé de certains d&#8217;entre eux. Ils sont protégés mon ami. Vous les touchez et vous obtiendrez une erreur de syntaxe officielle.</p>


<div class='example'><pre class="text">  alias   and     BEGIN   begin   break   case    class   def     defined 
  do      else    elsif   END     end     ensure  false   for     if 
  in      module  next    nil     not     or      redo    rescue  retry 
  return  self    super   then    true    undef   unless  until   when 
  while   yield 
</pre></div>
	<p>OK. Ce sont les illustres membres du langage Ruby. Nous allons en bouffer pendant les trois prochains chapitres, assemblant ces parties en de rusés petits bouts de code (poignant).</p>


	<p>Je recommande de lire toutes les parties du discours encore une fois. Ayez-en une bonne vue d&#8217;ensemble. Je vous testerai dans la prochaine partie.
<img src="i/the.foxes-6.png" title="Out in the pickup truck." alt="Out in the pickup truck." /></p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Sept Moments Zen dans Ma Vie</h2>
        

        <ol>
	<li>8 ans. Allongé dans le lit, pensif. Et je réalise: <em>Rien ne m&#8217;empèche de devenir une enfant dentiste.</em></li>
	<li>21 ans. Je trouve un stylo sur la plage. Gravé dessus: <em>J&#8217;aime la sérénité.</em> A l&#8217;abri dans la poche intérieure de ma veste de costume. Je regarde les vagues aller et venir.</li>
	<li>22 ans. Je trouve, dans ma salle de bain, un scarabée sur le point de tomber dans le chauffage. Je le sauve. Je lui confectionne un petit sac à dos à l&#8217;aide d&#8217;une feuille et de fil. Dans le sac à dos: une quille et une pile <span class="caps">AAA</span>. Celà devrait l&#8217;aider. Je le libère devant le portail de devant.</li>
	<li>3 ans: J&#8217;écarte le rideau. Le soleil.</li>
	<li>14 ans. Je conduis mon vélo sur la jetée avec mon entraineur courant derrière moi pendant que le soleil se couche, juste après avoir battu Piston Honda dans la version originale Nintendo de &#8220;Mike Tyson&#8217;s Punch-Out&#8221;.</li>
	<li>11 ans. Malade. Je regarde <a href="http://fr.wikipedia.org/wiki/Cosby_Show">Heathcliff</a> à la télévision. Pendant des heures. Et il était capable de venir juste devant moi. Sa tête tournoyant vers moi. Sa tête allant et venant d&#8217;avant en arrière, très près puis à des millions de kilomètres. Plus de son. En une fraction de seconde, Heathcliff avait rempli l&#8217;univers puis était parti au confin de l&#8217;infini. J&#8217;entendais la voix de ma mère qui essayait de me parvenir au travers de la série. Proche, loin, proche, loin. C&#8217;était une rave religieuse avec un chat stroboscope et la voix de ma mère comme une basse etoufée. (J&#8217;avais plus de 40 de fièvre ce jour là).</li>
	<li>18 ans. Je m&#8217;achète un animal de compagnie. Un canard. Je le nourris pendant un temps. Je lui donne un bain. Je l&#8217;oublie pendant au moins 2 mois. Un jour, alors que je fais le ménage, je trouve une chaîne et le canard au bout. Eh, petit canard. Fou et monstrueux, sautillant avec ses cheveux au vent, poussant des gloussement en ligne diagonale. En smoking.</li>
</ol>
        <h1>sidebar!</h1>
        </div>

    
    
        
        <a name="section3" />
        <h2>3. Si Je ne Vous Avez Pas Encore Assez Traité Comme un Enfant</h2>

        <p>Je suis fier de vous. Tout le monde vous²q dira combien je vante vos mérites. Combien je glorifie cette personne anonyme, là-bas, qui fait défiler son écran et lit, et fait défiler son écran et lit. &#8220;Ces enfants&#8221;, leur dis-je. &#8220;Mec, ces enfants m&#8217;ont eu. Je n&#8217;ai jamais &#8230;&#8221; Et je ne peux même pas finir ma phrase car je pleure comme un veau.</p>


	<p>Et mon coeur brille d&#8217;un rouge vif sous ma peau vaporeuse et translucide, et ils doivent m&#8217;injecter 10 cm<sup>3</sup> de Javascript pour me rétablir. (Je réponds bien au drogues dans le sang.) Mec, ce truc vous ferez sauter les pêches hors des ouies!</p>


	<p>Et oui. Vous avez gentillement persévéré . Mais maintenant je dois commencer à devenir un maître d&#8217;école brutal. Je dois commencer à voir de bonnes notes de votre part. Jusqu&#8217;à présent vous n&#8217;avez rien fait d&#8217;autre que beaucoup bouger vos yeux. OK, bien sûr vous avez fait quelques lectures à haute voix exceptionnelles plus tôt. Mais maintenant, Smotchkkiss, nous allons avoir besoin de quelques talents de compréhension.</p>


	<p><strong>Prononcez à haute voix les parties du discours utilisées plus bas.</strong></p>


	<blockquote>
		<p><code><span class="number">5</span><span class="punct">.</span><span class="ident">times</span> <span class="punct">{</span> <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Odelay!</span><span class="punct">&quot;</span> <span class="punct">}</span></code></p>
	</blockquote>

	<p>Vous pouvez même vouloir revoir ce paragraphe pendant que vous lisez, car vos yeux voudront sauter vers la réponse. Nous avons le <em>nombre</em> <code><span class="number">5</span></code>, suivi de la <em>méthode</em> <code><span class="punct">.</span><span class="ident">times</span></code>. Ensuite la première paire de pince de crabe du <em>bloc</em>. La <em>méthode</em> du kernel <code><span class="ident">print</span></code> n&#8217;a pas de point et est suivie par la <em>chaîne de caractères</em> <code><span class="punct">&quot;</span><span class="string">Odelay!</span><span class="punct">&quot;</span></code>. La paire de pince de crabe terminale ferme notre <em>bloc</em>.</p>


	<p><strong>Prononcez à haute voix les parties du discours utilisées plus bas.</strong></p>


	<blockquote>
		<p><code><span class="ident">exit</span> <span class="keyword">unless</span> <span class="punct">&quot;</span><span class="string">restaurant</span><span class="punct">&quot;.</span><span class="ident">include?</span> <span class="punct">&quot;</span><span class="string">aura</span><span class="punct">&quot;</span></code></p>
	</blockquote>

	<p>A l&#8217;instar de la méthode <code><span class="ident">print</span></code>, <code><span class="ident">exit</span></code> est une méthode du kernel. Si vous avez fait attention lors de la grande list de mots-clé, vous savez que <code><span class="keyword">unless</span></code> est un <em>mot-clé</em>. La <em>chaine de caratères</em> <code><span class="punct">&quot;</span><span class="string">restaurant</span><span class="punct">&quot;</span></code> est suivi de la <em>méthode</em> <code><span class="ident">include?</span></code>. Et enfin, la chaîne de caratères <code><span class="punct">&quot;</span><span class="string">aura</span><span class="punct">&quot;</span></code>.</p>


	<p><strong>Prononcez à haute voix les parties du discours utilisées plus bas.</strong></p>


	<blockquote>
		<p><code><span class="punct">['</span><span class="string">pain</span><span class="punct">',</span> <span class="punct">'</span><span class="string">fromage</span><span class="punct">',</span> <span class="punct">'</span><span class="string">vin</span><span class="punct">'].</span><span class="ident">each</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">food</span><span class="punct">|</span> <span class="ident">print</span><span class="punct">(</span> <span class="ident">food</span><span class="punct">.</span><span class="ident">capitalize</span> <span class="punct">)</span> <span class="punct">}</span></code></p>
	</blockquote>

	<p>Cette chenille participe à notre délicat festin. Cet exemple commence par un <em>tableau</em>. Dans ce tableau, trois <em>chaînes de caratères</em>: <code><span class="punct">'</span><span class="string">pain</span><span class="punct">'</span></code>, <code><span class="punct">'</span><span class="string">fromage</span><span class="punct">'</span></code>, et <code><span class="punct">'</span><span class="string">vin</span><span class="punct">'</span></code>. Ce tableau est suivi par la <em>méthode</em> <code><span class="ident">each</span></code>.</p>


	<p>A l&#8217;intérieur d&#8217;un <em>bloc</em>, l&#8217;<em>argument de bloc</em> <code><span class="ident">food</span></code> descend par son toboggan à l&#8217;intérieur du bloc. La <em>méthode</em> <code><span class="ident">capitalize</span></code> met ensuite en majuscule la première lettre de l&#8217;argument de bloc, qui est devenu la <em>variable</em> <code><span class="ident">food</span></code>. Cette chaîne est alors passée à la <em>méthode</em> de kernel <code><span class="ident">print</span></code>.</p>


	<p>Relisez encore ces exemples. Soyez sûr de reconnaitre les différentes parties du discours utilisées. Elles ont toutes un look différent, n&#8217;est-ce-pas? Prenez une inspiration profonde, appuyez fermement sur vos tempes. Maintenant, disséquons un bout de code.</p>

    
    
        
        <a name="section4" />
        <h2>4. Un Exemple pour Vous Aider à Grandir</h2>

        <p><img src="i/the.foxes-7.png" title="Gettin' cabin fever." alt="Gettin' cabin fever." /></p>


	<p><strong>Prononcez à haute voix les parties du discours utilisées plus bas.</strong></p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">net/http</span><span class="punct">'</span>
 <span class="constant">Net</span><span class="punct">::</span><span class="constant">HTTP</span><span class="punct">.</span><span class="ident">start</span><span class="punct">(</span> <span class="punct">'</span><span class="string">www.ruby-lang.org</span><span class="punct">',</span> <span class="number">80</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">http</span><span class="punct">|</span>
     <span class="ident">print</span><span class="punct">(</span> <span class="ident">http</span><span class="punct">.</span><span class="ident">get</span><span class="punct">(</span> <span class="punct">'</span><span class="string">/en/LICENSE.txt</span><span class="punct">'</span> <span class="punct">).</span><span class="ident">body</span> <span class="punct">)</span>
 <span class="keyword">end</span></code></pre></div>
	<p>La prmière ligne est un appel à une méthode. La <em>méthode</em> appelée <code><span class="ident">require</span></code> est utilisée. Une <em>chaîne de caractère</em> contenant <code><span class="punct">'</span><span class="string">net/http</span><span class="punct">'</span></code> est passée à la méthode. Voyez cette première ligne de code comme une phrase. Nous avons demandé à Ruby de charger un code sensé nous aider, la bibliothèque <code><span class="constant">Net</span><span class="punct">::</span><span class="constant">HTTP</span></code>.</p>


	<p>Les trois lignes suivantes vont toutes ensembles. La <em>constante</em> <code><span class="constant">Net</span><span class="punct">::</span><span class="constant">HTTP</span></code> se rapporte à la bibliothèque que nous venons de charger précédemment. Nous utilisons la <em>méthode</em> <code><span class="ident">start</span></code> de cette bibliothèque. Nous envoyons à la méthode la <em>chaîne de caractères</em> <code><span class="punct">'</span><span class="string">www.ruby-lang.org</span><span class="punct">'</span></code> et le <em>nombre</em> <code><span class="number">80</span></code>.</p>


	<p>Le mot <code><span class="keyword">do</span></code> ouvre un <em>bloc</em>. Ce bloc possède une <em>variable de bloc</em> <code><span class="ident">http</span></code>. Dans ce block, la <em>méthode</em> <code><span class="ident">print</span></code> est appelée. Qu&#8217;est-ce qui va être affiché?</p>


	<p>La <em>méthode</em> <code><span class="ident">get</span></code> est appelée depuis la <em>variable</em> <code><span class="ident">http</span></code>. Nous passons à <code><span class="ident">get</span></code> une <em>chaîne de caractères</em> contenant le chemin <code><span class="punct">'</span><span class="string">/en/LICENSE.txt</span><span class="punct">'</span></code>. Maintenant, remarquez qu&#8217;une autre méthode est enchainée avec <code><span class="ident">get</span></code>. La <em>méthode</em> <code><span class="ident">body</span></code>. Puis le bloc se termine avec un <code><span class="keyword">end</span></code>.</p>


	<p>Tout va bien? Juste par curiosité, pouvez-vous deviner ce que fait cet exemple? J&#8217;espère que vous voyez certains motif de Ruby. Sinon, remuez votre tête vigouresement pendant que vous avez ces exemples à l&#8217;esprit. Le code devrait se casser en de petites sections que vous devriez comprendre.</p>


	<p>Par exemple, ce motif est utilisé plusieurs fois:</p>


	<blockquote>
		<p><em>variable</em> . <em>méthode</em> ( <em>argument de méthode</em> )</p>
	</blockquote>

	<p>Vous le voyez dans le bloc:</p>


	<blockquote>
		<p><code><span class="ident">http</span><span class="punct">.</span><span class="ident">get</span><span class="punct">(</span> <span class="punct">'</span><span class="string">/en/LICENSE.txt</span><span class="punct">'</span> <span class="punct">)</span></code></p>
	</blockquote>

	<p>On utilise Ruby pour obtenir une page web. Vous avez sans doute déjà utilisé <span class="caps">HTTP</span> avec votre browser. <span class="caps">HTTP</span> est l&#8217;Hypertext Transfer Protocol. <span class="caps">HTTP</span> est utilisé pour transférer des pages web à travers Internet. Imaginez un conducteur de bus qui pourrait conduire à travers Internet et vous ramener des pages web. Sur son chapeau, brillent les lettres <span class="caps">HTTP</span>.</p>


	<p>La variable <code><span class="ident">http</span></code> est ce conducteur de bus. La <em>méthode</em> est un message au conducteur de bus. Va <code><span class="ident">chercher</span></code> (NDT: <code><span class="ident">get</span></code> en anglais) la page web nommée <code><span class="punct">/</span><span class="regex">en</span><span class="punct">/</span><span class="constant">LICENSE</span><span class="punct">.</span><span class="ident">txt</span></code>.</p>


	<p>Aussi, là où vous verrez:</p>


	<blockquote>
		<p><code><span class="ident">http</span><span class="punct">.</span><span class="ident">get</span><span class="punct">(</span> <span class="punct">'</span><span class="string">/en/LICENSE.txt</span><span class="punct">'</span> <span class="punct">).</span><span class="ident">body</span></code></p>
	</blockquote>

	<p>Comme nous récupérons une page web de la part du conducteur de bus nommé <code><span class="ident">http</span></code>, vous pouvez le lire dans votre esprit comme:</p>


	<blockquote>
		<p><em>page web</em> .body</p>
	</blockquote>

	<p>Et ce bout de code:</p>


	<blockquote>
		<p><code><span class="ident">print</span><span class="punct">(</span> <span class="ident">http</span><span class="punct">.</span><span class="ident">get</span><span class="punct">(</span> <span class="punct">'</span><span class="string">/en/LICENSE.txt</span><span class="punct">'</span> <span class="punct">).</span><span class="ident">body</span> <span class="punct">)</span></code></p>
	</blockquote>

	<p>Ce code récupère la page web. Nous envoyons un message <code><span class="ident">body</span></code> à cette page web, ce qui nous donne tout l&#8217;HTML dans une <em>chaîne de caractères</em>. On <em>affiche</em> (NDT: <code><span class="ident">print</span></code> en anglais) ensuite cette chaine. Vous voyez comme le motif point-méthode est utilisé de façon chainée. Le prochain chapitre explorera ce genre de motifs en Ruby. Ce sera marrant.</p>


	<p>Alors, que fait ce code? Il affiche le code <span class="caps">HTML</span> de la &#8220;home page&#8221; du sitre officiel de Ruby à l&#8217;écran. En utilisant un conducteur de bus branché au web.</p>

    
    
        
        <a name="section5" />
        <h2>5. Et, Le Voyage Rapide Arrive A Une Fin Simple et Rembourrée</h2>

        <p><img src="i/the.foxes-8.png" title="Running after the truck." alt="Running after the truck." /></p>


	<p>Bien, maintenant nous avons un problème. J&#8217;ai l&#8217;impression que cette façon d&#8217;apprendre vous plait un peu trop. Et vous n&#8217;avez pas encore atteint le chapitre où j&#8217;utilise des chansons de saut à la corde pour vous aider à apprendre comment analyser du <span class="caps">XML</span>!</p>


	<p>Si celà vous plait déjà, alors les choses vont vraiment mal. Dans deux chapitres, vous écrirez vos propres programmes en Ruby. En fait, c&#8217;est juste là que je vous ferai écrire votre propre jeu de rôle, votre propre réseau de partage de fichiers (à la BitTorrent) ainsi qu&#8217;un programme qui récupèrera des nombres aléatoires depuis Internet.</p>


	<p style="float:right"><img src="i/graph-1.gif" title="Proof has been extracted from the pudding." alt="Proof has been extracted from the pudding." /></p>


	<p>Et vous savez (vous devez savoir!) que celà va devenir une obsession. D&#8217;abord vous allez complètement oublier de sortir le chien. Il attendra près de la porte de votre bureau, tournant sa tête vers vous, alors que vos yeux dévoreront le code, que vos doigts enverront des messages à l&#8217;ordinateur.</p>


	<p>A cause de votre négligence, les choses vont commencer à aller mal. Vos tas de feuilles imprimées de code vont recouvrir vos conduits d&#8217;aération. Votre chaudière va se boucher. Les ordures vont s&#8217;amonceler: des boites à emporter que vous aurez commandé précipitamment, du courrier inoportun. Votre propre crasse polluera l&#8217;air. La mousse gagnera le chevron, les arrivées d&#8217;eau vont se boucher, les animaux entreront, et les arbres pousseront depuis les fondations.</p>


	<p>Mais vous prendrez soin de votre ordinateur. Et vous, Smotchkkiss, le nourrirez avec votre connaissance. Au cours des éternités que vous aurez passé avec votre machine, vous serez devenu à moitié <span class="caps">CPU</span>. Et il sera devenu à moitié humain. Vos bras pénètreront directement dans les ports de votre ordinateurs. Vos yeux accepteront la video directement depuis une broche <span class="caps">DVI</span>-24. Vos poumons se trouveront juste au dessus du processeur, et le refroidiront.</p>


	<p>Et juste comme la pièce sera prête à se refermer sur vous, juste comme tout cette luxuriance va vous avaler vous et votre ordinateur, vous terminerez votre script. Vous et votre machine, ensemble, ferez marcher ce dernier script Ruby, le produit de votre obsession. Et le script lancera des tronçonneuses pour couper les arbres, des cheminées pour aider à réchauffer la maison. Des nano-robots constructeurs sortiront de votre script pour reconstruire votre intérieur, re-carreler, rénover, chromer, polir et désinfecter. D&#8217;immenses piliers se dresseront, et des statues seront sculptées. Vous maintiendrez ce palais sous votre domination ainsi que les montagnes et îles qui entourent votre forteresse.</p>


	<p>Bon je pense que l&#8217;on va être d&#8217;accord. Qu&#8217;est-ce-que tu dis? Attaquons ce script?</p>

    
    

    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>4.</h3>
        <h1>Feuilles de Code Flottant Au Vent</h1>
        <p><img src="i/chapter.poignant.guide-4.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/the.elf-1.gif" title="Impossibly deep in the caverns of Ambrose... the Elf with a pet ham!" alt="Impossibly deep in the caverns of Ambrose... the Elf with a pet ham!" />
<img src="i/the.elf-2.gif" title="...and the cat Trady Blix." alt="...and the cat Trady Blix." /></p>


	<p>Je n&#8217;ai jamais vu un jambon faire autre chose que de perdre du jus. Aujourd&#8217;hui, dans les Cavernes d&#8217;Ambroise nous allons nous occuper de l&#8217;elfe. Il joue un rôle clé dans les prochaines leçons. Accueuillons le chaleureusement. Commencez à afire chauffer vos chapeaux d&#8217;écoute! (Et s&#8217;il vous plait, changez moi ce rifdicule pantalon à étriers.)</p>


	<p>Un petit avertissement: cette leçon est beaucoup plus lente. Suivez là. Ce sera une longue et profonde respiration. L&#8217;étape la plus cruciale de votre instruction. Vous pouvez avoir tout d&#8217;abord l&#8217;impression que vous n&#8217;apprenez pas beaucoup à coder. Vous apprendrez des concepts. a la fin de ce chapitre, vous connaitre la beauté de Ruby. Le confort apporté par le code deveindra un sac de couchage pour votre propre réconfort.</p>

    
    
        
        <a name="section1" />
        <h2>1. The Leaf as a Status Symbol in Ambrose</h2>

        <p>Alright, Elf.  Give us a quick rundown of the currency issues you&#8217;ve faced there in your kingdom.</p>


	<p><img src="i/the.elf-3.gif" title="Blue Crystals got the shaft." alt="Blue Crystals got the shaft." /></p>


	<p>Yeah, that&#8217;s not the way I remember it.  This Elf was paging me constantly.  When I refused to call him back, he somehow left a message on my pager.  Meaning: it beeped a couple times and then printed out a small slip of paper.  The slip said something to the effect of, &#8220;Get down here quick!&#8221; and also, &#8220;We&#8217;ve got to rid the earth of this scourge of enterpreneurial caterpillars, these twisted insect vikings are suffocating my blue crystals!&#8221;</p>


	<p>Lately, the exchange rate has settled down between leaves and crystals.  One treegrown note is worth five crystals.  So the basic money situation looks like this:</p>


<div class='example'><pre><code> <span class="ident">blue_crystal</span> <span class="punct">=</span> <span class="number">1</span>
 <span class="ident">leaf_tender</span> <span class="punct">=</span> <span class="number">5</span></code></pre></div>
	<p>This example is, like, <em>totally</em> last chapter.  Still.  It&#8217;s a start.  We&#8217;re setting two <em>variables</em>. The <strong>equals sign</strong> is used for <em>assignment</em>.</p>


	<p>Now <code><span class="ident">leaf_tender</span></code> represents the number <code><span class="number">5</span></code> (as in: five blue crystals.)  This concept right here is <strong>half of Ruby</strong>.  We&#8217;re <em>defining</em>.  We&#8217;re <em>creating</em>.  This is half of the work.   Assignment is the most basic form of defining.</p>


	<p>You can&#8217;t complain though, can you Elf?  You&#8217;ve built an empire from cashing your blue crystals into the new free market among the forest creatures.  (And even though he&#8217;s an elf to us, he&#8217;s a tall monster to them.)</p>


	<p><img src="i/the.elf-4.jpg" title="Animal Perfect, LLC" alt="Animal Perfect, LLC" /></p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>The Scarf Eaters</h2>
        

        <p>I hate to intrude upon your instruction, but I&#8217;ve already walked all over it enough to  warrant some further disregard.  Can I go over my next project with you?</p>


	<p>I&#8217;ve pledged to write another book.  (<em>Trombones</em>.)  The good news is that I won&#8217;t actually be writing any of it.  You won&#8217;t have to endure any more of this inane blathering.</p>


	<p>It&#8217;s over between me and words.  I&#8217;d love to stick around and exploit them each, one after another, but it&#8217;s all becoming quite predictable, wouldn&#8217;t you say?  Eventually, they will all be used and I&#8217;d have to come up with fake words and that would be way too cnoofy.</p>


	<p>Now.  The deal isn&#8217;t cut yet, but I&#8217;m in negotiations with Anna Quindlen to do my ghost writing. We&#8217;re tag-teaming on a book that&#8217;s going to blow the (Poignant) Guide right out of your hands.  To put it bluntly, the Guide will be worthless.  You won&#8217;t be able to pile enough  pomegranates on top of the thing.</p>


	<p>So this new book.  The Scarf Eaters.  It&#8217;s a coming-of-age novel.  But it&#8217;s also a beginner&#8217;s guide to Macromedia Flash.  It&#8217;s like Judy Blume crossed Praystation.  It&#8217;s like 0sil8 starring Hillary Duff.</p>


	<p>I don&#8217;t want to give away the plot at all, but to tug your appetite I&#8217;ll just say this: one kid talks to his dead brother in ActionScript.  More to come.</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Nonono.  Hang on a sec.  You&#8217;re not ready for what the Elf here is doing in his caves. You&#8217;ll think it&#8217;s all positively inhumane, naughty, sick, tweeested, yada yada.</p>


	<h3> Now You&#8217;re Going to Hear the Animal Perfect Mission Statement Because This Is A Book And We Have Time And No Rush, Right?</h3>

	<p>Back, back, way back before speedboats, I owned a prize race horse who took a stumble on  the track.  She did ten front flips and crashed into a guy who was carrying a full jar  of mayonnaisse.  We had blood and mayonnaisse up and down the track.  Needless to say,  she was a disaster.</p>


	<p>The vet took one look at her and swore she&#8217;d never walk again.  Her legs were gone and the vet wouldn&#8217;t allow a legless horse to just sit around.  We&#8217;d need to put her down.   He swore his life and career on it, insisting we divide into two parallel lines.  The people  who could not refute the doctor&#8217;s claims on one side; those too stubborn to accept his  infallable medical reasoning on the other.  The Elf, his pet ham, and I were the only  ones in that second line.</p>


	<p>So while the others heaped up trophies and great wreaths around the horse, bidding it a  fond farewell before the bullet came to take him home, the Elf and I frantically pawed the Internet for  answers.  We took matter into our own hands, cauterizing her leg wounds with live crawdads.   It worked great!  We now had a horse again.   Or at least: a horse body with a crustaceous abdominal frosting.</p>


	<p>She scurried everywhere after that and lived for years in pleasantly moist underground cavities.</p>


	<p>Animal Perfect is now the future of animal enhancement.  They build new animals and salvage  old-style animals for parts.  Of course, they&#8217;ve come a long ways. When Animal Perfect started, you&#8217;d see a full-grown bear walk into Animal Perfect and you&#8217;d see a full-grown bear with sunglasses walk out.  Completely cheesy.</p>


	<p>Stick around and you&#8217;ll see a crab with <em>his own jet pack</em>.  That&#8217;s a new 2004 model jetcrab.</p>


	<p>But now, the whole operation is up and running.  And the cleanliness of the place is astonishing. All the equipment is so shiny.  Everything is in chrome.  Oh, and all the staff have concealed weapons.  They&#8217;re trained to kill anyone who enters unannounced.  Or, if they run out of bullets, they&#8217;re trained to pistol whip anyone who enters unannounced.</p>


	<p>Elf, make me a starmonkey.</p>


	<p><img src="i/the.elf-5a.jpg" title="First, the star is caught." alt="First, the star is caught." /></p>


	<p>Some imaginary Ruby for you:</p>


	<blockquote>
		<p><code><span class="ident">pipe</span><span class="punct">.</span><span class="ident">catch_a_star</span></code></p>
	</blockquote>

	<p>Variable <code><span class="ident">pipe</span></code>.  Method <code><span class="ident">catch_a_star</span></code>.  A lot of Rubyists like to think of methods as a message. Whatever comes before the dot is handed the message.  The above code tells the <code><span class="ident">pipe</span></code> to <code><span class="ident">catch_a_star</span></code>.</p>


	<p>This is the <strong>second half</strong> of Ruby.  Putting things in motion.  These things you define and create in the first half start to <em>act</em> in the second half.</p>


<ol>
	<li>Defining things.</li>
	<li>Putting those things into action.</li>
</ol>

	<p>So what if the star catching code works?  Where does the star go?</p>


	<blockquote>
		<p><code><span class="ident">captive_star</span> <span class="punct">=</span> <span class="ident">pipe</span><span class="punct">.</span><span class="ident">catch_a_star</span></code></p>
	</blockquote>

	<p>See, it&#8217;s up to you to collect the miserable, little star.  If you don&#8217;t, it&#8217;ll simply vanish. Whenever you use a method, you&#8217;ll always be given something back.  You can ignore it or use it.</p>


	<p><em>If you can learn to use the answers that methods give you back, then you will <strong>dominate</strong>.</em></p>


	<p><img src="i/the.elf-5b.jpg" title="Star is ratcheted to the monkey's face." alt="Star is ratcheted to the monkey's face." /></p>


	<p>Quickly then.</p>


	<blockquote>
		<p><code><span class="ident">starmonkey</span> <span class="punct">=</span> <span class="ident">ratchet</span><span class="punct">.</span><span class="ident">attach</span><span class="punct">(</span> <span class="ident">captive_monkey</span><span class="punct">,</span> <span class="ident">captive_star</span> <span class="punct">)</span></code></p>
	</blockquote>

	<p>The <code><span class="ident">ratchet</span></code> gets an <code><span class="ident">attach</span></code> message.  What needs to be attached?  The <em>method arguments</em>: the <code><span class="ident">captive_monkey</span></code> and the <code><span class="ident">captive_star</span></code>.  We are given back a <code><span class="ident">starmonkey</span></code>, which we have decided to hang on to.</p>


	<p><img src="i/the.elf-5c.gif" title="Frog on the hand." alt="Frog on the hand." /></p>


	<p>This is turning out to be such a short, little proggie that I&#8217;m just going to put it all together as one statement.</p>


	<blockquote>
		<p><code><span class="ident">starmonkey</span> <span class="punct">=</span> <span class="ident">ratchet</span><span class="punct">.</span><span class="ident">attach</span><span class="punct">(</span> <span class="ident">captive_monkey</span><span class="punct">,</span> <span class="ident">pipe</span><span class="punct">.</span><span class="ident">catch_a_star</span> <span class="punct">)</span> <span class="punct">+</span> <span class="ident">deco_hand_frog</span></code></p>
	</blockquote>

	<p>See how <code><span class="ident">pipe</span><span class="punct">.</span><span class="ident">catch_a_star</span></code> is right in the arguments for the method?  The caught  star will get passed right to the ratchet.  No need to find a place to put it.  Just let it go.</p>

    
    
        
        <a name="section2" />
        <h2>2. Small and Nearly Worthless</h2>

        <p><img src="i/blix-1.gif" title="Law-va." alt="Law-va." /></p>


	<p>The hotel here in Ambrose is no good at all.  The beds are all lumpy. The elevator is tiny.  One guy put all his bags in the elevator and found out there wasn&#8217;t room for him.  He hit the button and chased up the stairs after it all.  But the stairwell turned out to be too narrow and his shoulders got wedged going up.</p>


	<p>The soap mini-bars they give you are sized down for elves, so it&#8217;s impossible to work up a lather.  I hate it.  I keep mistaking them for contact lenses.</p>


	<p>I turned on the faucet and nothing came out.  Thing is: Ambrose is a place with magical properties, so I took a chance.  I put my hands under the spigot.  Invisible, warm wetness.  I felt the hurried sensation of running water, darting through my fingers.  When I took my hands away, they were dry and clean.</p>


	<p>It was an amazing nothingness to experience.  It was just like <code><span class="constant">nil</span></code>.</p>


	<h3>Nil</h3>

	<p>In Ruby, <code><span class="constant">nil</span></code> represents an emptiness.  It is <strong>without value</strong>.  It isn&#8217;t zero. Zero is a number.</p>


	<p>It&#8217;s Ruby&#8217;s own walking dead, a flatlined keyword.  You can&#8217;t add to it, it doesn&#8217;t evolve.  But it&#8217;s terribly popular.  This skeleton&#8217;s smiling in all the pictures.</p>


	<blockquote>
		<p><code><span class="ident">plastic_cup</span> <span class="punct">=</span> <span class="constant">nil</span></code></p>
	</blockquote>

	<p>The above <code><span class="ident">plastic_cup</span></code> is <strong>empty</strong>.  You could argue that the <code><span class="ident">plastic_cup</span></code> contains something, a <code><span class="constant">nil</span></code>.  The <code><span class="constant">nil</span></code> represents the emptiness, though, so go ahead and call it empty.</p>


	<p>Some of you who have programmed before will be tempted to say the <code><span class="ident">plastic_cup</span></code> is <strong>undefined</strong>.  How about let&#8217;s not.  When you say a variable is undefined, you&#8217;re saying that Ruby simply has no recollection of the variable, it doesn&#8217;t know the var, it&#8217;s absolutely non-existent.</p>


	<p>But Ruby is aware of the <code><span class="ident">plastic_cup</span></code>.  Ruby can easily look in the <code><span class="ident">plastic_cup</span></code>. It&#8217;s <strong>empty</strong>, but not <strong>undefined</strong>.</p>


	<h3>False</h3>

	<p style="float:left"><img src="i/blix-neg.gif" title="Shape of a cat." alt="Shape of a cat." /></p>


	<p><em>The cat Trady Blix.  Frozen in emptiness.  Immaculate whiskers rigid.  Placid eyes of lake.  Tail of warm icicle.  Sponsored by a Very Powerful Pause Button.</em></p>


	<p>The darkness surrounding Blix can be called <strong>negative space</strong>.  Hang on to that phrase. Let it suggest that the emptiness has a negative connotation.  In a similar way, <code><span class="constant">nil</span></code> has a slightly sour note that it whistles.</p>


	<p>Generally speaking, <strong>everything in Ruby has a positive charge to it</strong>.  This spark flows through strings, numbers, regexps, all of it.  Only two keywords wear a shady cloak: <code><span class="constant">nil</span></code> and <code><span class="constant">false</span></code> draggin us down.</p>


	<p>You can <strong>test that charge</strong> with an <code><span class="keyword">if</span></code> keyword.  It looks very much like the <code><span class="keyword">do</span></code> blocks we saw in the last chapter, in that both end with an <code><span class="keyword">end</span></code>.</p>


<div class='example'><pre><code> <span class="keyword">if</span> <span class="ident">plastic_cup</span>
   <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Plastic cup is on the up 'n' up!</span><span class="punct">&quot;</span> 
 <span class="keyword">end</span></code></pre></div>
	<p>If <code><span class="ident">plastic_cup</span></code> contains either <code><span class="constant">nil</span></code> or <code><span class="constant">false</span></code>, you won&#8217;t see anything print to the screen.  They&#8217;re not on the <code><span class="keyword">if</span></code> guest list.  So <code><span class="keyword">if</span></code> isn&#8217;t going to run any of the code it&#8217;s protecting.</p>


	<p>But <code><span class="constant">nil</span></code> and <code><span class="constant">false</span></code> need not walk away in shame.  They may be of questionable character, but <code><span class="keyword">unless</span></code> runs a smaller establishment that caters to the bedraggled. The <code><span class="keyword">unless</span></code> keyword has a policy of <strong>only allowing those with a negative charge in</strong>. Who are: <code><span class="constant">nil</span></code> and <code><span class="constant">false</span></code>.</p>


<div class='example'><pre><code> <span class="keyword">unless</span> <span class="ident">plastic_cup</span>
   <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Plastic cup is on the down low.</span><span class="punct">&quot;</span> 
 <span class="keyword">end</span></code></pre></div>
	<p>You can also use <code><span class="keyword">if</span></code> and <code><span class="keyword">unless</span></code> at the <strong>end of a single line of code</strong>, if that&#8217;s all that is being protected.</p>


<div class='example'><pre><code> <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Yeah, plastic cup is up again!</span><span class="punct">&quot;</span> <span class="keyword">if</span> <span class="ident">plastic_cup</span>
 <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Hardly. It's down.</span><span class="punct">&quot;</span> <span class="keyword">unless</span> <span class="ident">plastic_cup</span></code></pre></div>
	<p>And another nice trick: stack the <code><span class="keyword">if</span></code> and <code><span class="keyword">unless</span></code>.</p>


<div class='example'><pre><code> <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">We're using plastic 'cause we don't have glass.</span><span class="punct">&quot;</span> <span class="keyword">if</span> <span class="ident">plastic_cup</span> <span class="keyword">unless</span> <span class="ident">glass_cup</span></code></pre></div>
	<p>This trick is a gorgeous way of expressing, <em>Do this only if <strong>a* is true and *b</strong> isn&#8217;t true</em>.</p>


	<p>Now that you&#8217;ve met <code><span class="constant">false</span></code>, I&#8217;m sure you can see what&#8217;s on next.</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Make Your Own Starmonkey!</h2>
        

        <p>1.  Turn a mug upside-down.
<img src="i/starmonkeycrafts-1.jpg" alt="" />
2. Attach an apple with a rubber band.
<img src="i/starmonkeycrafts-2.jpg" alt="" />
3. Shove car keys into the sides of the apple.
<img src="i/starmonkeycrafts-3.jpg" alt="" />
4. Glue star face.
<img src="i/starmonkeycrafts-4.jpg" alt="" /></p>


	<p>You have two complementary star faces waiting in your account.</p>


	<p style="text-align:center;"><img src="i/starmonkeycrafts-5.gif" alt="" /></p>
Standard, placid.

	<p style="text-align:center;"><img src="i/starmonkeycrafts-6.gif" alt="" /></p>
Eating chalk.
        <h1>sidebar!</h1>
        </div>

    
    

        <h3>True</h3>

	<blockquote>
		<p><code><span class="ident">approaching_guy</span> <span class="punct">=</span> <span class="constant">true</span></code></p>
	</blockquote>

	<p>I saw <code><span class="constant">true</span></code> at the hotel buffet tables today.  I cannot stand that guy. His stance is way too wide.  And you&#8217;ve never met anyone who planted his feet so hard in the ground.  He wears this corny necklace made out of shells.  His face exudes this brash confidence.  (You can tell he&#8217;s exerting all of his restraint just to keep from bursting into Neo flight.)</p>


	<p>To be honest, I can&#8217;t be around someone who always has to be right. This <code><span class="constant">true</span></code> is always saying, &#8220;A-OK.&#8221;  Flashing hang ten.  And seriously,  he loves that necklace.  Wears it constantly.</p>


	<p>As you&#8217;d suspect, he&#8217;s backstage at everything on the <code><span class="keyword">if</span></code> event schedule.</p>


	<blockquote>
		<p><code><span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Hugo Boss</span><span class="punct">&quot;</span> <span class="keyword">if</span> <span class="constant">true</span></code> acts like <code><span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Hugo Boss</span><span class="punct">&quot;</span></code>.</p>
	</blockquote>

	<p>Occassionally, <code><span class="keyword">if</span></code> will haul out the velvet ropes to exercise some crowd control.   The <strong>double equals</strong> gives the appearance of a short link of ropes, right along the sides of a red carpet where only <code><span class="constant">true</span></code> can be admitted.</p>


<div class='example'><pre><code> <span class="keyword">if</span> <span class="ident">approaching_guy</span>  <span class="constant">true</span>
   <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">That necklace is classic.</span><span class="punct">&quot;</span> 
 <span class="keyword">end</span></code></pre></div>
	<p>The double equals is simply <strong>an ID check</strong>.  Do the gentleman at both ends of this rope appear to match?</p>


	<p>In this way, you control who <code><span class="keyword">if</span></code> lets in.  If you have a hard time getting along with <code><span class="constant">true</span></code> as I do, you can heartily welcome <code><span class="constant">false</span></code>.</p>


<div class='example'><pre><code> <span class="keyword">if</span> <span class="ident">approaching_guy</span>  <span class="constant">false</span>
   <span class="ident">print</span> <span class="punct">&amp;</span><span class="comment">#8220;Get in here, you conniving devil.&amp;#8221; </span>
 <span class="keyword">end</span></code></pre></div>
	<p>Same goes for <code><span class="keyword">unless</span></code>.  The gateway is yours.  Take possession of it.</p>


	<h3>Again, I Want You to Dominate</h3>

	<p>Now, you want a head trip?  <strong>The double equals sign is a method.</strong>  Can you guess how it works?  Here, check it out with the dot and parens:</p>


	<blockquote>
		<p><code><span class="ident">approaching_guy</span><span class="punct">.==(</span> <span class="ident">true</span> <span class="punct">)</span></code></p>
	</blockquote>

	<p>Ruby allows the shortcut, though.  You can drop the dot and back away slowly.</p>


	<p>Now, do you remember what you need to do to <strong>dominate</strong> in Ruby?  <em>Use the answers the methods give you.</em></p>


<div class='example'><pre><code> <span class="keyword">if</span> <span class="constant">nil</span><span class="punct">.==(</span> <span class="ident">true</span> <span class="punct">)</span>
   <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">This will never see realization.</span><span class="punct">&quot;</span> 
 <span class="keyword">end</span></code></pre></div>
	<p>In the above, how is the method&#8217;s answer being used?</p>


	<p>Let&#8217;s take the statement <code><span class="constant">nil</span> <span class="punct">==</span> <span class="constant">true</span></code>.  This will fail every time.  No match.   When there&#8217;s no match, the double equals method answers with <code><span class="constant">false</span></code>.  A shake of the head. That answer is given to <code><span class="keyword">if</span></code>, who can&#8217;t accept a <code><span class="constant">false</span></code>.  The <code><span class="ident">print</span></code> never sees realization.</p>


<div class='example'><pre><code> <span class="ident">at_hotel</span> <span class="punct">=</span> <span class="constant">true</span>
 <span class="ident">email</span> <span class="punct">=</span> <span class="keyword">if</span> <span class="ident">at_hotel</span>
           <span class="punct">&quot;</span><span class="string">why@hotelambrose.com</span><span class="punct">&quot;</span> 
         <span class="keyword">else</span>
           <span class="punct">&quot;</span><span class="string">why@drnhowardcham.com</span><span class="punct">&quot;</span> 
         <span class="keyword">end</span></code></pre></div>
	<p>Even though <code><span class="keyword">if</span></code> isn&#8217;t a method, <code><span class="keyword">if</span></code> does give a return answer.  Look at the above and wonder over what happens when <code><span class="ident">at_hotel</span></code> is <code><span class="constant">true</span></code>.</p>


	<p>The <code><span class="keyword">if</span></code> will return the answer given by the code it chooses to run.  In the case of  <code><span class="ident">at_hotel</span></code> being true, the first string, my e-mail address at Hotel Ambrose, will be returned.  The <code><span class="keyword">else</span></code> keyword marks code which will run, should <code><span class="keyword">if</span></code> fail.  If <code><span class="ident">at_hotel</span></code> is false, the <code><span class="keyword">if</span></code> will answer with my e-mail address at Dr. N. Howard Cham&#8217;s office,  where I take my apprenticeship.</p>


	<p>Should you have several lines of code in an <code><span class="keyword">if</span></code> or <code><span class="keyword">unless</span></code>, <strong>only the answer from the last full statement will be used</strong>.</p>


<div class='example'><pre><code> <span class="ident">email</span> <span class="punct">=</span> <span class="keyword">if</span> <span class="ident">at_hotel</span>
           <span class="ident">address</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">why</span><span class="punct">&quot;</span> 
           <span class="ident">address</span> <span class="punct">&lt;&lt;</span> <span class="punct">&quot;</span><span class="string">@hotelambrose</span><span class="punct">&quot;</span> 
           <span class="ident">address</span> <span class="punct">&lt;&lt;</span> <span class="punct">&quot;</span><span class="string">.com</span><span class="punct">&quot;</span> 
         <span class="keyword">end</span></code></pre></div>
	<p>Three lines of code inside the <code><span class="keyword">if</span></code>.  The first line assigns a string with my name in it to a variable. The second and third lines add the rest of my e-mail address on to the end.  The <strong>double less-than <code><span class="punct">&lt;&lt;</span></code> is the concatenation operator</strong>.  To concatenate is to <strong>append</strong>, or <strong>add to the end</strong>.</p>


	<p>Just as we saw with the equality checker <code><span class="punct">==</span></code>, the concatenator is a method.  After adding to the end of the string, the concatenator also <strong>answers with that very string</strong>.  So, the third line, which could be read as <code><span class="ident">address</span><span class="punct">.&lt;&lt;(</span> <span class="punct">&quot;</span><span class="string">.com</span><span class="punct">&quot;</span> <span class="punct">)</span></code>, gives back <code><span class="ident">address</span></code>, which the <code><span class="keyword">if</span></code> then hands back for <code><span class="ident">email</span></code>&#8217;s assignment.</p>


	<p>Here&#8217;s a question: what if the <code><span class="keyword">if</span></code> fails?  What if <code><span class="ident">at_hotel</span></code> is false in the above example? Is anything returned?  Nothing is assigned to <code><span class="ident">email</span></code>, right?</p>


	<p>Yes, nothing is returned.  By which I mean: <code><span class="constant">nil</span></code> is returned.  And often <code><span class="constant">nil</span></code> is a very useful answer.</p>


<div class='example'><pre><code> <span class="ident">print</span><span class="punct">(</span> <span class="keyword">if</span> <span class="ident">at_hotel</span><span class="punct">.</span><span class="ident">nil?</span>
          <span class="punct">&quot;</span><span class="string">No clue if he's in the hotel.</span><span class="punct">&quot;</span> 
        <span class="keyword">elsif</span> <span class="ident">at_hotel</span>  <span class="constant">true</span>
          <span class="punct">&quot;</span><span class="string">Definitely in.</span><span class="punct">&quot;</span> 
        <span class="keyword">elsif</span> <span class="ident">at_hotel</span>  <span class="constant">false</span>
          <span class="punct">&amp;</span><span class="comment">#8220;He&amp;#8217;s out.&amp;#8221; </span>
        <span class="keyword">else</span>
          <span class="punct">&amp;</span><span class="comment">#8220;The system is on the freee-itz.&amp;#8221; </span>
        <span class="keyword">end</span> <span class="punct">)</span></code></pre></div>
	<p>You can use the <code><span class="ident">nil?</span></code> method on any value in Ruby.  Again, think of it as a message. To the value: &#8220;Are you nil?  Are you empty?&#8221;</p>


	<p>If <code><span class="ident">at_hotel</span></code> is empty, Ruby doesn&#8217;t have any idea if I&#8217;m in the hotel or not.  So <code><span class="keyword">if</span></code> answers with the &#8220;No clue&#8221; string.  In order to handle the <code><span class="constant">true</span></code> or <code><span class="constant">false</span></code> possibilities, the <code><span class="keyword">elsif</span></code> keyword is used.  While you can have only one <code><span class="keyword">if</span></code> and one <code><span class="keyword">else</span></code>, you can fill the inbetween with an exorbitant number of <code><span class="keyword">elsif</span></code> keywords.  Each <code><span class="keyword">elsif</span></code> acts as <strong>a further <code><span class="keyword">if</span></code> test</strong>.  Checking for a positive charge.</p>


	<p>If you&#8217;re doing okay at this point, then you&#8217;re in tip-top shape for the rest of the book.  You have seen some pretty tough code in the last few examples.  You strong fellow.</p>

    
    
        
        <a name="section3" />
        <h2>3. Chaining Delusions Together</h2>

        <p><img src="i/the.elf-6.jpg" title="55,000 starmonkeys and one spirited Olympic hopeful." alt="55,000 starmonkeys and one spirited Olympic hopeful." /></p>


	<p>You finish reading the above comic and retire to your daybed for reflection. It&#8217;s one of those canopy affairs which is always logjammed with pillows.  You sit atop the pile, gazing out upon the world.  You see the tall smokestacks belching wide spools of fume and haze.  The tangled concourses of freeways smattered with swift, shimmering traffic is but a gently pulsing eye muscle from your vantage point.</p>


	<p>It is all so fantastic.  How the colors of the horizon spread across the landscape as a great mix of butter and grease with a tablespoon of vanilla extract.</p>


	<p>Yet, for all of the beauty which beckons for your attention, the images of the Elf and  his Olympic Hopeful return.  And more especially, that order for <strong>55,000</strong> starmonkeys.   <em>55,000 starmonkeys</em>, you think.  <em>Fifty-five Thousand</em>.</p>


	<p>You think of just the number itself.  <em>55,000</em>.  It&#8217;s walking down a road.  It might be in a forest, you don&#8217;t know for sure as your eyes are fixed right on the number itself.  It&#8217;s stopping and talking to people.  To tennis players, to a men&#8217;s choral group.  There is merriment and good  feeling.  When it laughs, its lower zeros quiver with glee.</p>


	<p>You want to talk to it.  You want to skip along that forest trail with it.  You want to climb aboard a jet bound to Brazil with it.  And after five days and four nights at the leisureful Costa do Sauipe Marriott Resort &#38; Spa, to marry it, to bear a family of 55,000 starmonkeys with it. To take possession of Nigeria with it.</p>


	<p>With a flying leap, you dismount your pillow tower of isolation.  Scrambling with the key, you unlock your roll top desk and pull out a sheet of paper, holding it firmly upon the desk.  You begin scribbling.</p>


	<blockquote>
		<p><em>Take possession of Nigeria with my new 55,000 starmonkeys</em>... </p>
	</blockquote>
<em>Over it, build Nigeria-sized <strong>vegetarians only</strong> casino and go-cart arena</em>...
<em>Wings&#8230; we could have our own special sauce on the wings that&#8217;s different</em>...
<em>Mustard + codeine = Smotchkkiss&#8217; Starry Starmonkey Glow Sauce</em>...
<em>Franchise, franchise&#8230; logos</em>... 
<em>Employee instructional videos</em>... 
<em>When you give the customer change, let them reach inside the frog on your hand to get it</em>...  
<em>If they have no change, at least put their reciept some place where they have to touch the frog</em>...  
<em>We&#8217;re leveling the playing field here</em>...
<em>Advertise cheap pizza, let&#8217;s make our money off soda</em>...
<em>Collect all 4 frosted glasses</em>...

	<p>Wow, the ideas are really coming out.  You literally had to smack yourself to stop.  We need to put these in a safe place.  Actually, we should store them on your computer and mangle the words.  You look out the window and watch for <span class="caps">FBI</span>.  I&#8217;m going to start this script.</p>


	<h3>The Flipping Script</h3>

<div class='example'><pre><code> <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Type and be diabolical: </span><span class="punct">&quot;</span> 
 <span class="ident">idea_backwards</span> <span class="punct">=</span> <span class="ident">gets</span><span class="punct">.</span><span class="ident">reverse</span></code></pre></div>
	<p>Let this script be your confidante.  It will ask for evil plans and turn their letters backwards. The <code><span class="ident">gets</span></code> method is <strong>built into Ruby</strong>.  It&#8217;s a <strong>kernel method</strong> like <code><span class="ident">print</span></code>.  This method <code><span class="ident">gets</span></code> will pause Ruby to let you type.  When you hit <em>Enter</em>, <code><span class="ident">gets</span></code> will then stop paying attention to your keyboard punchings and answer back to Ruby with a string that contains everything you typed.</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Get Ahead with The Tiger&#8217;s Vest</h2>
        

        <p><a href="expansion-pak-1.html"><img src="i/ad-tiger.gif" alt="" /></a></p>


	<p>Want to start using Ruby alongside your reading?  Split your attention and head off to <a href="expansion-pak-1.html">Expansion Pak I: The Tiger&#8217;s Vest</a>, a trite mini-chapter which will aid you in installing Ruby.  In addition, you&#8217;ll learn how to use Irb and Ri, two teaching aids that come with Ruby which will really speed you up in your learning.</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>The <code><span class="ident">reverse</span></code> method is then used on the string that <code><span class="ident">gets</span></code> is giving back.  The <code><span class="ident">reverse</span></code> method is part of the <code><span class="constant">String</span></code> class.  Which means that <strong>anything which is a string has the <code><span class="ident">reverse</span></code> method available</strong>.  More on classes in the next chapter, for now just know that <strong>a lot of methods are only available with certain types of values</strong>.</p>


	<p>I don&#8217;t think <code><span class="ident">reverse</span></code> is going to cut it.  The authorities only need to put a mirror to &#8220;airegiN fo noissessop ekaT.&#8221;  Bust us when starmonkeys start to touch down in Lagos.</p>


	<p>The capital letters give it away.  Maybe if we uppercase all letters in the string before we reverse it.</p>


<div class='example'><pre><code> <span class="ident">idea_backwards</span> <span class="punct">=</span> <span class="ident">gets</span><span class="punct">.</span><span class="ident">upcase</span><span class="punct">.</span><span class="ident">reverse</span></code></pre></div>
	<h3>Your Repetitiveness Pays Off</h3>

	<p>You hand me a legal pad, doused in illegible shorthand.  Scanning over it, I start to notice patterns.  That you seem to use the same set of words repeatedly in your musings.   Words like <em>starmonkey</em>, <em>Nigeria</em>, <em>firebomb</em>.  Some phrases even.  <em>Put the kabosh on.</em> That gets said a lot.</p>


	<p>Let us disguise these foul terms, my brother.  Let us obscure them from itching eyes that cry to know our delicate schemes and to thwart us from having great pleasure and many go-carts. We will replace them with the most innocent language.  New words with secret meaning.</p>


	<p>I start up a word list, a Ruby <code><span class="constant">Hash</span></code>, which contains these oft seen and dangerous words of yours. In the Hash, each dangerous word is matched up against a code word (or phrase).  The code word will be swapped in for the real word.</p>


<div class='example'><pre><code> <span class="ident">code_words</span> <span class="punct">=</span> <span class="punct">{</span>
   <span class="punct">'</span><span class="string">starmonkeys</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">Phil and Pete, those prickly chancellors of the New Reich</span><span class="punct">',</span> 
   <span class="punct">'</span><span class="string">catapult</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">chucky go-go</span><span class="punct">',</span> <span class="punct">'</span><span class="string">firebomb</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">Heat-Assisted Living</span><span class="punct">',</span> 
   <span class="punct">'</span><span class="string">Nigeria</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Ny and Jerry's Dry Cleaning (with Donuts)</span><span class="punct">&quot;,</span>
   <span class="punct">'</span><span class="string">Put the kabosh on</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">Put the cable box on</span><span class="punct">'</span>
 <span class="punct">}</span></code></pre></div>
	<p>The words which are placed before the arrow are called <strong>keys</strong>.  The words after the arrows, the definitions, are often just called <strong>values</strong>.</p>


	<p>Notice the double quotes around <code><span class="constant">Ny</span> <span class="keyword">and</span> <span class="constant">Jerry</span><span class="punct">'</span><span class="string">s Dry Cleaning (with Donuts)</span></code>.  Since a single quote is being used an apostrophe, we can&#8217;t use single quotes around the string.  (Although, you can use single quotes if you put a backslash before the apostrophe such as: <code><span class="punct">'</span><span class="string">Ny and Jerry<span class="escape">\'</span>s Dry Cleaning (with Donuts)</span><span class="punct">'</span></code>.)</p>


	<p>Should you need to look up a specific word, you can do so by using the <strong>square brackets</strong> method.</p>


	<blockquote>
		<p><code><span class="ident">code_words</span><span class="punct">['</span><span class="string">catapult</span><span class="punct">']</span></code> will answer with the string <code><span class="punct">'</span><span class="string">chucky go-go</span><span class="punct">'</span></code>.</p>
	</blockquote>

	<p>Look at the square brackets as if they are a wooden pallet the word is sitting upon. A forklift could slide its prongs into each side of the pallet and bring it down from a shelf back in the warehouse.  The word on the pallet is called the <em>index</em>. We are asking the forklift to find the index for us and bring back its corresponding value.</p>


	<p>If you&#8217;ve never been to a warehouse, you could also look at the brackets as handles. Imagine an industrious worker putting on his work gloves and hefting the index back to your custody.  If you&#8217;ve never used handles before, then I&#8217;m giving you about thirty seconds to find a handle and use it before I blow my lid.</p>


	<p>As with many of the other operators you&#8217;ve seen recently, the index brackets are simply a shortcut for a method.</p>


	<blockquote>
		<p><code><span class="ident">code_words</span><span class="punct">.[](</span> <span class="punct">'</span><span class="string">catapult</span><span class="punct">'</span> <span class="punct">)</span></code> will answer with the string <code><span class="punct">'</span><span class="string">chucky go-go</span><span class="punct">'</span></code>.</p>
	</blockquote>

	<h3>Making the Swap</h3>

	<p>I went ahead and saved the Hash of code words to a file called <strong>wordlist.rb</strong>.</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">wordlist</span><span class="punct">'</span>

 <span class="comment"># Get evil idea and swap in code words</span>
 <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Enter your new idea: </span><span class="punct">&quot;</span> 
 <span class="ident">idea</span> <span class="punct">=</span> <span class="ident">gets</span>
 <span class="ident">code_words</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">real</span><span class="punct">,</span> <span class="ident">code</span><span class="punct">|</span> 
   <span class="ident">idea</span><span class="punct">.</span><span class="ident">gsub!</span><span class="punct">(</span> <span class="ident">real</span><span class="punct">,</span> <span class="ident">code</span> <span class="punct">)</span>
 <span class="keyword">end</span>

 <span class="comment"># Save the jibberish to a new file</span>
 <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">File encoded.  Please enter a name for this idea: </span><span class="punct">&quot;</span> 
 <span class="ident">idea_name</span> <span class="punct">=</span> <span class="ident">gets</span><span class="punct">.</span><span class="ident">strip</span>
 <span class="constant">File</span><span class="punct">::</span><span class="ident">open</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">idea-</span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">idea_name</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string">.txt</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">w</span><span class="punct">&quot;</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">f</span><span class="punct">|</span>
   <span class="ident">f</span> <span class="punct">&lt;&lt;</span> <span class="ident">idea</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Script starts by pulling in our word list.  Like <code><span class="ident">gets</span></code> and <code><span class="ident">print</span></code>, the <code><span class="ident">require</span></code> method is a kernel method, you can use it anywhere.  I give it the string <code><span class="punct">'</span><span class="string">wordlist</span><span class="punct">'</span></code> and it will look for a file named <strong>wordlist.rb</strong>.</p>


	<p>After that, there are two sections.  I am marking these sections with comments, the lines that start with <strong>pound</strong> symbols.  Comments are <strong>useful notes</strong> that accompany your code.  Folks who come wandering through your code will appreciate the help.  When going through your own code after some time has passed, comments will help you get back into your mindset.  And there&#8217;s software out there that can take your comments and build documents from them.  (RDoc and Ri&#8212;see Expansion Pak #1!)</p>


	<p>I like comments because I can skim a big pile of code and spot the highlights.</p>


	<p>As the comments tell us, the first section asks you for your evil idea and swaps in the new code words.  The second section saves the encoded idea into a new text file.</p>


<div class='example'><pre><code> <span class="ident">code_words</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">real</span><span class="punct">,</span> <span class="ident">code</span><span class="punct">|</span> 
   <span class="ident">idea</span><span class="punct">.</span><span class="ident">gsub!</span><span class="punct">(</span> <span class="ident">real</span><span class="punct">,</span> <span class="ident">code</span> <span class="punct">)</span>
 <span class="keyword">end</span></code></pre></div>
	<p>You see the <code><span class="ident">each</span></code> method?  The <code><span class="ident">each</span></code> method is all over in Ruby.   It&#8217;s available for Arrays, Hashes, even Strings.   Here, our <code><span class="ident">code_words</span></code> dictionary is kept in a Hash.  This <code><span class="ident">each</span></code> method will hurry through <strong>all the pairs of the Hash</strong>, one dangerous word matched with its code word, handing each pair to the <code><span class="ident">gsub!</span></code> method for the actual replacement.</p>


	<p>In Ruby, <code><span class="ident">gsub</span></code> is short for <em>global substitution</em>.  The method is used to search and replace. Here, we want to find all the occurences of a dangerous word and replace with its safe code word.  With <code><span class="ident">gsub</span></code>, you provide the <strong>word to find as the first argument</strong>, then the <strong>word to put in its place as the second argument</strong>.</p>


	<p>Why aren&#8217;t we hanging on to the answer from <code><span class="ident">gsub</span></code>?  Doesn&#8217;t <code><span class="ident">gsub</span></code> give us an answer back that we should keep?  You&#8217;d think the line would read:</p>


<div class='example'><pre><code> <span class="ident">safe_idea</span> <span class="punct">=</span> <span class="ident">idea</span><span class="punct">.</span><span class="ident">gsub</span><span class="punct">(</span> <span class="ident">real</span><span class="punct">,</span> <span class="ident">code</span> <span class="punct">)</span></code></pre></div>
	<p>Yes, with <code><span class="ident">gsub</span></code> we&#8217;d need to hang on to its answer.  We&#8217;re using a variation of <code><span class="ident">gsub</span></code> that is totally hyper.  Notice the <strong>exclamation mark</strong> on the <code><span class="ident">gsub!</span></code> used inside the <code><span class="ident">each</span></code> block.  The exclamation mark is a sign that <code><span class="ident">gsub!</span></code> is a bit of a zealot.  See, <code><span class="ident">gsub!</span></code> will go ahead and <strong>replace the words in <code><span class="ident">idea</span></code> directly</strong>.  When it&#8217;s done <code><span class="ident">idea</span></code> will contain the newly altered string and you won&#8217;t be able to find the old string.</p>


	<p>Call <code><span class="ident">gsub!</span></code> a <strong>destructive method</strong>.  It makes its changes to the value directly.  Whereas <code><span class="ident">gsub</span></code> will leave the value intact, answering back with a new string which contains the alterations. (Why must <code><span class="ident">gsub!</span></code> scream when he descends upon his prey?  Merciless assailant!)</p>


	<h3> Text Files of a Madman</h3>

	<p>Let us now save the encoded idea to a file.</p>


<div class='example'><pre><code> <span class="comment"># Save the jibberish to a new file</span>
 <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">File encoded.  Please enter a name for this idea: </span><span class="punct">&quot;</span> 
 <span class="ident">idea_name</span> <span class="punct">=</span> <span class="ident">gets</span><span class="punct">.</span><span class="ident">strip</span>
 <span class="constant">File</span><span class="punct">::</span><span class="ident">open</span><span class="punct">(</span> <span class="punct">'</span><span class="string">idea-</span><span class="punct">'</span> <span class="punct">+</span> <span class="ident">idea_name</span> <span class="punct">+</span> <span class="punct">'</span><span class="string">.txt</span><span class="punct">',</span> <span class="punct">'</span><span class="string">w</span><span class="punct">'</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">f</span><span class="punct">|</span>
   <span class="ident">f</span> <span class="punct">&lt;&lt;</span> <span class="ident">idea</span>
 <span class="keyword">end</span></code></pre></div>
	<p>This section starts by asking you for a name by which the idea can be called.  This name is used to build a file name when we save the idea.</p>


	<p>The <code><span class="ident">strip</span></code> method is for strings.  This method <strong>trims spaces and blank lines</strong> from the <strong>beginning and end</strong> of the string.  This will remove the <em>Enter</em> at the end of the string you typed. But it&#8217;ll also handle spaces if you accidentally left any.</p>


	<p>After we have the idea&#8217;s name, we open a new, blank text file.  The file name is built by adding strings together.  If you typed in <code><span class="punct">'</span><span class="string">mustard-plus-codeine</span><span class="punct">'</span></code>, then our math will be: <code><span class="punct">'</span><span class="string">idea-</span><span class="punct">'</span> <span class="punct">+</span> <span class="punct">'</span><span class="string">mustard-plus-codeine</span><span class="punct">'</span> <span class="punct">+</span> <span class="punct">'</span><span class="string">.txt</span><span class="punct">'</span></code>.  Ruby presses these into a single string. <code><span class="punct">'</span><span class="string">idea-mustard-plus-codeine.txt</span><span class="punct">'</span></code> is the file.</p>


	<p>We&#8217;re using the class method <code><span class="constant">File</span><span class="punct">::</span><span class="ident">open</span></code> to create the new file.  Up until now, we&#8217;ve used several kernel methods to do our work.  We hand the <code><span class="ident">print</span></code> method a string and it prints the string on your screen.  One secret about kernel methods like <code><span class="ident">print</span></code>: they are actually <strong>class methods</strong>.</p>


	<blockquote>
		<p><code><span class="constant">Kernel</span><span class="punct">::</span><span class="ident">print</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">55,000 Starmonkey Salute!</span><span class="punct">&quot;</span> <span class="punct">)</span></code></p>
	</blockquote>

	<p>What does this mean?  Why does it matter?  It means <code><span class="constant">Kernel</span></code> is the center of Ruby&#8217;s universe. Wherever you are in your script, <code><span class="constant">Kernel</span></code> is right beside you.  You don&#8217;t even need to spell <code><span class="constant">Kernel</span></code> out for Ruby.  Ruby knows to check <code><span class="constant">Kernel</span></code>.</p>


	<p>Most methods are more specialized than <code><span class="ident">print</span></code> or <code><span class="ident">gets</span></code>.  Take the <code><span class="constant">File</span><span class="punct">::</span><span class="ident">open</span></code> for example.  The creator of Ruby, Matz, has given us many different methods which which read, rename, or delete files.  They are all organized inside the <code><span class="constant">File</span></code> class.</p>


	<blockquote>
		<p><code><span class="constant">File</span><span class="punct">::</span><span class="ident">read</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">idea-mustard-plus-codeine.txt</span><span class="punct">&quot;</span> <span class="punct">)</span></code> will answer back with a string containing all of the text from your idea file.</p>
	</blockquote>

	<blockquote>
		<p><code><span class="constant">File</span><span class="punct">::</span><span class="ident">rename</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">old_file.txt</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">new_file.txt</span><span class="punct">&quot;</span> <span class="punct">)</span></code> will rename <code><span class="ident">old_file</span><span class="punct">.</span><span class="ident">txt</span></code>.</p>
	</blockquote>

	<blockquote>
		<p><code><span class="constant">File</span><span class="punct">::</span><span class="ident">delete</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">new_file.txt</span><span class="punct">&quot;</span> <span class="punct">)</span></code> will nuke the new file.</p>
	</blockquote>

	<p>These File methods are all <strong>built right into Ruby</strong>.  They are all just stored in a container called the <code><span class="constant">File</span></code> class.  So, while you can safely call kernel methods without needing to type <code><span class="constant">Kernel</span></code>, Ruby doesn&#8217;t automatically check the <code><span class="constant">File</span></code> class. You&#8217;ll need to give the full method name.</p>


<div class='example'><pre><code> <span class="constant">File</span><span class="punct">::</span><span class="ident">open</span><span class="punct">(</span> <span class="punct">'</span><span class="string">idea-</span><span class="punct">'</span> <span class="punct">+</span> <span class="ident">idea_name</span> <span class="punct">+</span> <span class="punct">'</span><span class="string">.txt</span><span class="punct">',</span> <span class="punct">'</span><span class="string">w</span><span class="punct">'</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">f</span><span class="punct">|</span>
   <span class="ident">f</span> <span class="punct">&lt;&lt;</span> <span class="ident">idea</span>
 <span class="keyword">end</span></code></pre></div>
	<p>We pass two arguments into <code><span class="constant">File</span><span class="punct">::</span><span class="ident">open</span></code>.  The first is the <strong>file name to open</strong>.  The second is a string containing our <strong>file mode</strong>.  We use <code><span class="punct">'</span><span class="string">w</span><span class="punct">'</span></code>, which means to write to a brand-new file.  (Other options are: <code><span class="punct">'</span><span class="string">r</span><span class="punct">'</span></code> to read from the file or <code><span class="punct">'</span><span class="string">a</span><span class="punct">'</span></code> to add to the end of the file.)</p>


	<p>The file is opened for writing and we are handed back the file in variable <code><span class="ident">f</span></code>, which can be seen <strong>sliding down the chute into our block</strong>.  Inside the block, we write to the file.  When the block closes with <code><span class="keyword">end</span></code>, our file is closed as well.</p>


	<p>Notice we use the <strong>concatenator</strong> <code><span class="punct">&lt;&lt;</span></code> to write to the file.  We can do this because files have a method called <code><span class="punct">&lt;&lt;</span></code> just like strings do.</p>


	<h3>Settle Down, Your Ideas Aren&#8217;t Trapped</h3>

	<p>Here, let&#8217;s get your ideas back to their original verbage, so you can rumminate over their brilliance.</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">wordlist</span><span class="punct">'</span>

 <span class="comment"># Print each idea out with the words fixed</span>
 <span class="constant">Dir</span><span class="punct">['</span><span class="string">idea-*.txt</span><span class="punct">'].</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">file_name</span><span class="punct">|</span>
   <span class="ident">idea</span> <span class="punct">=</span> <span class="constant">File</span><span class="punct">.</span><span class="ident">read</span><span class="punct">(</span> <span class="ident">file_name</span> <span class="punct">)</span>
   <span class="ident">code_words</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">real</span><span class="punct">,</span> <span class="ident">code</span><span class="punct">|</span> 
     <span class="ident">idea</span><span class="punct">.</span><span class="ident">gsub!</span><span class="punct">(</span> <span class="ident">code</span><span class="punct">,</span> <span class="ident">real</span> <span class="punct">)</span>
   <span class="keyword">end</span>
   <span class="ident">puts</span> <span class="ident">idea</span>
 <span class="keyword">end</span></code></pre></div>
	<p>By now, you should be up to snuff with most of this example.  I won&#8217;t bore you with all of the mundane details.  See if you can figure out how it works on your own.</p>


	<p>We have an interesting class method here, though.  The <code><span class="constant">Dir</span><span class="punct">::[]</span></code> method searches a directory (some of you may call them &#8220;folders&#8221;).  Just as you&#8217;ve seen with Hashes, the index brackets can be class methods.  (Can you start to see the shiny, glinting gorgeousness of Ruby?)</p>


	<p>So we&#8217;re using the forklift to get those files in the directory which match <code><span class="punct">'</span><span class="string">idea-*.txt</span><span class="punct">'</span></code>.  The <code><span class="constant">Dir</span><span class="punct">::[]</span></code> method will use the asterisk as a wildcard.  We&#8217;re basically saying, &#8220;Match anything that starts with <em>idea-</em> and ends with <em>.txt</em>.&#8221;  The forklift shuffles off to the directory and comes back with a list of all matching files.</p>


	<p>That <strong>list of files</strong> will come in the form of <code><span class="constant">Array</span></code> the Caterpillar, with a <code><span class="constant">String</span></code> for each  file.  If you are curious and want to play with with <code><span class="constant">Dir</span><span class="punct">::[]</span></code>, try this:</p>


	<blockquote>
		<p><code><span class="ident">p</span> <span class="constant">Dir</span><span class="punct">['</span><span class="string">idea-*.txt</span><span class="punct">']</span></code> will print:</p>
	</blockquote>

	<blockquote>
		<p><code><span class="punct">['</span><span class="string">idea-mustard-plus-codeine.txt</span><span class="punct">']</span></code> (<em>an Array of file names!</em>)</p>
	</blockquote>

	<p>Yes, the <code><span class="ident">p</span></code> method works like <code><span class="ident">print</span></code>.  But where <code><span class="ident">print</span></code> is designed for displaying strings, <code><span class="ident">p</span></code> will print <em>anything</em>.  Check this out.</p>


	<blockquote>
		<p><code><span class="ident">p</span> <span class="constant">File</span><span class="punct">::</span><span class="ident">methods</span></code> will print:</p>
	</blockquote>

	<blockquote>
		<p><code><span class="punct">[&quot;</span><span class="string">send</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">display</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">name</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">exist?</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">split</span><span class="punct">&quot;,</span></code> ... <em>a whole list of method names!</em> <code><span class="punct">]</span></code></p>
	</blockquote>

    
    
        
        <a name="section4" />
        <h2>4. The Miracle of Blocks</h2>

        <p><img src="i/blix-2.gif" title="Flowerboyz?  Heard it before." alt="Flowerboyz?  Heard it before." /></p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Excerpt from The Scarf Eaters</h2>
        

        <p>(<em>from Chapter V: A Man in Uniform</em>.)</p>


	<p>In April, the callow lilies came back.  They stretched their baby angel wings out and reached for the world.  Gently, their tendrils caressed the sullen fence posts until even they lilted lovelier.</p>


	<p>From her bedroom window, Lara watched the lilies exude their staunch femininity. She slipped the tassels of a fresh, carpathian, embroidered scarf into her mouth and  ate slowly. The long cloth slid down her throat and tickled as it snaked along her esophagus.  She giggled and burped.</p>


	<p>Oh, how the flora drew her in.  Looking at flowers went so well with being a teenage girl.  She wanted to paint them, so she opened a new Flash template.  A blank movie this time.</p>


	<p>She set her cursor loose in the garden of her movie&#8217;s viewable area.  Vector white lines below shorter vector yellow lines.  She selected the white lines and grouped them together. She even moved them to a new layer entitled &#8220;Cry, Baby Angel, Cry.&#8221;  Then she converted them into a graphic object and moved them to the library.</p>


	<p>She felt a warm chill as she moved the long, white petals to her movie&#8217;s library.  It felt so official.  <em>I choose you.  I name you.  Dwell in the comfort of my palace forevermore.</em></p>


	<p>Heh.  She laughed.  Colorado Springs was hardly a &#8220;palace.&#8221;</p>


	<p>Since they had moved, Dad had only been home once.  He had barged through the front door in full uniform and had given quite a start to both Lara and her mother.  Her mother had even dropped a head of lettuce <del>- which head she had just finished washing &#8211; </del> in a pitcher of Lick-M-Aid.</p>


	<p>The pitcher was just wide enough for the lettuce and it lodged in there pretty good. Dad came over and yanked at the moist head for sometime until declaring it <span class="caps">FUBAR</span>, in a voice both bemused and then crestfallen.  He tossed the clotted spout in the trash bin.</p>


	<p>It was only later that day that Lara&#8217;s mother realized that she could have simply halved the lettuce with an electric knife.  Dad laughed and slapped his forehead.  He then went around and slapped Lara&#8217;s forehead, and her mother&#8217;s too, affectionately.</p>


	<p>&#8220;We just weren&#8217;t thinking, were we?&#8221; is what he said.  &#8220;And who dares blame us?  We&#8217;re a real family today.  And we shouldn&#8217;t have to do anything else on the day we got our family back.&#8221;</p>


	<p>Lara&#8217;s smiled reflected across the glass of her monitor.  She chose the text tool and in 42 point serif typed: &#8220;Dad.&#8221;  She created a path for it and let it tween off the right side of the screen.  She cried long after it was gone.</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Since you and I are becoming closer friends as we share this time together, I should probably let you in on a bit of the history going on here.  It&#8217;s a good time for a break I say.</p>


	<p>First, you should know that Blix is my cat.  My second pet to Bigelow. Granted, we hardly see each other anymore.  He&#8217;s completely self-sufficient. I&#8217;m not exactly sure where he&#8217;s living these days, but he no longer lives in the antechamber to my quarters.  He emptied his savings account about seven months ago.</p>


	<p>He does have a set of keys for the house and the Seville.  Should he ever find himself stranded, I will gladly step away from our differences and entertain his antics around the house again.</p>


	<p>Make no mistake.  I miss having him around.  Can&#8217;t imagine he misses my company, but I miss his.</p>


	<h3>A Siren and A Prayer</h3>

	<p>I first saw Blix on television when I was a boy.  He had a starring role on a very gritty police drama called <em>A Siren and A Prayer</em>.  The show was about a god-fearing police squad that did their jobs, did them well, and saw their share of miracles out on the beat.  I mean the officers on this show were <em>great</em> guys, very religious, practically clergy.  But,  you know, even clergymen don&#8217;t have the good sense to kill a guy after he&#8217;s gone too far. These guys knew where to draw that line.  They walked that line every day.</p>


	<p>So, it was a pretty bloody show, but they always had a good moral at the end.  Most times the moral was something along the lines of, &#8220;Wow, we got out of that one quick.&#8221;  But there&#8217;s serious camaraderie in a statement like that.</p>


	<p>The show basically revolved around this one officer.  &#8220;Mad&#8221; Dick Robinson.  People called him Mad because he was basically insane.  I can&#8217;t remember if he was actually clinically insane, but people were always questioning his decisions.  Mad often blew his top and chewed out some of the other officers, most of whom had unquestionable moral character.  But we all know it&#8217;s a tough world, the stakes are high out there, and everyone who watched the show held Mad in great regard.  I think everyone on the squad grew quite a bit as people, thanks to Mad&#8217;s passion.</p>


	<p>The officers couldn&#8217;t do it all themselves though.  In every single episode, they plead with a greater force for assistance.  And, in every single episode, they got their tips from a cat named Terry (played by my cat Blix.)  He was just a kitten at the time and, as a young boy tuning into <em>A Siren and A Prayer</em>, I found myself longing for my own crime-sniffing cat. Terry took these guys down the subway tunnels, through the rotting stench of abandoned marinas, into backdoors of tall, industrial smokestacks.</p>


	<p>Sometimes he was all over an episode, darting in and out, preparing traps and directing traffic. But other times you wouldn&#8217;t see him the whole episode.  Then you&#8217;d rewind through the whole show and look and look and look.  You&#8217;d give up.  He can&#8217;t be in that episode.</p>


	<p>Still, you can&#8217;t bear to let it go, so you go comb through the whole episode with the jog on your remote, combing, pouring over each scene.  And there he is.  Way up behind the floodlight that was turned up too high.  The one that left Mad with permanent eye damage.  Why?  Why burn out the retinas of your own colleague, Terry?</p>


	<p>But the question never got answered because the series was cancelled.  They started to do special effects with the cat and it all fell apart.  In the last episode of the show, there is a moment where Terry is trapped at the top of a crane, about to fall into the searing slag in the furnace of an iron smelt.  He looks back.  No going back.  He looks down.  Paws over eyes (<em>no joke!</em>), he leaps from the crane and, mid-flight, snags a rope and swings to safety, coming down on a soft antelope hide that one of the workers had presumably been tanning that afternoon.</p>


	<p>People switched off the television set the very moment the scene aired.  They tried changing the name. First it was <em>God Gave Us a Squad</em>.  <em>Kiss of Pain</em>.  Then, <em>Kiss of Pain in Maine</em>, since the entire precinct ended up relocating there.  But the magic was gone.  I went back to summer school that year to make up some classes and all the kids had pretty much moved on to football pencils.</p>


	<h3>Blocks</h3>

	<p>A couple years ago, I started teaching Blix about Ruby.  When we got to this part in his lessons, the part that covers blocks, he said to me, &#8220;Blocks remind me of Mad Dick Robinson.&#8221;</p>


	<p>&#8220;Oh?&#8221;  I hadn&#8217;t heard that name in awhile.  &#8220;I can&#8217;t see how that could be.&#8221;</p>


	<p>&#8220;Well, you say blocks can be difficult to understand.&#8221;</p>


	<p>&#8220;They&#8217;re not difficult,&#8221; I said.  &#8220;A <strong>block</strong> is just <strong>code that&#8217;s grouped together</strong>.&#8221;</p>


	<p>&#8220;And Mad was just an officer, sworn to uphold his duty,&#8221; he said.  &#8220;But he was a real miracle to watch out in the field.  Now, this first example you&#8217;ve shown me&#8230;&#8221;  He pointed to an example I&#8217;d written down for him.</p>


<div class='example'><pre><code> <span class="ident">kitty_toys</span> <span class="punct">=</span>
   <span class="punct">[</span><span class="symbol">:shape</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">sock</span><span class="punct">',</span> <span class="symbol">:fabric</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">cashmere</span><span class="punct">']</span> <span class="punct">+</span>
   <span class="punct">[</span><span class="symbol">:shape</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">mouse</span><span class="punct">',</span> <span class="symbol">:fabric</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">calico</span><span class="punct">']</span> <span class="punct">+</span>
   <span class="punct">[</span><span class="symbol">:shape</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">eggroll</span><span class="punct">',</span> <span class="symbol">:fabric</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">chenille</span><span class="punct">']</span>
 <span class="ident">kitty_toys</span><span class="punct">.</span><span class="ident">sort_by</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">toy</span><span class="punct">|</span> <span class="ident">toy</span><span class="punct">[</span><span class="symbol">:fabric</span><span class="punct">]</span> <span class="punct">}</span></code></pre></div>
	<p>&#8220;This is a small miracle,&#8221; he said. &#8220;I can&#8217;t deny its beauty.  Look, there are my kitty toys, laid out with their characteristics.  Below them, the block, sorting them by fabric.&#8221;</p>


	<p>&#8220;I apologize if your list of toys looks a bit tricky,&#8221; I said.  Like you, he had learned about the Array, the caterpillar stapled into the code, with square brackets on each side and each item separated by commas.  (Ah, here is one: <code><span class="punct">['</span><span class="string">sock</span><span class="punct">',</span> <span class="punct">'</span><span class="string">mouse</span><span class="punct">',</span> <span class="punct">'</span><span class="string">eggroll</span><span class="punct">']</span></code>.)  He had also been taught the Hash, which is like a dictionary, with curly braces on each end which look like small, open books.  Commas in the Hash between each pair.  Each word in the dictionary matched up with its definition by an arrow.  (Be beholden: <code><span class="punct">{'</span><span class="string">blix</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">cat</span><span class="punct">',</span> <span class="punct">'</span><span class="string">why</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">human</span><span class="punct">'}</span></code>.)</p>


	<p>&#8220;Yes, vexing,&#8221; he said.  &#8220;It has square brackets like it&#8217;s an Array, but with the arrows like it&#8217;s a Hash. I don&#8217;t think you&#8217;re going to get away with that.&#8221;</p>


	<p>&#8220;It does seem a bit subversive, doesn&#8217;t it?&#8221;  I said, tease-nudging him with a spoon.  &#8220;I&#8217;ve done your kitty toy list in a mix of the two.  I&#8217;m using a shortcut.  Which is: <strong>If you use arrows inside of an Array,  you&#8217;ll end up with a Hash inside of that Array.</strong>&#8220;</p>


	<p>&#8220;Oh, I see,&#8221; he said.  &#8220;You criss-crossed &#8216;em.  How neat!&#8221;</p>


	<p>&#8220;Yes, yes, you&#8217;re on it,&#8221; I said.  He was also very good with a protractor.  &#8220;I have three Arrays, each with a Hash inside.  Notice the plus signs?  I&#8217;m adding them into one big Array.  Here&#8217;s another way of writing it&#8230;&#8221;  I jotted down.</p>


<div class='example'><pre><code> <span class="ident">kitty_toys</span> <span class="punct">=</span> <span class="punct">[</span>
   <span class="punct">{</span><span class="symbol">:shape</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">sock</span><span class="punct">',</span> <span class="symbol">:fabric</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">cashmere</span><span class="punct">'},</span>
   <span class="punct">{</span><span class="symbol">:shape</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">mouse</span><span class="punct">',</span> <span class="symbol">:fabric</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">calico</span><span class="punct">'},</span>
   <span class="punct">{</span><span class="symbol">:shape</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">eggroll</span><span class="punct">',</span> <span class="symbol">:fabric</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">chenille</span><span class="punct">'}</span>
 <span class="punct">]</span></code></pre></div>
	<p>One Array, which acts as our list of chew toys.  Three Hashes in the Array to describe each toy.</p>


	<h3>Sorting and Iterating to Save Lives</h3>

	<p>&#8220;Let&#8217;s sort your toys by shape now,&#8221; I said.  &#8220;Then, we&#8217;ll print them out in that order.&#8221;</p>


<div class='example'><pre><code> <span class="ident">kitty_toys</span><span class="punct">.</span><span class="ident">sort_by</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">toy</span><span class="punct">|</span> <span class="ident">toy</span><span class="punct">[</span><span class="symbol">:shape</span><span class="punct">]</span> <span class="punct">}.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">toy</span><span class="punct">|</span>
   <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">Blixy has a <span class="expr">#{ toy[:shape] }</span> made of <span class="expr">#{ toy[:fabric] }</span></span><span class="punct">&quot;</span> 
 <span class="keyword">end</span></code></pre></div>
	<p>&#8220;How does <code><span class="ident">sort_by</span></code> work?&#8221; asked Blix.  &#8220;I can tell it&#8217;s a method you can use with Arrays.  Because <code><span class="ident">kitty_toys</span></code> is an Array.  But what is <code><span class="ident">toy</span></code>?&#8221;</p>


	<p>&#8220;Okay, <code><span class="ident">toy</span></code> is a <strong>block argument</strong>,&#8221; I said.  &#8220;Remember: the skinny pipes on each side of <code><span class="ident">toy</span></code> make it a <strong>chute</strong>.&#8221;</p>


	<p>&#8220;Sure, but it looks like you&#8217;re using it like a Hash.  Inside the block you have <code><span class="ident">toy</span><span class="punct">[</span><span class="symbol">:shape</span><span class="punct">]</span></code>. That looks like a Hash.&#8221;</p>


	<p>&#8220;The <code><span class="ident">sort_by</span></code> method is an <strong>iterator</strong>, Blix.  It <strong>iterates</strong>, or <strong>cycles</strong>, through <strong>a list of things</strong>.  You remember that episode when Mad&#8230;&#8221;</p>


	<p>&#8220;Episode?&#8221; he said.  Yeah, he can&#8217;t understand the concept of TV dramas.   Yeah, I&#8217;ve tried explaining.</p>


	<p>&#8220;Or, yeah, remember that one <em>eyewitness account</em> we watched where Mad was trying to talk down that crazy spelling bee contestant from the ledge of an college library?&#8221;</p>


	<p>&#8220;I remember it better than you because I was riding in a remote control plane.&#8221;  Yep, it was one of those episodes.</p>


	<p>&#8220;Do you remember how Mad got the guy to come down?&#8221; I asked.</p>


	<p>&#8220;People in spelling bees love letters,&#8221; said Blix.  &#8220;So what Mad did was a genius move on his part. He started with the letter A and gave reasons, for all the letters of the alphabet, why the guy should walk back down the building and be safe on the ground.&#8221;</p>


	<p>&#8221;&#8217;A is for the Architecture of buildings like this,&#8217;&#8221; I said, in a gruff Mad voice. &#8221;&#8217;Which give us hope in a crumbling world.&#8217;&#8221;</p>


	<p>&#8221;&#8217;B is for Big Guys, like your friend Mad the Cop,&#8217;&#8221; said Blix.  &#8221;&#8217;Guys who help people all the time and don&#8217;t know how to spell too great, but still help guys who spell really great.&#8217;&#8221;</p>


	<p>&#8220;See, he went through all the letters, one at a time.  He was <em>iterating</em> through them.&#8221; <em>It Err Ate Ing.</em></p>


	<p>&#8220;But the guy jumped anyway, Why.  He jumped off on letter Q or something.&#8221;</p>


	<p>&#8221;&#8217;Q is for Quiet Moments that help us calm down and think about all of life&#8217;s little pleasures, so we don&#8217;t get all uptight and starting goofing around on tiptoes at the very edge of a big, bad building.&#8217;&#8221;</p>


	<p>&#8220;And then he jumped,&#8221; said Blix.  He shook his head.  &#8220;You can&#8217;t blame Mad.  He did his best.&#8221;</p>


	<p>&#8220;He had a big heart, that&#8217;s for sure,&#8221; I said, patting Blix on the shoulder.</p>


<div class='example'><pre><code> <span class="ident">kitty_toys</span><span class="punct">.</span><span class="ident">sort_by</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">toy</span><span class="punct">|</span> <span class="ident">toy</span><span class="punct">[</span><span class="symbol">:shape</span><span class="punct">]</span> <span class="punct">}.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">toy</span><span class="punct">|</span>
   <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">Blixy has a <span class="expr">#{ toy[:shape] }</span> made of <span class="expr">#{ toy[:fabric] }</span></span><span class="punct">&quot;</span> 
 <span class="keyword">end</span></code></pre></div>
	<p>&#8220;As for your <code><span class="ident">sort_by</span></code>, it <strong>starts at the top</strong> of the list and <strong>goes through each item</strong>, one at a time. So <code><span class="ident">toy</span></code> is one of those items.  With each item, <code><span class="ident">sort_by</span></code> stops and <strong>slides that item down the chute</strong>, under the <code><span class="ident">toy</span></code> name, and let&#8217;s you figure out what to do with it.&#8221;</p>


	<p>&#8220;Okay, so <code><span class="ident">toy</span></code> takes turns being each of the different toys I have.&#8221;</p>


	<p>&#8220;That&#8217;s right,&#8221; I said.  &#8220;You know how I&#8217;ve really been harping on <em>using the answers that methods give you</em>?  Here, we&#8217;re simply looking up the toy&#8217;s shape inside the block.  The block then answers to <code><span class="ident">sort_by</span></code> with the shape string, such as <code><span class="punct">&quot;</span><span class="string">mouse</span><span class="punct">&quot;</span></code> or <code><span class="punct">&quot;</span><span class="string">sock</span><span class="punct">&quot;</span></code>.  Once it&#8217;s done cycling through the whole list, <code><span class="ident">sort_by</span></code> will have alphabetically compared each of the shape strings and will give back a new sorted Array.&#8221;</p>


	<h3> An Unfinished Lesson</h3>

	<p>&#8220;That&#8217;s good enough for today,&#8221; said Blix.  &#8220;Can I have a fresh saucer of milk, please?&#8221;</p>


	<p>I filled his saucer to the brim and he guzzled from it for some time while I took a poker and jabbed at coals in the fireplace.  My mind wandered and I couldn&#8217;t help but think further of blocks.  I wondered what I would teach Blix next.</p>


	<p>I probably would have taught him about <code><span class="keyword">next</span></code>.  When you are iterating through a list, you may use <code><span class="keyword">next</span></code> to <strong>skip on to the next item</strong>.  Here we&#8217;re counting toys that have a non-eggroll shape by skipping those that do with <code><span class="keyword">next</span></code>.</p>


<div class='example'><pre><code> <span class="ident">non_eggroll</span> <span class="punct">=</span> <span class="number">0</span>
 <span class="ident">kitty_toys</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">toy</span><span class="punct">|</span>
   <span class="keyword">next</span> <span class="keyword">if</span> <span class="ident">toy</span><span class="punct">[</span><span class="symbol">:shape</span><span class="punct">]</span> <span class="punct">==</span> <span class="punct">'</span><span class="string">eggroll</span><span class="punct">'</span>
   <span class="ident">non_eggroll</span> <span class="punct">=</span> <span class="ident">non_eggroll</span> <span class="punct">+</span> <span class="number">1</span>
 <span class="keyword">end</span></code></pre></div>
	<p>I could also have taught him about <code><span class="keyword">break</span></code>, which <strong>kicks you out of an iterating loop</strong>. In the code below, we&#8217;ll print out (with <code><span class="ident">p</span></code>) each of the toy Hashes until we hit the toy whose fabric is chenille.  The <code><span class="keyword">break</span></code> will cause the <code><span class="ident">each</span></code> to abruptly end.</p>


<div class='example'><pre><code> <span class="ident">kitty_toys</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">toy</span><span class="punct">|</span>
   <span class="keyword">break</span> <span class="keyword">if</span> <span class="ident">toy</span><span class="punct">[</span><span class="symbol">:fabric</span><span class="punct">]</span> <span class="punct">==</span> <span class="punct">'</span><span class="string">chenille</span><span class="punct">'</span>
   <span class="ident">p</span> <span class="ident">toy</span>
 <span class="keyword">end</span></code></pre></div>
	<p>I never got to teach him such things.  I continued poking away at a particularly stubborn coal which was caught in the iron curtain of the fireplace and threatened to drop on my antelope skin rug.</p>


	<p>As I hacked away ferociously at the black stone, Blix slipped away, presumably on the bus bound for Wixl, the very bustling metropolis of the animal economies.  Who knows, he may have first stopped in Ambrose or Riathna or any of the other villages along the way.  My instinct say that Wixl was his definitely his final stop.</p>


	<p>Without any student to instruct and coax along, I found myself quite lonely, holed up in the estate.  In the stillness of the dead corridors, I began to sketch out a biography in the  form of this guide.</p>


	<p>I worked on it whenever I found myself bored.  And when I wasn&#8217;t bored, I could always switch on <em>The Phantom Menace</em> to get me in the mood.</p>


	<p><img src="i/the.elf-7.jpg" title="Someone let them all out." alt="Someone let them all out." /></p>

    
    

    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>5.</h3>
        <h1>Them What Make the Rules and Them What Live the Dream</h1>
        <p><img src="i/chapter.poignant.guide-5.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/dr.cham-1.gif" title="Through space and time... in his bell jar... on a mission to find himself..." alt="Through space and time... in his bell jar... on a mission to find himself..." /></p>


	<p>Frankly, I&#8217;m sick and tired of hearing that Dr. Cham was a madman.  Yes, he tried to bury himself alive.  Yes, he electrocuted his niece.  Yes, in fact, he did dynamite a retirement home.  But this was all with good cause and, in each case, I believe he took the correct course of action.</p>


	<p>I&#8217;m sure you&#8217;d like to side with popular opinion, but you&#8217;re bound to feel some small trickle of admiration for him once he&#8217;s taken time to teach you all  about Ruby&#8217;s class definitions. And moreso when you learn about mixins.  And perhaps, by the end of the chapter, we can all start to look beyond the Doctor&#8217;s grievous past and stop calling him a madman.</p>


	<p>So if you need to call him a madman, I&#8217;d start heading down to the train tracks to smash up some long flourescent light bulbs.  Get it out of your system right now,  before we dig in.</p>

    
    
        
        <a name="section1" />
        <h2>1. This One's For the Disenfranchised</h2>

        <p><img src="i/elderly-1.gif" title="Some people still can't get past what he did." alt="Some people still can't get past what he did." /></p>


	<p>If you give me a number, which is any year from Dr. Cham&#8217;s life, I&#8217;ll give you a synopsis of that time period.  And I&#8217;ll do it as a Ruby method, so it&#8217;s an independent piece, an isolated chunk of code which can be hooked up to the voice of a robotic volcano, when such a thing becomes the apex of authoritative voice talents.</p>


	<p>Okay, so I need you to notice <code><span class="keyword">def</span></code> and <code><span class="keyword">case</span></code> and <code><span class="keyword">when</span></code>.  You&#8217;ve seen the Ranges, the closed accordions of <code><span class="number">1895</span><span class="punct">..</span><span class="number">1913</span></code>, back in chapter 3.  They contain both ends and in between.  And the backslashes at the end of each line simply ignore the <em>Enter</em> key at the end of each line, assuring Ruby that there is <em>more of this line to come</em>.</p>


	<p>So, please: <code><span class="keyword">def</span></code> and <code><span class="keyword">case</span></code> and <code><span class="keyword">when</span></code>.</p>


<div class='example'><pre><code> <span class="keyword">def </span><span class="method">dr_chams_timeline</span><span class="punct">(</span> <span class="ident">year</span> <span class="punct">)</span>
   <span class="keyword">case</span> <span class="ident">year</span>
   <span class="keyword">when</span> <span class="number">1894</span>
     <span class="punct">&quot;</span><span class="string">Born.</span><span class="punct">&quot;</span> 
   <span class="keyword">when</span> <span class="number">1895</span><span class="punct">..</span><span class="number">1913</span>
     <span class="punct">&quot;</span><span class="string">Childhood in Lousville, Winston Co., Mississippi.</span><span class="punct">&quot;</span> 
   <span class="keyword">when</span> <span class="number">1914</span><span class="punct">..</span><span class="number">1919</span>
     <span class="punct">&quot;</span><span class="string">Worked at a pecan nursery; punched a Quaker.</span><span class="punct">&quot;</span> 
   <span class="keyword">when</span> <span class="number">1920</span><span class="punct">..</span><span class="number">1928</span>
     <span class="punct">&quot;</span><span class="string">Sailed in the Brotherhood of River Wisdomming, which journeyed <span class="escape">\
</span>      the Mississippi River and engaged in thoughtful self-improvement, <span class="escape">\
</span>      where he finished 140 credit hours from their Oarniversity.</span><span class="punct">&quot;</span> 
   <span class="keyword">when</span> <span class="number">1929</span>
     <span class="punct">&quot;</span><span class="string">Returned to Louisville to pen a novel about time-travelling pheasant hunters.</span><span class="punct">&quot;</span> 
   <span class="keyword">when</span> <span class="number">1930</span><span class="punct">..</span><span class="number">1933</span>
     <span class="punct">&quot;</span><span class="string">Took up a respectable career insuring pecan nurseries.  Financially stable, he <span class="escape">\
</span>      spent time in Brazil and New Mexico, buying up rare paper-shell pecan trees.  Just <span class="escape">\
</span>      as his notariety came to a crescendo: gosh, he tried to buried himself alive.</span><span class="punct">&quot;</span> 
   <span class="keyword">when</span> <span class="number">1934</span>
     <span class="punct">&quot;</span><span class="string">Went back to writing his novel.  Changed the hunters to insurance tycoons and the <span class="escape">\
</span>      pheasants to Quakers.</span><span class="punct">&quot;</span> 
   <span class="keyword">when</span> <span class="number">1935</span><span class="punct">..</span><span class="number">1940</span>
     <span class="punct">&quot;</span><span class="string">Took Arthur Cone, the Headmaster of the Brotherhood of River Wisdomming, as a <span class="escape">\
</span>      houseguest.  Together for five years, engineering and inventing.</span><span class="punct">&quot;</span> 
   <span class="keyword">when</span> <span class="number">1941</span>
     <span class="punct">&quot;</span><span class="string">And this is where things got interesting.</span><span class="punct">&quot;</span> 
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>The <code><span class="keyword">def</span></code> keyword.  Here is our first <strong>method definition</strong>.  A plain kernel method, which can be used anywhere in Ruby.  And how do we run it?</p>


<div class='example'><pre><code> <span class="ident">puts</span> <span class="ident">dr_chams_timeline</span><span class="punct">(</span> <span class="number">1941</span> <span class="punct">)</span></code></pre></div>
	<p>Which answers with &#8220;And this is where things got interesting.&#8221;  It&#8217;s the same story again and again: <em>use your answers.</em>  I&#8217;ve set things up above so that the <code><span class="keyword">case</span></code> statement always answers with a string. And since the case statement is the final (and only) statement in the method, then the method answers with that string.  Trickling water spilling down from ledge to ledge.</p>


	<p>Let me be clear about the <code><span class="keyword">case</span></code> statement.  Actually, I should call it a <code><span class="keyword">case</span><span class="punct">..</span><span class="keyword">when</span></code> statement, since they cannot be used separately.  The <code><span class="keyword">case</span></code> keyword is followed by a value, which is compared against each of the values which follow <code><span class="keyword">when</span></code> keywords.  The first value to qualify as a match is the one the case uses and the rest are ignored.  You can do the same thing with a bunch of <code><span class="keyword">if</span><span class="punct">..</span><span class="keyword">elsif</span></code> statements, but it&#8217;s wordier.</p>


<div class='example'><pre><code> <span class="keyword">case</span> <span class="ident">year</span>
 <span class="keyword">when</span> <span class="number">1894</span>
   <span class="punct">&quot;</span><span class="string">Born.</span><span class="punct">&quot;</span> 
 <span class="keyword">when</span> <span class="number">1895</span><span class="punct">..</span><span class="number">1913</span>
   <span class="punct">&quot;</span><span class="string">Childhood in Lousville, Winston Co., Mississippi.</span><span class="punct">&quot;</span> 
 <span class="keyword">else</span>
   <span class="punct">&quot;</span><span class="string">No information about this year.</span><span class="punct">&quot;</span> 
 <span class="keyword">end</span></code></pre></div>
	<p>Is identical to:</p>


<div class='example'><pre><code> <span class="keyword">if</span> <span class="number">1894</span> <span class="punct">===</span> <span class="ident">year</span>
   <span class="punct">&quot;</span><span class="string">Born.</span><span class="punct">&quot;</span> 
 <span class="keyword">elsif</span> <span class="number">1895</span><span class="punct">..</span><span class="number">1913</span> <span class="punct">===</span> <span class="ident">year</span>
   <span class="punct">&quot;</span><span class="string">Childhood in Lousville, Winston Co., Mississippi.</span><span class="punct">&quot;</span> 
 <span class="keyword">else</span>
   <span class="punct">&quot;</span><span class="string">No information about this year.</span><span class="punct">&quot;</span> 
 <span class="keyword">end</span></code></pre></div>
	<p>The <strong>triple equals</strong> is a length of velvet rope, checking values much like the double equals.  It&#8217;s just: the triple equals is a longer rope and it sags a bit in the middle.  It&#8217;s not as strict, it&#8217;s a bit more flexible.</p>


	<p>Take the Ranges above.  <code><span class="punct">(</span><span class="number">1895</span><span class="punct">..</span><span class="number">1913</span><span class="punct">)</span></code> isn&#8217;t at all <strong>equal</strong> to <code><span class="number">1905</span></code>.  No, the Range <code><span class="punct">(</span><span class="number">1895</span><span class="punct">..</span><span class="number">1913</span><span class="punct">)</span></code> is only truly <strong>equal</strong> to any other Range <code><span class="punct">(</span><span class="number">1895</span><span class="punct">..</span><span class="number">1913</span><span class="punct">)</span></code>.  In the case of a Range, the triple equals cuts you a break and lets the Integer <code><span class="number">1905</span></code> in, because even though it&#8217;s not <strong>equal</strong> to the Range, it&#8217;s <strong>included</strong> in the set of Integers represented by the Range.  Which is good enough in some cases, such as the timeline I put together earlier.</p>


	<p>Which actually looked like a timeline, didn&#8217;t it?  I mean, sure, <code><span class="ident">dr_chams_timeline</span></code> method is code, but it does read like a timeline, clean and lovely.</p>


	<p><img src="i/elderly-2.gif" title="What research revealed." alt="What research revealed." /></p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Caring For You.  And Your Wellness.</h2>
        

        <p>I need you to be in a good mental state for the latter half of this book. Now is the time to begin conditioning you.</p>


	<p>Let&#8217;s start with some deep breathing.  Give me a good deep breath and count to four with me.</p>


	<p>Here we go.  1.  2.  3.  4.   Now exhale.  You can feel your eyes.  Good, that&#8217;s exactly it.</p>


	<p>Now let&#8217;s take a deep breath and, in your mind, draw a hippopotamus as fast as you can.  Quick quick.  His legs, his folds, his marshmallow teeth.  Okay, done.  Now exhale.</p>


	<p>Take another deep breath and hold it tight.  As you hold it tightly in your chest, imagine the tightness is shrinking you down into a bug. You&#8217;ve held your breath so hard that you&#8217;re an insect.  And all the other bugs saw you shrink and they loved the stunt.  They&#8217;re clapping and rubbing their feelers together madly.   But you had an apple in your hand when you were big and it just caught up with you, crushed the whole crowd.  You&#8217;re dead, too.  Now exhale.</p>


	<p>Give me a solid deep breath and imagine you live in a town where everything is made of telephone cords.  The houses are all telephone cords, the shingles, the rafters.  The doorways are a thick mass of telephone cords which you simply thrust yourself through.  When you go to bed, the bedspread is telephone cords.  And the mattress and box springs are telephone cords, too.  Like I said, everything is made out of telephone cords.  The telephone itself is made of telephone cords.  But the telephone cord going to the telephone is made out of bread and a couple sticks.  Now exhale.</p>


	<p>Breathe in.  1.  2.  3.  4.  Breathe out.</p>


	<p>Breath in.  1.  2.  Another short breath in.  3.  4.  Imagine both of your hands snapping off at the wrists and flying into your computer screen and programming it from the inside.  Exhale.</p>


	<p>Big, big deep breath.  Deep down inside you there is a submarine. It has a tongue.  Exhale.</p>


	<p>Breathe through your nostrils.  Deep breath.  Filter the air through your nostrils.  Breathing through the nostrils gives you quality air. Your nostrils flare, you are taking breaths of nature&#8217;s air, the way God intended.  Imagine a floppy disk drive clogged up with orphans. And while it chokes on orphans, you have good, wholesome God&#8217;s  breath in your lungs.  But that pleasurable, life-giving air will become a powerful toxin if held too long.  <em>Hurry, exhale God and nature&#8217;s air!</em></p>


	<p>Now, you will wake up, smoothing out the creases of this page in your web browser.  You will have full recollection of your whole life and not forgetting any one of the many  adventures you have had in your life.  You will feel rich and renewed and expert.  You will have no remembrance of this short exercise, you will instead remember teaching a rabbit to use scissors from a great distance.</p>


	<p>And as you will wake up with your eyes directed to the top of this exercise, you will begin again.  But this time, try to imagine that even <em>your shadow</em> is a telephone cord.</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <h3>But Was He Sick??</h3>

	<p>You know, he had such bad timing.  He was scattered as a novelist, but his ventures into alchemy were very promising.  He had an elixir of goat&#8217;s milk and sea salt that got rid of leg aches. One guy even grew an inch on a thumb he&#8217;d lost.  He had an organic health smoke that smelled like foot but gave you night vision.  He was working on something called Liquid Ladder, but I&#8217;ve never seen or read anything else about it.  It can&#8217;t have been for climbing.  Who knows.</p>


	<p>One local newspaper actually visited Dr. Cham.  Their book reviewer gave him four stars. Really.  She did an article on him.  Gave him a rating.</p>


	<p>Just know that Dr. N. Harold Cham felt terrible about his niece.  He felt the shock treatment would work.  The polio probably would have killed her anyway, but he took the chance.</p>


	<p>On Sept. 9, 1941, after sedating her with a dose of phenacetin in his private operating room, he attached the conducting clips to Hannah&#8217;s nose, tongue, toes, and elbows.  Assisted by his apprentice, a bespeckled undergraduate named Marvin Holyoake, they sprinkled the girl with the flakes of a substance the doctor called <em>opus magnum</em>.  A white powder gold which would carry the current and blatantly energize the girl, forcing her blood to bloom and fight and vanquish.</p>


But how it failed, oh, and how, when the lever was tossed, she arched and kicked <del>- and  <strong>KABLAM!</strong> &#8211; </del> and <strong>BLOY-OY-OY-KKPOY!</strong>  Ringlets of hair and a wall of light, and the  bell of death rang.  The experiment collapsed in a dire plume of smoke and her innocence (<em>for weeks, everyone started out with, &#8220;And she will never have the chance&#8230;&#8221;</em>) was a great pit in the floor and in their lungs.

	<p>To Hannah, I code.</p>


<div class='example'><pre><code> <span class="ident">opus_magnum</span> <span class="punct">=</span> <span class="constant">true</span>
 <span class="keyword">def </span><span class="method">save_hannah</span>
   <span class="ident">success</span> <span class="punct">=</span> <span class="ident">opus_magnum</span>
 <span class="keyword">end</span></code></pre></div>
	<p>A method is its own island.  And what goes on inside is unaffected by the simple variables around it. Dr. Cham couldn&#8217;t breach the illness of his niece, no more than an <code><span class="ident">opus_magnum</span></code> variable can penetrate the steely exterior of a method.</p>


	<p>Should we run the <code><span class="ident">save_hannah</span></code> method, Ruby will squawk at us, claiming it sees no <code><span class="ident">opus_magnum</span></code>.</p>


	<p>I&#8217;m talking about <strong>scope</strong>.  Microscopes narrow and magnify your vision.  Telescopes extend the range of your vision.  In Ruby, <strong>scope</strong> refers to a field of vision inside methods and blocks.</p>


	<p>A method&#8217;s <code><span class="keyword">def</span></code> statement opens its vision.  Variable names introduced there will be seen by the method and kept meaningful until its <code><span class="keyword">end</span></code> closes its eyes.  You can pass data into a method by using arguments and data can be returned from the method, but the names used inside the method are only good for its scope.</p>


	<p>Some variables have wider scope.  Global variables like <code><span class="global">$LOAD_PATH</span></code>, which start with a <strong>cash</strong> symbol, are available in any scope.  Instance variables like <code><span class="ident">names</span></code>, which start with an <strong>at</strong> are available anywhere inside a class scope.  Same goes for class variables like <code><span class="attribute">@tickets</span></code>. Class and instance variables will be explored in a moment.</p>


	<p>Blocks have scope, but it&#8217;s a bit fuzzier.  More flexible.</p>


<div class='example'><pre><code> <span class="ident">verb</span> <span class="punct">=</span> <span class="punct">'</span><span class="string">rescued</span><span class="punct">'</span>
 <span class="punct">['</span><span class="string">sedated</span><span class="punct">',</span> <span class="punct">'</span><span class="string">sprinkled</span><span class="punct">',</span> <span class="punct">'</span><span class="string">electrocuted</span><span class="punct">'].</span>
 <span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">verb</span><span class="punct">|</span>
   <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">Dr. Cham </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">verb</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string"> his niece Hannah.</span><span class="punct">&quot;</span> 
 <span class="keyword">end</span>
 <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">Yes, Dr. Cham </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">verb</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string"> his niece Hannah.</span><span class="punct">&quot;</span></code></pre></div>
	<p>The block <em>iterates</em> (spins, cycles) through each of the Doctor&#8217;s actions.  The <code><span class="ident">verb</span></code> variable changes with each pass.  In one pass, he&#8217;s sedating.  In the next, he&#8217;s powdering.  Then, he&#8217;s electrocuting.</p>


	<p>So, the question is: after the block&#8217;s over, will he have rescued Hannah?</p>


<div class='example'><pre class="result"> Dr. Cham sedated his niece Hannah.
 Dr. Cham sprinkled his niece Hannah.
 Dr. Cham electrocuted his niece Hannah.
 Yes, Dr. Cham electrocuted his niece Hannah.
</pre></div>
	<p>Blocks are allowed to see variables in the vicinity.  The block noticed that the <code><span class="ident">verb</span></code> variable existed and it overwrote its contents as it went along.  When the block completed and its tiny life  ended, the <code><span class="ident">verb</span></code> variable came out a changed creature.</p>


	<p>If a block uses a variable which hasn&#8217;t been used previously, though, then that variable vanishes at the end of the block.  The block&#8217;s <strong>scope</strong> closes and the variable goes with it.  Say that <code><span class="ident">verb</span></code> wasn&#8217;t used before the block.</p>


<div class='example'><pre><code> <span class="punct">['</span><span class="string">sedated</span><span class="punct">',</span> <span class="punct">'</span><span class="string">powdered</span><span class="punct">',</span> <span class="punct">'</span><span class="string">electrocuted</span><span class="punct">'].</span>
 <span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">verb</span><span class="punct">|</span>
   <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">Dr. Cham </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">verb</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string"> his niece Hannah.</span><span class="punct">&quot;</span> 
 <span class="keyword">end</span>
 <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">Yes, Dr. Cham </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">verb</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string"> his niece Hannah.</span><span class="punct">&quot;</span></code></pre></div>
	<p>Pulls an error: <code><span class="ident">undefined</span> <span class="ident">local</span> <span class="ident">variable</span> <span class="keyword">or</span> <span class="ident">method</span> `<span class="ident">verb</span><span class="punct">'</span><span class="string"></span></code>.  Poof.</p>


	<p>It must be something difficult, even for a great scientist, to carry away the corpse of a young girl whose dress is still starched and embroidered, but whose mouth is darkly clotted purple at the corners.   In Dr. Cham&#8217;s journal, he writes that he was tormented by her ghost, which glistened gold and scorched lace.  His delusions grew and he ran from hellhounds and massive vengeful, angelic hands.</p>


	<p>Only weeks later, he was gone, propelled from these regrets, vanishing in the explosion  that lifted him from the planet.</p>


	<p>And even as you are reading this now, sometime in these moments, the bell jar craft of our lone Dr. Cham touched down upon a distant planet after a sixty year burn.   As the new world came into view, as the curvature of the planet widened,  as the bell jar whisked through the upset heavens, tearing through sheets of aurora and solar wind, Dr. Cham&#8217;s eyes were shaken open.</p>


	<p><img src="i/dr.cham-2.gif" title="Safe landing.  Amazement." alt="Safe landing.  Amazement." /></p>


	<p>What you are witnessing is the landing of Dr. Cham on the planet Endertromb.  From what I can gather, he landed during the cusp of the Desolate Season, a time when there really isn&#8217;t much happening on the planet.  Most of the inhabitants find their minds locked into a listless hum which causes them to disintegrate into just vapid ghosts of one-part-wisdom and three-parts-steam for a time.</p>


	<p>My modest grasp of the history and climate of Endertromb has been assembled from hanging around my daughter&#8217;s organ instructor, who grew up on the planet.</p>


	<p><img src="i/elderly-3.gif" title="Dead husbands could destroy the Doctor." alt="Dead husbands could destroy the Doctor." /></p>


	<p>I frequently drill my daughter&#8217;s organ instructor in order to ensure that he can keep appointments adequately.  That he can take house calls at odd hours and promptly answer emergency calls. When he finally revealed to me that he was an alien whose waking day consisted of five-hundred and forty waking hours, I was incredibly elated and opened a contractual relationship with him which will last into 2060.</p>


	<p>For three days (by his pocket watch&#8217;s account), Dr. Cham travelled the dark shafts of air, sucking the dusty wind of the barren planet. But on the third day, he found the Desolate Season ending and he awoke to a brilliant vista,  decorated with spontaneous apple blossoms and dewy castle tiers.</p>

    
    
        
        <a name="section2" />
        <h2>2. A Castle Has Its Computers</h2>

        <p><img src="i/dr.cham-3.jpg" title="The panoramic vales of Sedna on Endertromb." alt="The panoramic vales of Sedna on Endertromb." /></p>


	<p>Our intrepid Doctor set off for the alien castle, dashing through the flowers.  The ground belted past his heels.  The castle inched up the horizon.  He desired a stallion, but no stallion appeared.  And that&#8217;s how he discovered that the planet wouldn&#8217;t read his mind and answer his wishes.</p>


	<p>As my daughter&#8217;s organ instructor explained it, however, the planet <strong>could read minds</strong> and it <strong>could grant wishes</strong>.  Just not both at the same time.</p>


	<p>One day as I quizzed the organ maestro, he sketched out the following Ruby code on a pad of cheese-colored paper.  (And queer cheese smells were coming from somewhere, I can&#8217;t say where.)</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">endertromb</span><span class="punct">'</span>
 <span class="keyword">class </span><span class="class">WishMaker</span>
   <span class="keyword">def </span><span class="method">initialize</span>
     <span class="attribute">@energy</span> <span class="punct">=</span> <span class="ident">rand</span><span class="punct">(</span> <span class="number">6</span> <span class="punct">)</span>
   <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">grant</span><span class="punct">(</span> <span class="ident">wish</span> <span class="punct">)</span>
     <span class="keyword">if</span> <span class="ident">wish</span><span class="punct">.</span><span class="ident">length</span> <span class="punct">&gt;</span> <span class="number">10</span> <span class="keyword">or</span> <span class="ident">wish</span><span class="punct">.</span><span class="ident">include?</span> <span class="punct">'</span><span class="string"> </span><span class="punct">'</span>
       <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">Bad wish.</span><span class="punct">&quot;</span> 
     <span class="keyword">end</span>
     <span class="keyword">if</span> <span class="attribute">@energy</span><span class="punct">.</span><span class="ident">zero?</span>
       <span class="keyword">raise</span> <span class="constant">Exception</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">No energy left.</span><span class="punct">&quot;</span> 
     <span class="keyword">end</span>
     <span class="attribute">@energy</span> <span class="punct">-=</span> <span class="number">1</span>
     <span class="constant">Endertromb</span><span class="punct">::</span><span class="ident">make</span><span class="punct">(</span> <span class="ident">wish</span> <span class="punct">)</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>This is the wish maker.</p>


	<p>Actually, no, this is a <strong>definition for a wish maker.</strong>  To Ruby, it&#8217;s a <strong>class definition</strong>. The code describes how a certain <strong>object</strong> will work.</p>


	<p>Each morning, the wish maker starts out with up to five wishes available for granting. A new <code><span class="constant">WishMaker</span></code> is created at sun up.</p>


<div class='example'><pre><code> <span class="ident">todays_wishes</span> <span class="punct">=</span> <span class="constant">WishMaker</span><span class="punct">.</span><span class="ident">new</span></code></pre></div>
	<p>The <code><span class="ident">new</span></code> method is a class method which creates a new, blank object.  It also calls the object&#8217;s <code><span class="ident">initialize</span></code> method automatically.  In the <code><span class="constant">WishMaker</span></code> definition, you&#8217;ll see the <code><span class="ident">initalize</span></code> method, which contains a single line of code: <code><span class="ident">energy</span> <span class="punct">=</span> <span class="ident">rand</span><span class="punct">(</span> <span class="number">6</span> <span class="punct">)</span></code>.</p>


	<p>The <code><span class="ident">rand</span><span class="punct">(</span> <span class="number">6</span> <span class="punct">)</span></code> picks a number between 0 and 5.  This number will represent the number of wishes left in the day.  So, occassionally there are no wishes available from the wish maker.</p>


	<p>The random number is assigned to an <strong>instance variable</strong> which is named <code><span class="ident">energy</span></code>. This instance variable will be available any time throughout the class.  The variable can&#8217;t be used outside the <strong>scope</strong> of the class.</p>


	<p>In chapter three, we briefly looked at instance variables and decided to respect them as <strong>attributes</strong>.  (The <strong>at symbol</strong> could mean <strong>attribute</strong>.)  Instance variables can used to store any kind of information, but they&#8217;re most often use to store bits of information about the object represented by the class.</p>


	<p>In the above case, each wish maker for the day has its own energy level.  If the wish maker were a machine, you might see a gauge on it that points to the energy left inside. The <code><span class="ident">energy</span></code> instance variable is going to act as that gauge.</p>


<div class='example'><pre><code> <span class="ident">todays_wishes</span> <span class="punct">=</span> <span class="constant">WishMaker</span><span class="punct">.</span><span class="ident">new</span>
 <span class="ident">todays_wishes</span><span class="punct">.</span><span class="ident">grant</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">antlers</span><span class="punct">&quot;</span> <span class="punct">)</span></code></pre></div>
	<p>Okay, step back and ensure you understand the example here.  The <code><span class="constant">WishMaker</span></code> class is an outline we&#8217;ve laid out for how the whole magic wish program works.  It&#8217;s not the <em>actual</em> genie in the bottle, it&#8217;s the paperwork behind the scenes.  It&#8217;s the rules and obligations the genie has to live by.</p>


	<p>It&#8217;s <code><span class="ident">todays_wishes</span></code> that&#8217;s the genie in the bottle.  And here we&#8217;re giving it a wish to grant. Give us antlers, genie.  (If you really get antlers from this example, I don&#8217;t want to hear about it.  Go leap in meadows with your own kind now.)</p>


	<p>In the last chapter, the drill was: Ruby has two halves.</p>


<ol>
	<li>Defining things.</li>
	<li>Putting those things into action.</li>
</ol>

	<p>What are the actions in Ruby?  Methods.  And now, you&#8217;re having a lick of the definition language built-in to Ruby.  Method definitions using <code><span class="keyword">def</span></code>.  Class definitions using <code><span class="keyword">class</span></code>.</p>


	<p>At this point in your instruction, it&#8217;s easier to understand that <strong>everything in Ruby is an object.</strong></p>


<div class='example'><pre><code> <span class="ident">number</span> <span class="punct">=</span> <span class="number">5</span>
 <span class="ident">print</span> <span class="ident">number</span><span class="punct">.</span><span class="ident">next</span>                  <span class="comment"># prints '6'</span>

 <span class="ident">phrase</span> <span class="punct">=</span> <span class="punct">'</span><span class="string">wishing for antlers</span><span class="punct">'</span>
 <span class="ident">print</span> <span class="ident">phrase</span><span class="punct">.</span><span class="ident">length</span>                <span class="comment"># prints '19'</span>

 <span class="ident">todays_wishes</span> <span class="punct">=</span> <span class="constant">WishMaker</span><span class="punct">.</span><span class="ident">new</span>
 <span class="ident">todays_wishes</span><span class="punct">.</span><span class="ident">grant</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">antlers</span><span class="punct">&quot;</span> <span class="punct">)</span></code></pre></div>
	<p>And, consequently, each object has a class behind the scenes.</p>


<div class='example'><pre><code> <span class="ident">print</span> <span class="number">5</span><span class="punct">.</span><span class="keyword">class                       </span><span class="class">#</span> <span class="ident">prints</span> <span class="punct">'</span><span class="string">Integer</span><span class="punct">'</span>
 <span class="ident">print</span> <span class="punct">'</span><span class="string">wishing for antlers</span><span class="punct">'.</span><span class="keyword">class   </span><span class="class">#</span> <span class="ident">prints</span> <span class="punct">'</span><span class="string">String</span><span class="punct">'</span>
 <span class="ident">print</span> <span class="constant">WishMaker</span><span class="punct">.</span><span class="ident">new</span><span class="punct">.</span><span class="keyword">class           </span><span class="class">#</span> <span class="ident">prints</span> <span class="punct">'</span><span class="string">WishMaker</span><span class="punct">'</span></code></pre></div>
	<p>Dr. Cham never saw the wish maker as he hustled across the landspace. It lay far beyond his landing in the valley of Sedna.  Down sheer cliffs stuffed with layers of thicket, where you might toss your wish (written on a small 1&#8221; x 6&#8221; slip), down into the gaping void.  Hopefully it will land on a lizard&#8217;s back, sticking to its spindly little horn.</p>


	<p>And let&#8217;s say your wish makes it that far.  Well, then, <em>down the twisted wood</em> goes the skinny salamander, scurrying through the decaying churches which had been <strong>pushed</strong> over that steep canyon ledge once and for all.  And the expired priest inside, <em>who weathered the fall</em> as well, will kill the little amphibian <del>- strangle it to death with a blessed gold chain &#8211; </del> and save it for the annual <em>Getting To Know You</em> breakfast.  He&#8217;ll step on your precious little wish and, when the <strong>thieves come</strong>, that slip will still be there, stuck on his sole.  Of course, the thieves&#8217; <strong>preferred method of torture</strong> is to cut a priest in thin deli-shaved slices <em>from top to bottom</em>.  Who can cull evidence from that?  And when they chop that last thin slice of shoe sole, they&#8217;ll have that <strong>rubber scalp</strong> in hand for <em>good luck</em> and <em>good times</em>. But they <strong>canoe</strong> much too hard, these thieves.  They slap their paddles swiftly in the current to get that great <em>outboard motor mist</em> going.  But the shoe sole is <em>on a weak chain</em>, tied to one man&#8217;s belt.  And a <strong>hairy old carp</strong> <em>leaps, latches</em> on to that minute fraction of footwear.  And the thieves <em>can try</em>, but they don&#8217;t see <em>underwater</em>.  If they could, they&#8217;d see that <strong>mighty cable</strong>, packed with millions of <em>needly</em> fiber optics.  Indeed, <strong>that fish is a peripheral plugged</strong> right into the <em>core workings</em> of the planet Endertromb.  <strong>All it takes is one swallow</strong> from that fish <strong>and your wish is home free!</strong></p>


	<p>And that&#8217;s how wishes come true for children in this place.</p>


	<p>Once my daughter&#8217;s organ instructor had drawn up the class for the wish maker, he then followed with a class for the planet&#8217;s mind reader.</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">endertromb</span><span class="punct">'</span>
 <span class="keyword">class </span><span class="class">MindReader</span>
   <span class="keyword">def </span><span class="method">initialize</span>
     <span class="attribute">@minds</span> <span class="punct">=</span> <span class="constant">Endertromb</span><span class="punct">::</span><span class="ident">scan_for_sentience</span>
   <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">read</span>
     <span class="attribute">@minds</span><span class="punct">.</span><span class="ident">collect</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">mind</span><span class="punct">|</span>
        <span class="ident">mind</span><span class="punct">.</span><span class="ident">read</span>
     <span class="keyword">end</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Much as you&#8217;ve seen before, the <code><span class="ident">initalize</span></code> happens when a new <code><span class="constant">MindReader</span></code> object is created. This <code><span class="ident">initialize</span></code> gathers scans the planet for mindshare.  It looks like these minds are stored in an array, since they are later iterated over using the <code><span class="ident">collect</span></code> method.</p>


	<p>Both the wish maker and the mind reader refer to a class named <code><span class="constant">Endertromb</span></code>.  This class is stored in a file <code><span class="ident">endertromb</span><span class="punct">.</span><span class="ident">rb</span></code>, which is loaded with the code: <code><span class="ident">require</span> <span class="punct">'</span><span class="string">endertromb</span><span class="punct">'</span></code>. Often you&#8217;ll use other classes to accomplish part of your task.  Most of the latter half of this book will explore the wide variety of helpful classes that can be loaded in Ruby.</p>


	<h3>Dr. Cham Ventures Inside</h3>

	<p>But as Dr. Cham neared the castle, although the planet was aware of his thoughts, sensing his wonderment and anticipation, all Dr. Cham felt was deadness.  He tromped up the steps of its open gate and through the entrance of the most beautiful architecture and was almost certain it was deserted.</p>


	<p>For a while he knocked.  Which paid off.</p>


	<p><img src="i/castle-1.jpg" title="Blocky whale greeting." alt="Blocky whale greeting." /></p>


	<p>He watched the baby whale rise like a determined balloon.  He marvelled at his first alien introduction and felt some concern that it had passed so quickly.  Well, he would wait inside.</p>


	<p>As he stepped through the castle door, he felt fortunate that the door hadn&#8217;t been answered by  a huge eagle with greedy talons, eager to play.  Or a giant mouse head.  Or even a man-sized hurricane.   Just a tubby little choo-choo whale.</p>


	<p>&#8220;Not a place to sit down in this castle,&#8221; he said.</p>


	<p>At first, he had thought he had just entered a very dim hallway, but as his eyes adjusted, he saw the entrance extended into a tunnel.  The castle door had opened right into a passage made of  long, flat slabs of rock.  Some parts were congruous and resembled a corridor.  Other parts  narrowed, and even tilted, then finally tipped away out of view.</p>


	<p>The passage was lit by small doorless refrigerators, big enough to hold an armful of cabbage,  down by his feet.  He peered inside one, which was hollow, illuminated along all sides, and turning out ice shards methodically.</p>


	<p>He pawed the ice chips, which clung dryly to his fingertips, and he scrubbed his hands in the ice.  Which left some muddy streaks on his hands, but satisfied a small part of his longing to bathe. How long had it been?  Ten years?  Thirty?</p>


	<p>Along the passage, long tubes of cloth cluttered some sections.  Later, bright pixel matter in porcelain scoops and buckets.</p>


	<p>He happened upon a room which had been burrowed out of the tunnel which had a few empty turtle shells on the ground and a large illuminated wall.  He stared into the room, bewildered.  What could this be?  In one state of mind, he thought of having a seat on a shell.  This could be the entrace at last, some kind of receiving room.  On the other hand, spiders could pour out of the shell&#8217;s hollow when he sat.  He moved on.</p>


	<h3>Meal in a Castle&#8217;s Pocket</h3>

	<p>As he journeyed along the passageways (for the central tunnel forked and joined larger, vacuous caverns), he picked up themes in some locations.  Groups of rooms infested with pumping machinery.  Cloth and vats of glue dominated another area.  He followed voices down a plush, pillowed cavity, which led him to a dead end: a curved wall with a small room carved at eye-level.</p>


	<p>He approached the wall and, right in the cubby hole, were two aardvarks eating at a table.</p>


	<p>They gazed at him serenely, both munching on some excavated beetle twice their size, cracked  open and frozen on its back on the table.</p>


	<p>&#8220;Hello, little puppets,&#8221; he said, and they finished their bites and kept looking with their forks held aloof.</p>


	<p>&#8220;I wish my niece Hannah were here to meet you,&#8221; he told the attentive miniature aardvarks.  &#8220;She&#8217;d think you were an intricate puppet show.&#8221;  He peered in at the dining area, shelves with sets of plates, hand towels.  Half of a tiny rabbit was jutting out from the top a machine, creamy red noodles were spilling out underneath it.  A door at the back of the room hung ajar.  Dr. Cham could see a flickering room with chairs and whirring motors through the door.</p>


	<p>&#8220;Any child would want this dollhouse,&#8221; he said.  &#8220;Hannah, my niece, as I mentioned, she has a wind-up doll that sits at a spindle and spins yarn.  It&#8217;s an illusion, of course.   The doll produces no yarn at all.&#8221;</p>


	<p>One of the aardvarks opened a trapdoor in the floor and pressed a button down inside, which lit. Then, a small film projector slowly came up on a rod.  The other aardvark sat and watched Dr. Cham.</p>


	<p>&#8220;But Hannah still reaches down into the dollhouse and collects all the imaginary yarn into a bundle.  Which she takes to her mother, my sister, who is very good at humoring Hannah. She sews a dress to the doll&#8217;s dimensions, which Hannah takes back to the doll.</p>


	<p>&#8220;And she tells the doll, &#8216;Here, look, your hard work and perserverance has resulted in this beautiful dress. You can now accept the Chief of Police&#8217;s invitation to join him tonight at the Governor&#8217;s Mansion.&#8217;  And she has a doll in a policeman&#8217;s uniform who plays the part of the Chief.  He&#8217;s too scrawny to be an actual Chief, that would require quite a bit of plastic.&#8221;</p>


	<p>The aardvark responsible for the film projector loaded a reel and aimed the projector at the back wall.  The film spun to life and the aardvark took a seat.  A green square appeared on the wall.  The attentive aardvark stared at Dr. Cham still.</p>


	<p>&#8220;Your films are coloured,&#8221; said Dr. Cham.  &#8220;What a lovely, little life.&#8221;</p>


	<p>The film played on: a blue square.  Then, a red circle.  Then, an orange square.  The attentive aardvark turned away, watched the screen change to a pink triangle, and both aardvarks resumed eating.</p>


	<p>A purple star.  A red square.  With quietness settling, Dr. Cham could hear notes droning from the projector.  Like a slow, plodding music box trying to roll its gears along the train tracks.</p>


	<p>&#8220;Yes, enjoy your supper,&#8221; said Dr. Cham and he politely tipped his head away, marching back up the path he&#8217;d taken.</p>


	<h3>Another Dead End Where Things Began</h3>

	<p>He found himself lost in the castle&#8217;s tunnels.  Nothing looked familiar.  He wasn&#8217;t worried much, though.  He was on another planet.  He would be lost regardless.</p>


	<p>He wound through the tunnels, attempting to recall his paths, but far too interested in exploring to keep track of his steps.  He followed a single tunnel deep, down, down, which slanted so steeply that he had to leap across ledges and carefully watch his footholds. The gravity here seemed no different than Earth.  His legs were pulled into slides just as easily.</p>


	<p>Although he had no absolute way of knowing where he was, he felt certain that he had left the castle&#8217;s boundaries.  This deep, this long of a walk.  It had been an hour since he&#8217;d entered through the door.  And, as the tunnel wound back up, he was sure that he would emerge into a new dwelling, perhaps even a manhole which he could peek out from and see the castle.  Perhaps he shouldn&#8217;t have come so far down this route.  He hoped nothing was hibernating down here.</p>


	<p>The tunnel came to a stop.   A dark, dead end.</p>


	<p><img src="i/dr.cham-4.gif" title="At the end of the tunnels: a computer and a book." alt="At the end of the tunnels: a computer and a book." /></p>


	<p>He had time.  So he read the book.  He read of the foxes and their pursuit of the porcupine who stole their pickup truck.  He read of the elf and the ham.  He saw the pictographs of himself and found he could really relate to his own struggles.  He even learned Ruby.  He saw how it all ended.</p>


	<p>Were I him, I couldn&#8217;t have stomached it.  But he did.  And he pledged in his bosom to see things out just as they happened.</p>


	<p>On the computer monitor, Dr. Cham saw the flashing <code><span class="ident">irb</span></code> prompt.  Like Dr. Cham, you might recognize the <code><span class="ident">irb</span></code> prompt from <a href="expansion-pak-1.html">The Tiger&#8217;s Vest</a> (the first expansion pak to this book, which includes a basic introduction to Interactive Ruby.)</p>


	<p>Whereas he had just been exploring tunnels by foot, he now explored the machine&#8217;s setup with the prompt.  He set the book back where he had found it.  He didn&#8217;t need it anymore.  This was all going to happen whether he used it or not.</p>


	<p>He started with:</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Object</span><span class="punct">::</span><span class="ident">constants</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">Marshal</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">String</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">Dir</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">LoadError</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">Float</span><span class="punct">&quot;,</span> <span class="punct">...</span> <span class="keyword">and</span> <span class="ident">so</span> <span class="ident">on</span> <span class="punct">]</span></code></pre></div>
	<p>This command lists all the top-level constants.  Classes are also listed as constants, so this list can be great to see what&#8217;s loaded into Ruby at any time.</p>


	<p>He scanned the list for anything unfamiliar.  Any classes which didn&#8217;t come with Ruby. <code><span class="constant">Marshal</span></code>, <code><span class="constant">String</span></code>, <code><span class="constant">Dir</span></code>, <code><span class="constant">LoadError</span></code>, <code><span class="constant">Float</span></code>.  Each of those came with Ruby.</p>


	<p>But further down the list:</p>


<div class='example'><pre><code> <span class="punct">...</span> <span class="punct">&quot;</span><span class="string">Struct</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">Values</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">Time</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">Elevator</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">Range</span><span class="punct">&quot;</span> <span class="punct">...</span></code></pre></div>
	<p><em>Elevator?</em>  Exactly the kind of class to poke around with.  He had a go.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Elevator</span><span class="punct">::</span><span class="ident">methods</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">method</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">freeze</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">allocate</span><span class="punct">&quot;,</span> <span class="punct">...</span> <span class="ident">another</span> <span class="ident">long</span> <span class="ident">list</span> <span class="punct">...</span> <span class="punct">]</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Elevator</span><span class="punct">::</span><span class="ident">class_variables</span>
   <span class="punct">=&gt;</span> <span class="punct">['</span><span class="string">@@diagnostic_report</span><span class="punct">',</span> <span class="punct">'</span><span class="string">@@power_circuit_active</span><span class="punct">',</span> <span class="punct">'</span><span class="string">@@maintenance_password</span><span class="punct">']</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Elevator</span><span class="punct">::</span><span class="ident">constants</span>
   <span class="punct">=&gt;</span> <span class="punct">[]</span></code></pre></div>
	<p>Looks like the <code><span class="constant">Elevator</span></code> class had plenty of methods.  Most of these looked like they were the same methods every object has in Ruby.  For example, <code><span class="ident">method</span></code>, <code><span class="ident">freeze</span></code> and <code><span class="ident">allocate</span></code> come with every class in Ruby.  (<code><span class="constant">Elevator</span><span class="punct">::</span><span class="ident">freeze</span></code> would keep the <code><span class="constant">Elevator</span></code> class from being changed.  <code><span class="constant">Elevator</span><span class="punct">::</span><span class="ident">allocate</span></code> would make a new <code><span class="constant">Elevator</span></code> object without calling the <code><span class="ident">initialize</span></code> method.)</p>


	<p>The <code><span class="ident">class_variables</span></code> were interesting to Dr. Cham.  This elevator appeared genuine. But no available <code><span class="ident">constants</span></code>.  This tells us there are no classes nested inside the <code><span class="constant">Elevator</span></code> class.</p>


	<p>He tried to create an <code><span class="constant">Elevator</span></code> object.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">e</span> <span class="punct">=</span> <span class="constant">Elevator</span><span class="punct">::</span><span class="ident">new</span>
 <span class="constant">ArgumentError</span><span class="punct">:</span> <span class="ident">wrong</span> <span class="ident">number</span> <span class="ident">of</span> <span class="ident">arguments</span> <span class="punct">(</span><span class="number">0</span> <span class="keyword">for</span> <span class="number">1</span><span class="punct">),</span> <span class="ident">requires</span> <span class="ident">a</span> <span class="ident">password</span>
         <span class="ident">from</span> <span class="punct">(</span><span class="ident">irb</span><span class="punct">)</span><span class="symbol">:2:in</span> `<span class="ident">initialize</span><span class="punct">'</span><span class="string">
         from (irb):2:in `new</span><span class="punct">'</span>
         <span class="ident">from</span> <span class="punct">(</span><span class="ident">irb</span><span class="punct">)</span><span class="symbol">:2</span>
         <span class="ident">from</span> <span class="symbol">:0</span></code></pre></div>
	<p>He tried a few passwords.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">e</span> <span class="punct">=</span> <span class="constant">Elevator</span><span class="punct">::</span><span class="ident">new</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">going up</span><span class="punct">&quot;</span> <span class="punct">)</span>
 <span class="constant">AccessDeniedError</span><span class="punct">:</span> <span class="ident">bad</span> <span class="ident">password</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">e</span> <span class="punct">=</span> <span class="constant">Elevator</span><span class="punct">::</span><span class="ident">new</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">going_up</span><span class="punct">&quot;</span> <span class="punct">)</span>
 <span class="constant">AccessDeniedError</span><span class="punct">:</span> <span class="ident">bad</span> <span class="ident">password</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">e</span> <span class="punct">=</span> <span class="constant">Elevator</span><span class="punct">::</span><span class="ident">new</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">stairs_are_bad</span><span class="punct">&quot;</span> <span class="punct">)</span>
 <span class="constant">AccessDeniedError</span><span class="punct">:</span> <span class="ident">bad</span> <span class="ident">password</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">e</span> <span class="punct">=</span> <span class="constant">Elevator</span><span class="punct">::</span><span class="ident">new</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">StairsAreBad</span><span class="punct">&quot;</span> <span class="punct">)</span>
 <span class="constant">AccessDeniedError</span><span class="punct">:</span> <span class="ident">bad</span> <span class="ident">password</span></code></pre></div>
	<p>That was useless.  <em>Oh, wait!</em>  The maintenance password.  Listed in the <code><span class="ident">class_variables</span></code>.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Elevator</span><span class="punct">::</span><span class="ident">maintenance_password</span>
 <span class="constant">NoMethodError</span><span class="punct">:</span> <span class="ident">undefined</span> <span class="ident">method</span> `<span class="ident">maintenance_password</span><span class="punct">'</span><span class="string"> for Elevator:Class
         from (irb):1
         from :0</span></code></pre></div>
	<p>Hmm.  Instance variables are only available inside an object.  And class variables are only available inside a class.  How to get at that password?</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">class </span><span class="class">Elevator</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="keyword">def </span><span class="method">Elevator.maintenance_password</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>     <span class="attribute">@@maintenance_password</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="keyword">end</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">end</span>
   <span class="punct">=&gt;</span> <span class="constant">nil</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Elevator</span><span class="punct">::</span><span class="ident">maintenance_password</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">stairs_are_history!</span><span class="punct">&quot;</span></code></pre></div>
	<p>Alright!  He got the password.  Did you see that?</p>


	<p>He added a class method to the <code><span class="constant">Elevator</span></code> class.  Isn&#8217;t that great how you can start a new class definition for <code><span class="constant">Elevator</span></code> and Ruby just adds your changes to the existing class definition?</p>


	<p>Class methods are usually called with the <strong>double colon</strong>.  But, a period is fine as well. Since <code><span class="constant">Elevator</span></code> is a class itself, Ruby will figure that if you call <code><span class="constant">Elevator</span><span class="punct">.</span><span class="ident">maintenance_password</span></code>, you&#8217;re calling a class method.  The double colon simply helps make class methods obvious to the reader.</p>


	<p>And justly so.  Class methods are a bit unusual.  Normally you won&#8217;t want to store information directly inside of a class.  However, if you have a bit of information that you need to share among all objects of a class, then you have a good reason to use the class for storage. It&#8217;s understandable that the <code><span class="attribute">@maintenance_password</span></code> would be stored in the class, instead of in each separate object.  This way, the objects can simply reach up into the class and see the shared password.</p>


	<p>Here&#8217;s probably how the password protection works.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">Elevator</span>
   <span class="keyword">def </span><span class="method">initialize</span><span class="punct">(</span> <span class="ident">pass</span> <span class="punct">)</span>
     <span class="keyword">raise</span> <span class="constant">AccessDeniedError</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">bad password</span><span class="punct">&quot;</span> \
       <span class="keyword">unless</span> <span class="ident">pass</span><span class="punct">.</span><span class="ident">equals?</span> <span class="attribute">@@maintenance_password</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Passwording a class like this is pointless, since anything in Ruby can be altered and  overwritten and remolded.  Dr. Cham had the password and ownership of the elevator is his.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">e</span> <span class="punct">=</span> <span class="constant">Elevator</span><span class="punct">.</span><span class="ident">new</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">stairs_are_history!</span><span class="punct">&quot;</span> <span class="punct">)</span>
 <span class="comment">#&lt;Elevator:0x81f12f4 @level=4&gt;</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">e</span><span class="punct">.</span><span class="ident">level</span> <span class="punct">=</span> <span class="number">1</span></code></pre></div>
	<p>Dr. Cham was standing right there when the elevator doors, off behind the computer terminal, opened for him.  With an exasperated sense of accomplishment and a good deal of excitement surrounding all of the events that lie ahead, he stepped into the elevator and pressed 4.</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>An Evening of Unobstructed Voltage</h2>
        

        <p>I dug up this article from <em>The Consistent Reminder</em>, a Connecticut newspaper which ran the four star review of Dr. Cham.  Midgie Dare, the book reviewer who suddenly opened her critical eye to anything tangible, praised the Doctor for his manners and innovations in the very same daily edition that she defamed cantaloupe and docked Manitoba for having crackly telephone service.</p>


	<p>I got a kick out of the end of her article.  Here you go.</p>


	<blockquote>
		<p>He dismounted his horse with unquestionable care for anyone who might be in the vicinity.  Attentive of all sides, he lowered himself from the saddle gently, slowing to a pace which must be measured in micrometers per second to be appreciated.</p>
	</blockquote>

	<blockquote>
		<p>Those of us in his company found ourselves with maws agape, watching his boot touch down upon the ground.  So precise and clean a step that it seemed it would never meet the earth, only hover slight above it.  Then, before the landing had actually registered with any of us, we were off to the cuisine, whisked away in the shroud of gaiety that was always right in front of Harold Cham, always just behind him, and most especially concentrate directly in his own luminary self.</p>
	</blockquote>

	<blockquote>
		<p>He also carried loosely at his side a capitally ignorant statesman&#8217;s daughter, who spared us no leave from her constant criticisms of atheists and railway routes.</p>
	</blockquote>

	<blockquote>
		<p>&#8220;At home, my efforts to light a candle were trounced upon by further train rumblings, which thrusted the match in my hand nearer the curtains!&#8221; She derided Dr. Cham for his waning grip on her forearm and became jealous when he was able to tune into a pleasurable woman&#8217;s voice on the radio once we returned to the residence.</p>
	</blockquote>

	<blockquote>
		<p>The dusk did settle, however, and we found ourselves in a communal daze beneath the thick particles of cotton drift that wafted through the polished piano room, quite entertained by the <em>Afternoon Nap Program</em>, which played their phonograph so quietly at the station that we could only hear the scratching of dead Napoleon&#8217;s sleeves across the bedsheets.  I felt a great shriek inside me at the thought! Still, on yonder chairs, the two lovers kept an abrupt distance between themselves and  I felt encompassed by Dr. Cham&#8217;s warm gaze and his playful tip of the sherry glass.</p>
	</blockquote>
        <h1>sidebar!</h1>
        </div>

    
    
        
        <a name="section3" />
        <h2>3. The Continued Story of My Daughter's Organ Instructor</h2>

        <p>I know you may be alarmed to hear that I have a daughter.  You think my writing is indicative of a palsied or infantile mind.  Well, please rest.  I don&#8217;t have a daughter. But I can&#8217;t let that stop me from sorting out her musical training.</p>


	<p>As I was related these elaborate histories of the planet Endertromb, I found myself wandering through hallways, running my fingertips along the tightly buttoned sofas and soaking myself in the saturated bellowings of the pipes, as played by my daughter&#8217;s organ instructor.  His notes resounded so deep and hollow in the walls of his manor that I began to casually mistake them for an ominous silence, and found it even easier to retreat into deep space with my thoughts.  To think upon the ancient planet and its darker philosophies: its flesh temples, tanned from the dermal remains of its martyrs; its whale cartels, ingesting their enemies and holding them within for decades, dragging them up and down the staircases of ribs; its poison fogs and its painful doorways; and, the atrocious dynasties of The Originals, the species which claims fathership to all of the intellegent beings across the universe.</p>


	<p>But, eventually, I&#8217;d hear those pipes of a higher octave sing and I&#8217;d be back in the very same breezy afternoon where I&#8217;d left.</p>


	<p>How interesting that even the breeze of our planet is quite a strange thing to some outsiders.  For he had also told me of the travellers from Rath-d, who ventured to Earth five centuries ago, but quickly dissipated in our air currents since they and their crafts and their armor were all composed of charcoal.</p>


	<p>I had sat at the organ, listening to his faint tales of his colony, while he punctuated his symphonies to greater volumes and the story would disappear for awhile, until the coda came back around. He spoke of he and his brothers piling into the hollow of his mother&#8217;s tail and tearing the waxy crescent tissue from the inner wall.  Juicy and spongy and syrupy soap which bleached their mouths and purged their esophagus as it went down.  They chewed and chomped the stuff and it foamed.  After they ate, they blew bubbles at each other, each bubble filled with a dense foam, which they slept upon.  And early in the morning, when mother opened her tail again, she watched serenely as her babies lay cradled in the stew of dark meatballs and sweet, sticky froth.</p>


	<p>He spelled out all the tastes of Endertromb.  Of their salmon&#8217;s starchy organs, which cooked into a pasta, and its eyes which melted into rich cream.  Of their buttermelon with tentacles. And he was just beginning to appreciate the delicacies as a child, only to be lifted from a schoolyard by a pair of upright pygmy elephants who reached at him, through the heavens, and snatched upon his collar with a vast length of crane.</p>


	<p>They transplanted him on Earth, led him from their craft, trumpeting their snouts loudly for the city of Grand Rapids to hear, then left, weeping and embracing each other.</p>


	<p>&#8220;But, strangely (em-pithy-dah), I learned upon, played upon (pon-shoo) the organs on my home (oth-rea) planet,&#8221; he said.</p>


	<p>My daughter&#8217;s organ instructor speaks these extra words you see in parentheses.  Who knows if they are from his native tongue or if they are his own soundful hiccups.  He keeps another relic from Endertromb as well: he has twelve names.</p>


	<p>&#8220;No, (wen-is-wen),&#8221; he said.  &#8220;I have one name (im-apalla) which is said (iff) many-many different ways.&#8221;</p>


	<p>I call him Paij-ree in the morning and Paij-plo in the later evening. Since it is day as I write, I will call him Paij-ree here.</p>


	<h3>Mumble-Free Earplugs</h3>

	<p style="float:right"><img src="i/my.daughters.organ-1.gif" title="Alien at the keys." alt="Alien at the keys." /></p>


	<p>So I told Paij-ree, &#8220;Paij-ree, I am writing a book.  To teach the world Ruby.&#8221;</p>


	<p>&#8220;Oh, (pill-nog-pill-yacht) nice,&#8221; he said.  He&#8217;s known Ruby longer than I have, but still: <em>I</em> will be my daughter&#8217;s Ruby instructor.</p>


	<p>And I said, &#8220;Paij-ree, you are in the book.  And the stories of your planet.&#8221;  I talk to him like he&#8217;s E.T.  I don&#8217;t know why.  Just like how I said next, &#8220;And then maybe someday you can go home to your mom and dad!&#8221;</p>


	<p>To which he said, &#8220;(pon-shoo) (pon-shoo) (em-pithy-dah).&#8221;  Which is his way of speaking out loud his silence and awe.</p>


	<p>He wanted to see what I&#8217;d written, so I showed him this short method I&#8217;ve written for you.</p>


<div class='example'><pre><code> <span class="keyword">def </span><span class="method">wipe_mutterings_from</span><span class="punct">(</span> <span class="ident">sentence</span> <span class="punct">)</span>
   <span class="keyword">while</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">include?</span> <span class="punct">'</span><span class="string">(</span><span class="punct">'</span>
     <span class="ident">open</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">index</span><span class="punct">(</span> <span class="punct">'</span><span class="string">(</span><span class="punct">'</span> <span class="punct">)</span>
     <span class="ident">close</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">index</span><span class="punct">(</span> <span class="punct">'</span><span class="string">)</span><span class="punct">',</span> <span class="ident">open</span> <span class="punct">)</span>
     <span class="ident">sentence</span><span class="punct">[</span><span class="ident">open</span><span class="punct">..</span><span class="ident">close</span><span class="punct">]</span> <span class="punct">=</span> <span class="punct">'</span><span class="string"></span><span class="punct">'</span> <span class="keyword">if</span> <span class="ident">close</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>&#8220;Can you see what this does, Paij-ree?  Any old Smotchkkiss can use this method to take all the incoherent babblings out of your speaking,&#8221; I said.</p>


	<p>And I fed something he said earlier into the method.</p>


<div class='example'><pre><code> <span class="ident">what_he_said</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">But, strangely (em-pithy-dah), 
   I learned upon, played upon (pon-shoo) the 
   organs on my home (oth-rea) planet.</span><span class="punct">&quot;</span> 
 <span class="ident">wipe_mutterings_from</span><span class="punct">(</span> <span class="ident">what_he_said</span> <span class="punct">)</span>
 <span class="ident">print</span> <span class="ident">what_he_said</span></code></pre></div>
	<p>And it came out as a rather plain sentence.</p>


<div class='example'><pre><code> <span class="constant">But</span><span class="punct">,</span> <span class="ident">strangely</span> <span class="punct">,</span> 
 <span class="constant">I</span> <span class="ident">learned</span> <span class="ident">upon</span><span class="punct">,</span> <span class="ident">played</span> <span class="ident">upon</span> <span class="ident">the</span>
 <span class="ident">organs</span> <span class="ident">on</span> <span class="ident">my</span> <span class="ident">home</span> <span class="ident">planet</span><span class="punct">.</span></code></pre></div>
	<p>&#8220;You shouldn&#8217;t use that (wary-to) while loop,&#8221; he said.  &#8220;There are lovelier, (thopt-er), gentler ways.&#8221;</p>


	<p>In the <code><span class="ident">wipe_mutterings_from</span></code> method, I&#8217;m basically searching for opening parentheses.  When I find one, I scan for a closing paren which follows it.  Once I&#8217;ve found both, I replace them and their contents with an empty string.  The <code><span class="keyword">while</span></code> loop continues until all parentheses are gone. The mutterings are removed and the method ends.</p>


	<p>&#8220;Now that I look at this method,&#8221; I said.  &#8220;I see that there are some confusing aspects  and some ways I could do this better.&#8221;  Please don&#8217;t look down on me as your teacher for  writing some of this code.  I figure that it&#8217;s okay to show you some sloppy techniques  to help you work through them with me.  So let&#8217;s.</p>


	<p>Okay, <strong>Confusing Aspect No. 1</strong>: This method cleans a string.  But what if we accidentally give it a <code><span class="constant">File</span></code>?  Or a number?  What happens?  What if we run <code><span class="ident">wipe_mutterings_from</span><span class="punct">(</span> <span class="number">1</span> <span class="punct">)</span></code>?</p>


	<p>If we give <code><span class="ident">wipe_mutterings_from</span></code> the number 1, Ruby will print the following and exit.</p>


<div class='example'><pre><code> <span class="constant">NoMethodError</span><span class="punct">:</span> <span class="ident">undefined</span> <span class="ident">method</span> `<span class="ident">include?</span><span class="punct">'</span><span class="string"> for 1:Fixnum
         from (irb):2:in `wipe_mutterings_from</span><span class="punct">'</span>
         <span class="ident">from</span> <span class="punct">(</span><span class="ident">irb</span><span class="punct">)</span><span class="symbol">:8</span></code></pre></div>
	<p>What you see here is a rather twisted and verbose (but at times very helpful) little fellow called the <strong>backtrace</strong>.  He&#8217;s a wound-up policeman who, at the slightest sign of trouble, immediately apprehends any and all suspects, pinning them against the wall and spelling out their rights so quickly that none can quite hear it all.  But it&#8217;s plain that there&#8217;s a problem.  And, of course, it&#8217;s all a big misunderstanding, right?</p>


	<p>When Ruby reads you these Miranda rights, listen hardest to the beginning.  The first line is often all you need.  In this first line is contained the essential message.  And in the above, the first line is telling us that there is no <code><span class="ident">include?</span></code> method for the number 1. Remember, when we were talking about the <code><span class="ident">reverse</span></code> method in the last chapter?  Back then, I said, &#8220;<strong>a lot of methods are only available with certain types of values</strong>.&#8221;  Both <code><span class="ident">reverse</span></code> and <code><span class="ident">include?</span></code> are methods which work with strings but are meaningless and unavailable for numbers.</p>


	<p>To be clear: the method tries to use to the number.  The method will start with <code><span class="ident">sentence</span></code> set to 1. Then, it hits the second line: <code><span class="keyword">while</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">include?</span> <span class="punct">'</span><span class="string">(</span><span class="punct">'</span></code>.  Numbers have no <code><span class="ident">include?</span></code> method.  Great, the backtrace has shown us where the problem is.  I didn&#8217;t expect anyone to pass in a number, so I&#8217;m using methods that don&#8217;t work with numbers.</p>


	<p><strong>See, this is just it.</strong>  Our method is its own little pocket tool, right?  It acts as its own widget independent of anything else.  To anyone out there using the <code><span class="ident">wipe_mutterings_from</span></code> method, should they pass in a number, they&#8217;ll be tossed this panic message that doesn&#8217;t make sense to them.  They&#8217;ll be asked to poke around inside the method, which really isn&#8217;t their business.  They don&#8217;t know their way around in there.</p>


	<p>Fortunately, we can throw our own errors, our own <strong>exceptions</strong>, which may make more sense to someone who inadvertantly hands the wrong object in for cleaning.</p>


<div class='example'><pre><code> <span class="keyword">def </span><span class="method">wipe_mutterings_from</span><span class="punct">(</span> <span class="ident">sentence</span> <span class="punct">)</span>
   <span class="keyword">unless</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">respond_to?</span> <span class="symbol">:include?</span>
     <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> 
       <span class="punct">&quot;</span><span class="string">cannot wipe mutterings from a <span class="expr">#{ sentence.class }</span></span><span class="punct">&quot;</span> 
   <span class="keyword">end</span>
   <span class="keyword">while</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">include?</span> <span class="punct">'</span><span class="string">(</span><span class="punct">'</span>
     <span class="ident">open</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">index</span><span class="punct">(</span> <span class="punct">'</span><span class="string">(</span><span class="punct">'</span> <span class="punct">)</span>
     <span class="ident">close</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">index</span><span class="punct">(</span> <span class="punct">'</span><span class="string">)</span><span class="punct">',</span> <span class="ident">open</span> <span class="punct">)</span>
     <span class="ident">sentence</span><span class="punct">[</span><span class="ident">open</span><span class="punct">..</span><span class="ident">close</span><span class="punct">]</span> <span class="punct">=</span> <span class="punct">'</span><span class="string"></span><span class="punct">'</span> <span class="keyword">if</span> <span class="ident">close</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>This time, if we pass in a number (again, the number 1), we&#8217;ll get something more sensible.</p>


<div class='example'><pre><code> <span class="constant">ArgumentError</span><span class="punct">:</span> <span class="ident">cannot</span> <span class="ident">wipe</span> <span class="ident">mutterings</span> <span class="ident">from</span> <span class="ident">a</span> <span class="constant">Fixnum</span>
         <span class="ident">from</span> <span class="punct">(</span><span class="ident">irb</span><span class="punct">)</span><span class="symbol">:3:in</span> `<span class="ident">wipe_mutterings_from</span><span class="punct">'</span><span class="string">
         from (irb):12</span></code></pre></div>
	<p>The <code><span class="ident">respond_to?</span></code> method is really nice and I plead that you never forget it&#8217;s there.  The <code><span class="ident">respond_to?</span></code> checks any object to be sure that it has a certain method.  It then gives back a <code><span class="constant">true</span></code> or <code><span class="constant">false</span></code>.  In the above case, the incoming <code><span class="ident">sentence</span></code> object is checked for an <code><span class="ident">include?</span></code> method.  If no <code><span class="ident">include?</span></code> method is found, then we raise the error.</p>


	<p>You might be wondering why I used a symbol with <code><span class="ident">respond_to?</span></code>.  I used a symbol <code><span class="symbol">:include?</span></code> instead of a string <code><span class="punct">'</span><span class="string">include?</span><span class="punct">'</span></code>.  Actually, either will work with <code><span class="ident">respond_to?</span></code>.</p>


	<p>Usually symbols are used when you are passing around the name of a method or any other Ruby construct. It&#8217;s more efficient, but it also catches the eye.  The <code><span class="ident">respond_to?</span></code> asks Ruby to look inside itself and see if a method is available.  We&#8217;re talking to Ruby, so the symbol helps denote that.  It&#8217;s not a big deal, Ruby just recognizes symbols quicker than strings.</p>


	<p>Now, <strong>Confusing Aspect No. 2</strong>: Have you noticed how our method changes the sentence?</p>


<div class='example'><pre><code> <span class="ident">something_said</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">A (gith) spaceship.</span><span class="punct">&quot;</span> 
 <span class="ident">wipe_mutterings_from</span><span class="punct">(</span> <span class="ident">something_said</span> <span class="punct">)</span>
 <span class="ident">print</span> <span class="ident">something_said</span></code></pre></div>
	<p>Did you notice this?  In the first line of the above code, the <code><span class="ident">something_said</span></code> variable contains the string <code><span class="punct">&quot;</span><span class="string">A (gith) spaceship.</span><span class="punct">&quot;</span></code>.  But, after the method invocation, on the third line, we print the <code><span class="ident">something_said</span></code> variable and by then it contains the cleaned string <code><span class="punct">&quot;</span><span class="string">A  spaceship.</span><span class="punct">&quot;</span></code>.</p>


	<p>How does this work?  How does the method change the string?  Shouldn&#8217;t it make a copy of the string before changing it?</p>


	<p>Yes, absolutely, it should!  <strong>It&#8217;s bad manners to change strings like that.</strong>  We&#8217;ve used <code><span class="ident">gsub</span></code> and <code><span class="ident">gsub!</span></code> in the last chapter.  Do you remember which of those two methods is a <strong>destructive method</strong>, which changes strings directly?</p>


	<p>Either we need to call this method <code><span class="ident">wipe_mutterings_from!</span></code> (as a courtesy to all the other good folks out there that might use this method) or change the method to work on a copy of the string rather than the real thing.  Which is an easy change!  We just need to <code><span class="ident">dup</span></code> the string.</p>


<div class='example'><pre><code> <span class="keyword">def </span><span class="method">wipe_mutterings_from</span><span class="punct">(</span> <span class="ident">sentence</span> <span class="punct">)</span>
   <span class="keyword">unless</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">respond_to?</span> <span class="symbol">:include?</span>
     <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> 
       <span class="punct">&quot;</span><span class="string">cannot wipe mutterings from a <span class="expr">#{ sentence.class }</span></span><span class="punct">&quot;</span> 
   <span class="keyword">end</span>
   <span class="ident">sentence</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">dup</span>
   <span class="keyword">while</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">include?</span> <span class="punct">'</span><span class="string">(</span><span class="punct">'</span>
     <span class="ident">open</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">index</span><span class="punct">(</span> <span class="punct">'</span><span class="string">(</span><span class="punct">'</span> <span class="punct">)</span>
     <span class="ident">close</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">index</span><span class="punct">(</span> <span class="punct">'</span><span class="string">)</span><span class="punct">',</span> <span class="ident">open</span> <span class="punct">)</span>
     <span class="ident">sentence</span><span class="punct">[</span><span class="ident">open</span><span class="punct">..</span><span class="ident">close</span><span class="punct">]</span> <span class="punct">=</span> <span class="punct">'</span><span class="string"></span><span class="punct">'</span> <span class="keyword">if</span> <span class="ident">close</span>
   <span class="keyword">end</span>
   <span class="ident">sentence</span>
 <span class="keyword">end</span></code></pre></div>
	<p>The <code><span class="ident">dup</span></code> method makes a copy of any object.  Look at that line we added again on its own:</p>


<div class='example'><pre><code> <span class="ident">sentence</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">dup</span></code></pre></div>
	<p>What a peculiar line of code.  How does <code><span class="ident">sentence</span></code> become a copy of <code><span class="ident">sentence</span></code>? Does it erase itself?  What happens to the original <code><span class="ident">sentence</span></code>?  Does it disappear?</p>


	<p>Remember that variables are just nicknames.  When you see <code><span class="ident">sentence</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">A (gith) spaceship.</span><span class="punct">&quot;</span></code>, you see Ruby creating a string and then giving that string a nickname.</p>


	<p>Likewise, when you see <code><span class="ident">sentence</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">dup</span></code>, you see Ruby creating a new string and then giving that string a nickname.  This is handy inside your method because now <code><span class="ident">sentence</span></code> is a nickname for a new copy of the string that you can safely use <strong>without changing the string that was passed into the method</strong>.</p>


	<p>You&#8217;ll see plenty of examples of variable names being reused.</p>


<div class='example'><pre><code> <span class="ident">x</span> <span class="punct">=</span> <span class="number">5</span>
 <span class="ident">x</span> <span class="punct">=</span> <span class="ident">x</span> <span class="punct">+</span> <span class="number">1</span>
 <span class="comment"># x now equals 6</span>

 <span class="ident">y</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">Endertromb</span><span class="punct">&quot;</span> 
 <span class="ident">y</span> <span class="punct">=</span> <span class="ident">y</span><span class="punct">.</span><span class="ident">length</span>
 <span class="comment"># y now equals 10</span>

 <span class="ident">z</span> <span class="punct">=</span> <span class="symbol">:include?</span>
 <span class="ident">z</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">a string</span><span class="punct">&quot;.</span><span class="ident">respond_to?</span> <span class="ident">z</span>
 <span class="comment"># z now equals true</span></code></pre></div>
	<p>And, yes, sometimes objects disappear.  <strong>If you can&#8217;t get to an object through a variable, then Ruby will figure you are done with it and will get rid of it.</strong>  Periodically, Ruby sends out its <strong>garbage collector</strong> to set these objects free.  Every object is kept in your computer&#8217;s memory until the garbage collector gets rid of it.</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>An Excerpt from The Scarf Eaters</h2>
        

        <p>(<em>from Chapter <span class="caps">VII</span>: When Push Comes to Shove&#8212;or Love</em>.)</p>


	<p>&#8220;Never say my name again!&#8221; screamed Chester, and with the same gusto, he turned back to the <strong>File > Publish Settings&#8230;</strong> dialog to further optimize his movie down to a  measley 15k.</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Oh, and one more thing about <code><span class="ident">dup</span></code>.  Some things can&#8217;t be dup&#8217;d.  Numbers, for instance.   Symbols (which look like <code><span class="symbol">:death</span></code>) are identical when spelled the same.  Like numbers.</p>


	<p>Also, some of the special variables: <code><span class="constant">nil</span></code>, <code><span class="constant">true</span></code>, <code><span class="constant">false</span></code>.  These are things that Ruby won&#8217;t let you alter, so there&#8217;s so point making a copy anyway.  I mean, imagine if you could change <code><span class="constant">false</span></code> to be <code><span class="constant">true</span></code>.  The whole thing becomes a lie.</p>


	<p>Perhaps <strong>Confusing Aspect No. 3</strong> is a simple one.  I&#8217;m using those square brackets on the  string.  I&#8217;m treating the string like it&#8217;s an Array or Hash.  I can do that.  Because strings have a <code><span class="punct">[]</span></code> method.</p>


	<p>When used on a string, the square brackets will extract part of the string.  Again, slots for a forklift&#8217;s prongs.  The string is a long shelf and the forklift is pulling out a slab of the string.</p>


	<p>Inside the brackets, we pass the <em>index</em>.  It&#8217;s the label we&#8217;ve placed right between the prongs where the worker can see it.  When it comes to strings, we can use a variety of objects as our  index.</p>


<div class='example'><pre><code> <span class="ident">str</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">A string is a long shelf of letters and spaces.</span><span class="punct">&quot;</span> 
 <span class="ident">puts</span> <span class="ident">str</span><span class="punct">[</span><span class="number">0</span><span class="punct">]</span>       <span class="comment"># prints 65 (the character code for an 'A')</span>
 <span class="ident">puts</span> <span class="ident">str</span><span class="punct">[</span><span class="number">0</span><span class="punct">..-</span><span class="number">1</span><span class="punct">]</span>   <span class="comment"># prints 'A string is a long shelf of letters and spaces.'</span>
 <span class="ident">puts</span> <span class="ident">str</span><span class="punct">[</span><span class="number">1</span><span class="punct">..-</span><span class="number">2</span><span class="punct">]</span>   <span class="comment"># prints ' string is a long shelf of letters and spaces'</span>
 <span class="ident">puts</span> <span class="ident">str</span><span class="punct">[</span><span class="number">1</span><span class="punct">,</span> <span class="number">3</span><span class="punct">]</span>    <span class="comment"># prints 'A s'</span>
 <span class="ident">puts</span> <span class="ident">str</span><span class="punct">['</span><span class="string">shelf</span><span class="punct">']</span> <span class="comment"># prints 'shelf'</span></code></pre></div>
	<p>Alright, the last <strong>Confusing Aspect No. 4</strong>: this method can be sent into an endless loop. You can give this method a string which will cause the method to hang and never come back. Take a look at the method.  Can you throw in a muddy stick to clog the loop?</p>


<div class='example'><pre><code> <span class="keyword">def </span><span class="method">wipe_mutterings_from</span><span class="punct">(</span> <span class="ident">sentence</span> <span class="punct">)</span>
   <span class="keyword">unless</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">respond_to?</span> <span class="symbol">:include?</span>
     <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> 
       <span class="punct">&quot;</span><span class="string">cannot wipe mutterings from a <span class="expr">#{ sentence.class }</span></span><span class="punct">&quot;</span> 
   <span class="keyword">end</span>
   <span class="ident">sentence</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">dup</span>
   <span class="keyword">while</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">include?</span> <span class="punct">'</span><span class="string">(</span><span class="punct">'</span>
     <span class="ident">open</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">index</span><span class="punct">(</span> <span class="punct">'</span><span class="string">(</span><span class="punct">'</span> <span class="punct">)</span>
     <span class="ident">close</span> <span class="punct">=</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">index</span><span class="punct">(</span> <span class="punct">'</span><span class="string">)</span><span class="punct">',</span> <span class="ident">open</span> <span class="punct">)</span>
     <span class="ident">sentence</span><span class="punct">[</span><span class="ident">open</span><span class="punct">..</span><span class="ident">close</span><span class="punct">]</span> <span class="punct">=</span> <span class="punct">'</span><span class="string"></span><span class="punct">'</span> <span class="keyword">if</span> <span class="ident">close</span>
   <span class="keyword">end</span>
   <span class="ident">sentence</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Here, give the muddy stick a curve before you jam it.</p>


<div class='example'><pre><code> <span class="ident">muddy_stick</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">Here's a ( curve.</span><span class="punct">&quot;</span> 
 <span class="ident">wipe_mutterings_from</span><span class="punct">(</span> <span class="ident">muddy_stick</span> <span class="punct">)</span></code></pre></div>
	<p>Why does the method hang?  Well, the <code><span class="keyword">while</span></code> loop waits until all the open parentheses are gone before it stops looping.  And it only replaces open parentheses that have a matching closing parentheses.  So, if no closing paren is found, the open paren won&#8217;t be replaced and the <code><span class="keyword">while</span></code> will never be satisfied.</p>


	<p>How would you rewrite this method?  Me, I know my way around Ruby, so I&#8217;d use a regular expression.</p>


<div class='example'><pre><code> <span class="keyword">def </span><span class="method">wipe_mutterings_from</span><span class="punct">(</span> <span class="ident">sentence</span> <span class="punct">)</span>
   <span class="keyword">unless</span> <span class="ident">sentence</span><span class="punct">.</span><span class="ident">respond_to?</span> <span class="symbol">:gsub</span>
     <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> 
       <span class="punct">&quot;</span><span class="string">cannot wipe mutterings from a <span class="expr">#{ sentence.class }</span></span><span class="punct">&quot;</span> 
   <span class="keyword">end</span>
   <span class="ident">sentence</span><span class="punct">.</span><span class="ident">gsub</span><span class="punct">(</span> <span class="punct">/</span><span class="regex"><span class="escape">\(</span>[-<span class="escape">\w</span>]+<span class="escape">\)</span></span><span class="punct">/,</span> <span class="punct">'</span><span class="string"></span><span class="punct">'</span> <span class="punct">)</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Do your best to think through your loops.  It&#8217;s especially easy for <code><span class="keyword">while</span></code> and <code><span class="keyword">until</span></code> loops to get out of hand.  Best to use an iterator.  And we&#8217;ll get to regular expressions in time.</p>


	<p>In summary, here&#8217;s what we&#8217;ve learned about writing methods:</p>


<ol>
	<li>Don&#8217;t be surprised if people pass unexpected objects into your methods. If you absolutely can&#8217;t use what they give you, <code><span class="keyword">raise</span></code> an error.</li>
	<li>It&#8217;s poor etiquette to change objects your method is given.  Use <code><span class="ident">dup</span></code> to make a copy.  Or find a method like <code><span class="ident">gsub</span></code> that automatically makes a copy as it does its job.</li>
	<li>The square brackets can be used to lookup parts inside any <code><span class="constant">Array</span></code>, <code><span class="constant">Hash</span></code> or <code><span class="constant">String</span></code> objects, as these objects provide a <code><span class="punct">[]</span></code> method.  Also, since these objects provide a <code><span class="punct">[]=</span></code> method, the square brackets can be used in assignment (on the left-hand side of the equals sign) to change the parts of those objects.</li>
	<li>Watch for runaway loops.  Avoid <code><span class="keyword">while</span></code> and <code><span class="keyword">until</span></code> if you can.</li>
</ol>

	<h3>The Mechanisms of Name-Calling</h3>

	<p style="float:right"><img src="i/my.daughters.organ-2.gif" title="Cat salesmen from the sky." alt="Cat salesmen from the sky." /></p>


	<p>Forthwith there is a rustling in the trees behind Paij-ree&#8217;s house and it turns out to be a man falling from the sky.  His name is Doug and he sells cats.</p>


	<p>So, just as he comes into to view, when his shadow (and the shadows of the cats tied to his foot) obscures the bird on the lawn that we&#8217;re trying to hit with a racquetball,  as he&#8217;s squeezing a wisp of helium from his big balloon, we shout, &#8220;Hello, Doug!&#8221;</p>


	<p>And he says, &#8220;Hello, Gonk-ree!  Hello, Why!&#8221;</p>


	<p>Paij-ree checks his pockets to be sure he has the dollar-twenty-seven he&#8217;ll need in order to buy the three cats he&#8217;ll need to keep the furnace stoked and the satellite dish turning.  These cats generate gobs of static once Paij-ree tosses them in the generator, where they&#8217;ll be outnumbered by the giant glass rods, which caress the cats continually&#8212;But, wait!  Did you see how the cat broker called him Gonk-ree?</p>


	<p>And he calls him Gonk-ree in the morning and Gonk-plo at night.</p>


	<p>So the suffix is definitely subject to the sunlight.  As far as I can tell, the prefix indicates the namecaller&#8217;s relationship to Paij-ree.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">String</span>

   <span class="comment"># The parts of my daughter's organ</span>
   <span class="comment"># instructor's name.</span>
   <span class="attribute">@@syllables</span> <span class="punct">=</span> <span class="punct">[</span>
     <span class="punct">{</span> <span class="punct">'</span><span class="string">Paij</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">Personal</span><span class="punct">',</span>
       <span class="punct">'</span><span class="string">Gonk</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">Business</span><span class="punct">',</span>
       <span class="punct">'</span><span class="string">Blon</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">Slave</span><span class="punct">',</span>
       <span class="punct">'</span><span class="string">Stro</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">Master</span><span class="punct">',</span>
       <span class="punct">'</span><span class="string">Wert</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">Father</span><span class="punct">',</span>
       <span class="punct">'</span><span class="string">Onnn</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">Mother</span><span class="punct">'</span> <span class="punct">},</span>
     <span class="punct">{</span> <span class="punct">'</span><span class="string">ree</span><span class="punct">'</span>  <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">AM</span><span class="punct">',</span>
       <span class="punct">'</span><span class="string">plo</span><span class="punct">'</span>  <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">PM</span><span class="punct">'</span> <span class="punct">}</span>
   <span class="punct">]</span>

   <span class="comment"># A method to determine what a</span>
   <span class="comment"># certain name of his means.</span>
   <span class="keyword">def </span><span class="method">name_significance</span>
     <span class="ident">parts</span> <span class="punct">=</span> <span class="constant">self</span><span class="punct">.</span><span class="ident">split</span><span class="punct">(</span> <span class="punct">'</span><span class="string">-</span><span class="punct">'</span> <span class="punct">)</span>
     <span class="ident">syllables</span> <span class="punct">=</span> <span class="attribute">@@syllables</span><span class="punct">.</span><span class="ident">dup</span>
     <span class="ident">signif</span> <span class="punct">=</span> <span class="ident">parts</span><span class="punct">.</span><span class="ident">collect</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">p</span><span class="punct">|</span>
       <span class="ident">syllables</span><span class="punct">.</span><span class="ident">shift</span><span class="punct">[</span><span class="ident">p</span><span class="punct">]</span>
     <span class="keyword">end</span>
     <span class="ident">signif</span><span class="punct">.</span><span class="ident">join</span><span class="punct">(</span> <span class="punct">'</span><span class="string"> </span><span class="punct">'</span> <span class="punct">)</span>
   <span class="keyword">end</span>

 <span class="keyword">end</span></code></pre></div>
	<p>Now I&#8217;ve gone beyond just showing you sloppy code.  Here be a grave debauchery and a crime against nature.  A crime most languages won&#8217;t allow you to commit.  We&#8217;re changing the <code><span class="constant">String</span></code>, <strong>one of the core classes of Ruby</strong>!</p>


	<p>&#8220;I know this is a bit dangerous,&#8221; I said, when I passed this one under Paij-ree&#8217;s nose. &#8220;I hope nobody gets hurt.&#8221;</p>


	<p>&#8220;Every Smotchkkiss must taste what this (kep-yo-iko) danger does,&#8221; he said.  &#8220;Dogs and logs and swampy bogs (kul-ip), all must be tasted.&#8221;  And he took a swig of his Beagle Berry marsh drink.</p>


	<p>So what is it that I&#8217;m adding to the <code><span class="constant">String</span></code> class?  Two things: a class variable and a method.  A normal <strong>instance method</strong>.</p>


	<p>I like to look at the <strong>at</strong> symbol as a character meaning <strong>attribute</strong>.  The <strong>double at</strong> stands for <strong>attribute all</strong>.  A class variable.  All instances of a class can look at this variable and it is the same for all of them.  The <code><span class="attribute">@syllables</span></code> variable is an Array that can now be used inside the String class.</p>


	<p>The new method is <code><span class="ident">name_significance</span></code> and this new method can be used with any string.</p>


	<blockquote>
		<p><code><span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Paij-ree</span><span class="punct">&quot;.</span><span class="ident">name_significance</span></code> prints out <code><span class="constant">Personal</span> <span class="constant">AM</span></code>.</p>
	</blockquote>

	<p>As you can see, Paij-ree is a personal name.  A name friends use in the early hours.</p>


	<p>Make sure you see the line of code which uses <code><span class="constant">self</span></code>.  This is a special variable, a variable which represents the object whose method you are calling.  To simplify things a bit, let&#8217;s try making a method which breaks up a string on its dashes.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">String</span>
   <span class="keyword">def </span><span class="method">dash_split</span>
     <span class="constant">self</span><span class="punct">.</span><span class="ident">split</span><span class="punct">(</span> <span class="punct">'</span><span class="string">-</span><span class="punct">'</span> <span class="punct">)</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Again, here&#8217;s a method which can be used with any string.</p>


	<blockquote>
		<p><code><span class="punct">&quot;</span><span class="string">Gonk-plo</span><span class="punct">&quot;.</span><span class="ident">dash_split</span></code> return the Array <code><span class="punct">['</span><span class="string">Gonk</span><span class="punct">',</span> <span class="punct">'</span><span class="string">plo</span><span class="punct">']</span></code>.</p>
	</blockquote>

	<p>Using <code><span class="constant">self</span></code> marks the beginning of crossing over into many of the more advanced ideas in Ruby. This is definition language.  You&#8217;re defining a method, designing it before it gets used.  You&#8217;re preparing for the existence of an object which uses that method.  You&#8217;re saying, &#8220;When <code><span class="ident">dash_split</span></code>  gets used, there will be a string at that time which is the one we&#8217;re dash-splitting.  And <code><span class="constant">self</span></code> is a  special variable which refers to that string.&#8221;</p>


	<p>Ruby is a knockout definition language.  A succulent and brain-splitting discussion is coming your way deeper in this book.</p>


	<p>Most often you won&#8217;t need to use <code><span class="constant">self</span></code> explicitly, since you can call methods directly from inside other method definitions.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">String</span>
   <span class="keyword">def </span><span class="method">dash_split</span><span class="punct">;</span> <span class="ident">split</span><span class="punct">(</span> <span class="punct">'</span><span class="string">-</span><span class="punct">'</span> <span class="punct">);</span> <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>In the <code><span class="ident">name_significance</span></code> method, find the loop.  Learning about <code><span class="constant">Array</span><span class="comment">#collect</span></code> is essential. Let&#8217;s look close.</p>


<div class='example'><pre><code> <span class="ident">signif</span> <span class="punct">=</span> <span class="ident">parts</span><span class="punct">.</span><span class="ident">collect</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">p</span><span class="punct">|</span>
   <span class="ident">syllables</span><span class="punct">.</span><span class="ident">shift</span><span class="punct">[</span><span class="ident">p</span><span class="punct">]</span>
 <span class="keyword">end</span></code></pre></div>
	<p>The <code><span class="ident">parts</span></code> Array contains the separated name.  <code><span class="punct">['</span><span class="string">Paij</span><span class="punct">',</span> <span class="punct">'</span><span class="string">plo</span><span class="punct">']</span></code>, for instance.  We&#8217;re iterating through each item in that Array with <code><span class="ident">collect</span></code>.  But <code><span class="ident">collect</span></code> steps beyond what <code><span class="ident">each</span></code> does.  Like <code><span class="ident">each</span></code>, collect slides each item down the chute as a block variable.  And then, at the end of the block, <code><span class="ident">collect</span></code> <strong>keeps the answer the block gives back and adds it to a new Array</strong>.  The <code><span class="ident">collect</span></code> method is the perfect way of building a new Array which is based on the items in an existing Array.</p>


	<p>Doug has three cats for sale.  One is twelve cents, one is sixty-three cents, one is nine cents. Let&#8217;s see how much each cat would cost if we added a 20% tip.</p>


<div class='example'><pre><code> <span class="ident">catsandtips</span> <span class="punct">=</span> <span class="punct">[</span><span class="number">0.12</span><span class="punct">,</span> <span class="number">0.63</span><span class="punct">,</span> <span class="number">0.09</span><span class="punct">].</span><span class="ident">collect</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">catcost</span><span class="punct">|</span> <span class="ident">catcost</span> <span class="punct">+</span> <span class="punct">(</span> <span class="ident">catcost</span> <span class="punct">*</span> <span class="number">0.20</span> <span class="punct">)</span> <span class="punct">}</span></code></pre></div>
	<p>I say Paij-ree&#8217;s property is a very charming section of woods when it&#8217;s not raining cats and Doug. For many days, Paij-ree and I camped in tents by the river behind his house, subsisting on smoked blackbird and whittling little sleeping indians by the dusklight.  On occassion he would lose a game of spades and I knew his mind was distracted, thinking of Endertromb.  All of this must have been stirring inside of him for sometime.  I was the first ear he&#8217;d ever had.</p>


	<p>&#8220;I just came from Ambrose,&#8221; I said.  &#8220;Sort of my own underground home, a place where elves strive to perfect animals.&#8221;</p>


	<p>He mumbled and nodded.  &#8220;You can&#8217;t be (poth-in-oin) part of (in) such things.&#8221;</p>


	<p>&#8220;You think we will fail?&#8221;</p>


	<p>&#8220;I (preep) have been there before,&#8221; he said.  And then, he spoke of the Lotteries.</p>

    
    
        
        <a name="section4" />
        <h2>4. The Goat Wants to Watch a Whole Film</h2>

        <p><img src="i/the.goat-1.gif" title="Blinky, winky, a goat... awakes..." alt="Blinky, winky, a goat... awakes..." /></p>


	<p>The elevator had opened into a green room full of shelves and file cabinets.  Reels of tape and film canisters and video tape everywhere.  Dr. Cham hadn&#8217;t a clue what most of it was.  All he saw was a big, futuristic mess.</p>


	<p>He called out again, stumbling through alleys of narrow shelves,  &#8220;Hello-o-o??  I&#8217;m looking for intellegent life!  I&#8217;m a space traveller!&#8221;  He tripped when his foot slid right into a <span class="caps">VCR</span> slot. &#8220;Any other beings I can communicate with?&#8221;</p>


	<p>Hand cupped around mouth, he yelled, &#8220;Hello-o-o?&#8221;</p>


	<p>&#8220;Crying out loud.&#8221;  The sleepy goat came tromping down the aisle.</p>


	<p><img src="i/dr.cham-5.gif" title="The goat already knows Dr. Cham." alt="The goat already knows Dr. Cham." /></p>


	<p>&#8220;I hate that book,&#8221; said the goat.  &#8220;I believe the author is disingenuous.&#8221;</p>


	<p>&#8220;Really?&#8221; asked Dr. Cham.</p>


	<p>&#8220;I&#8217;m sure it&#8217;s all true.  It&#8217;s just so heavily embellished.  I&#8217;m like:  Enough already.   I get it.  Cut it out.&#8221;</p>


	<p>&#8220;I&#8217;m not quite sure what to make of it,&#8221; said the Doctor.  &#8220;It seems like an honest effort. I actually wrote something in Ruby back there.&#8221;</p>


	<p>&#8220;It doesn&#8217;t give goats a very good name,&#8221; said the goat.</p>


	<p>&#8220;But you are the only goat in the book,&#8221; said the Doctor.</p>


	<p>&#8220;And I&#8217;m totally misquoted.&#8221;</p>


	<p><img src="i/dr.cham-6.gif" title="The mechanics behind devouring Dr. Cham." alt="The mechanics behind devouring Dr. Cham." /></p>


	<p>The goat closed his mouth and Dr. Cham held his heart.</p>


	<p>&#8220;I&#8217;m actually very literate,&#8221; said the goat.  &#8220;Albeit, more recently, I&#8217;ve switched to movies.  I love foreign films.  One of my relatives just brough back <em>Ishtar</em> from your planet.  Wow, that was excellent.&#8221;</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        

        <div class='example'><pre><code> <span class="ident">we</span> <span class="ident">want</span> <span class="ident">a</span> <span class="ident">tambourine!</span>
            <span class="punct">/</span><span class="regex">
           |  we want all a tambourine!
           |      </span><span class="punct">/</span>
           \<span class="ident">__</span>  <span class="punct">|</span>
         <span class="punct">/</span><span class="regex">  o o <span class="escape">\_</span>_</span><span class="punct">/\</span><span class="ident">__</span><span class="punct">/\</span><span class="ident">_</span>
       <span class="punct">/</span><span class="regex">.           <span class="escape">\ </span>o o <span class="escape">\_</span>___
        </span><span class="punct">/'</span><span class="string">      ----/          \
 _____ /  </span><span class="punct">'</span>    <span class="punct">/</span> <span class="punct">/</span><span class="regex">.<span class="escape">\\</span>   #------</span><span class="punct">/</span>
        <span class="punct">/</span><span class="regex">     </span><span class="punct">/</span>        <span class="punct">/</span>     \\
              <span class="punct">/</span><span class="regex">       </span><span class="punct">///</span><span class="regex">
       </span><span class="punct">/</span><span class="ident">so</span>               \
            <span class="punct">/</span><span class="regex"><span class="escape">\ </span>  <span class="escape">\m</span>e time<span class="escape">\\</span>..
        </span><span class="punct">/</span><span class="ident">pp</span><span class="punct">/</span>  \<span class="ident">s</span> <span class="ident">these</span> <span class="ident">pictur\\</span>
       <span class="punct">/</span><span class="regex">es</span><span class="punct">/</span>   \<span class="ident">don</span><span class="punct">'</span><span class="string">t w\ \ork out\
      ***      *** right but i
        think this time
           they did
             ooo o
              oo
             o
          o
       {o}
    ^</span></code></pre></div>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>&#8220;I haven&#8217;t been to my planet in a long time.  It would be difficult to consider it my home at this stage.&#8221;</p>


	<p>&#8220;Well, Warren Beatty is delightful.  His character is basically socially crippled.  He actually tries to kill himself, but Dustin Hoffman sits in the window sill and starts crying and singing this totally hilarious heartbreak song.  I&#8217;ve got it here, you should see it.&#8221;</p>


	<p>&#8220;Can I get something to eat?&#8221; asked the Doctor.  And he still felt filthy.</p>


	<p>&#8220;How about we watch a film and you can have a buttermelon with tentacles?&#8221; said the goat.</p>


	<p>So, they worked their way back toward the goat&#8217;s projector.  Back by the freezer locker, they sat on a giant rug and broke off the appendages of frozen buttermelons.  The shell was solid, but once it cracked, rich fruit cream was in abundance.  Sweet to taste and a very pleasant scent.</p>


	<p>&#8220;First film, you&#8217;ve got to see,&#8221; said the goat.  &#8220;Locally filmed and produced.  I&#8217;m good friends with the lady who did casting.  Dated her for awhile.  Knew everyone who was going to play the different roles long before it was announced.&#8221;</p>


	<p>The goat set the projector by Dr. Cham.  &#8220;I&#8217;ve got the music on the surround sound. You can man the knob.&#8221;</p>


	<p><img src="i/filmstrip-1.gif" title="The Originals and their lonesome planet." alt="The Originals and their lonesome planet." /></p>


	<p>Dr. Cham&#8217;s mind wandered at this point in the presentation, just as the land war mounted between the two throngs of animal settlers.  The details of their wars and campaigns continued to consume the spool of transparent film that Dr. Cham was feeding through the projector.</p>


	<p>War after war after war.  The Sieging of Elmer Lake.  The Last Stand of Newton P. Giraffe and Sons.  Dog Invasion of Little Abandoned Cloud.  No animals died in  these wars.  Most often an attack consisted of bopping another animal on the head.  And they philipped each other&#8217;s noses.  But, believe me, it was humiliating.</p>


	<p>Blasted crying shame.  Things could have worked out.</p>


	<h3>The Birth of an Object</h3>

	<p>&#8220;Don&#8217;t worry,&#8221; said the goat, anxious to sway Dr. Cham&#8217;s attention back to the film.  &#8220;Things <em>do</em> work out.&#8221;</p>


	<p>In Ruby, the Object is the very center of all things.  It is The Original.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">ToastyBear</span> <span class="punct">&lt;</span> <span class="constant">Object</span><span class="punct">;</span> <span class="keyword">end</span></code></pre></div>
	<p>The angle bracket indicates <strong>inheritance</strong>.  This means that the new <code><span class="constant">ToastyBear</span></code> class is a new class based on the <code><span class="constant">Object</span></code> class.  Every method that <code><span class="constant">Object</span></code> has will be available in <code><span class="constant">ToastyBear</span></code>.  Constants available in <code><span class="constant">Object</span></code> will be available in <code><span class="constant">ToastyBear</span></code>.</p>


	<p>But every object inherits from <code><span class="constant">Object</span></code>.  The code&#8230;</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">ToastyBear</span><span class="punct">;</span> <span class="keyword">end</span></code></pre></div>
	<p>Is identical to&#8230;</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">ToastyBear</span> <span class="punct">&lt;</span> <span class="constant">Object</span><span class="punct">;</span> <span class="keyword">end</span></code></pre></div>
	<p>Inheritance is handy.  You can create species of objects which relate to each other. Often, when you&#8217;re dissecting a problem, you&#8217;ll come across various objects which share attributes.  You can save yourself work by inheriting from classes which already solve part of that problem.</p>


	<p>You may have a <code><span class="constant">UnitedStatesAddress</span></code> class which stores the address, city, state, and zip code for someone living in the United States.  When you start storing addresses from England, you could add a <code><span class="constant">UnitedKingdomAddress</span></code> class.  If you then ensure that both addresses inherit from a parent <code><span class="constant">Address</span></code> class, you can design your mailing software to accept any kind of address.</p>


<div class='example'><pre><code> <span class="keyword">def </span><span class="method">mail_them_a_kit</span><span class="punct">(</span> <span class="ident">address</span> <span class="punct">)</span>
   <span class="keyword">unless</span> <span class="ident">address</span><span class="punct">.</span><span class="ident">is_a?</span> <span class="constant">Address</span>
     <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">No Address object found.</span><span class="punct">&quot;</span> 
   <span class="keyword">end</span>
   <span class="ident">print</span> <span class="ident">address</span><span class="punct">.</span><span class="ident">formatted</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Also, inheritance is great if you want to override certain behaviours in a class. For example, perhaps you want to make your own slight variation to the <code><span class="constant">Array</span></code> class. You want to enhance the <code><span class="ident">join</span></code> method.  But if you change <code><span class="constant">Array</span><span class="comment">#join</span></code> directly, you will affect other classes in Ruby that use Arrays.</p>


	<p>So you start your own class called <code><span class="constant">ArrayMine</span></code>, which is based on The Original <code><span class="constant">Array</span></code>.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">ArrayMine</span> <span class="punct">&lt;</span> <span class="constant">Array</span>
   <span class="comment"># Build a string from this array, formatting each entry</span>
   <span class="comment"># then joining them together.</span>
   <span class="keyword">def </span><span class="method">join</span><span class="punct">(</span> <span class="ident">sep</span> <span class="punct">=</span> <span class="global">$,</span><span class="punct">,</span> <span class="ident">format</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">%s</span><span class="punct">&quot;</span> <span class="punct">)</span>
     <span class="ident">collect</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">item</span><span class="punct">|</span>
       <span class="ident">sprintf</span><span class="punct">(</span> <span class="ident">format</span><span class="punct">,</span> <span class="ident">item</span> <span class="punct">)</span>
     <span class="keyword">end</span><span class="punct">.</span><span class="ident">join</span><span class="punct">(</span> <span class="ident">sep</span> <span class="punct">)</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p><code><span class="constant">ArrayMine</span></code> is now a custom <code><span class="constant">Array</span></code> class with its own <code><span class="ident">join</span></code> method.  <code><span class="constant">Array</span></code> is the <strong>superclass</strong> of <code><span class="constant">ArrayMine</span></code>.  Every object has a <code><span class="ident">superclass</span></code> method where you can verify this relationship.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">ArrayMine</span><span class="punct">.</span><span class="ident">superclass</span>
   <span class="punct">=&gt;</span> <span class="constant">Array</span></code></pre></div>
	<p>Perfect.  We manage a hotel and we have an <code><span class="constant">Array</span></code> of our room sizes: <code><span class="punct">[</span><span class="number">3</span><span class="punct">,</span> <span class="number">4</span><span class="punct">,</span> <span class="number">6</span><span class="punct">]</span></code>. Let&#8217;s get it nicely printed for a brochure.</p>


<div class='example'><pre><code> <span class="ident">rooms</span> <span class="punct">=</span> <span class="constant">ArrayMine</span><span class="punct">[</span><span class="number">3</span><span class="punct">,</span> <span class="number">4</span><span class="punct">,</span> <span class="number">6</span><span class="punct">]</span>
 <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">We have </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">rooms</span><span class="punct">.</span><span class="ident">join</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">, </span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">%d bed</span><span class="punct">&quot;</span> <span class="punct">)</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string"> rooms available.</span><span class="punct">&quot;</span></code></pre></div>
	<p>Which prints, &#8220;We have 3 bed, 4 bed, 6 bed rooms available.&#8221;</p>


	<p>Dr. Cham was looking around for a bathroom, but archival video tape was everywhere. He eventually found a place, it may have been a bathroom.  It had a metal bin. More importantly, it was dark and out of eyesight.</p>


	<p>While he&#8217;s in there, let me add that while The Originals slaughtered The Invaders to prove their rights as First Creatures, the Ruby Object doesn&#8217;t have any such dispute.  It is the absolute king Object the First.</p>


	<p>Watch.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Class</span><span class="punct">.</span><span class="ident">superclass</span>
   <span class="punct">=&gt;</span> <span class="constant">Module</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Kernel</span><span class="punct">.</span><span class="keyword">class
   </span><span class="class">=&gt;</span> <span class="constant">Module</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Module</span><span class="punct">.</span><span class="ident">superclass</span>
   <span class="punct">=&gt;</span> <span class="constant">Object</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Object</span><span class="punct">.</span><span class="ident">superclass</span>
   <span class="punct">=&gt;</span> <span class="constant">nil</span></code></pre></div>
	<p>Even <code><span class="constant">Class</span></code> is an <code><span class="constant">Object</span></code>!  See, although classes are the definition language for objects, we still call class methods on them and treat them like objects occassionally.  It may seem like a dizzying circle, but it&#8217;s truly a very strict parentage.  And it ensures that when you alter the <code><span class="constant">Object</span></code>, you alter <strong>everything in Ruby</strong>.  Which is impossibly scary and all-powerful and cataclysmic and awesome!  <strong>Ruby does not restrict you, my sister, my brother!</strong></p>


	<p>Between <code><span class="constant">Class</span></code> and <code><span class="constant">Object</span></code>, do you see <code><span class="constant">Module</span></code>?  If <code><span class="constant">Object</span></code> is the king, the one who has sired every other part of Ruby, then <code><span class="constant">Module</span></code> is the poor waifish nun, shielding and protecting all her little Ruby townspeople children.  (To complete the analogy: <code><span class="constant">Class</span></code> is the village school teacher and <code><span class="constant">Kernel</span></code> is the self-important colonel.)</p>


	<p>The whole point of <code><span class="constant">Module</span></code>&#8217;s existence is to give food and shelter to code.  Methods can stay dry under <code><span class="constant">Module</span></code>&#8217;s shawl.  <code><span class="constant">Module</span></code> can hold classes and constants and  variables of any kind.</p>


	<p>&#8220;But what does a Module <em>do</em>?&#8221; you ask.  &#8220;How is it gainfully employed??&#8221;</p>


	<p>&#8220;That&#8217;s all it does!!&#8221; I retort, stretching out my open palms in the greatest expression of futility known to man.  &#8220;Now hear me <del>- for I will never speak it again &#8211; </del> that Module Mother Superior has given these wretched objects a place to stay!!&#8221;</p>


<div class='example'><pre><code> <span class="comment"># See, here is the module -- where else could our code possibly stay?</span>
 <span class="keyword">module </span><span class="module">WatchfulSaintAgnes</span>

   <span class="comment"># A CONSTANT is laying here by the doorway.  Fine.</span>
   <span class="constant">TOOTHLESS_MAN_WITH_FORK</span> <span class="punct">=</span> <span class="punct">['</span><span class="string">man</span><span class="punct">',</span> <span class="punct">'</span><span class="string">fork</span><span class="punct">',</span> <span class="punct">'</span><span class="string">exposed gums</span><span class="punct">']</span>

   <span class="comment"># A Class is eating, living well in the kitchen.</span>
   <span class="keyword">class </span><span class="class">FatWaxyChild</span><span class="punct">;</span> <span class="keyword">end</span>

   <span class="comment"># A Method is hiding back in the banana closet, God knows why.</span>
   <span class="keyword">def </span><span class="method">timid_foxfaced_girl</span><span class="punct">;</span> <span class="punct">{'</span><span class="string">please</span><span class="punct">'</span> <span class="punct">=&gt;</span> <span class="punct">'</span><span class="string">i want an acorn please</span><span class="punct">'};</span> <span class="keyword">end</span>

 <span class="keyword">end</span></code></pre></div>
	<p>Now you have to go through Saint Agnes to find them.</p>


<div class='example'><pre><code> <span class="punct">&gt;&gt;</span> <span class="constant">WatchfulSaintAgnes</span><span class="punct">::</span><span class="constant">TOOTHLESS_MAN_WITH_FORK</span>
 <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">man</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">fork</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">exposed gums</span><span class="punct">&quot;]</span>
 <span class="punct">&gt;&gt;</span> <span class="constant">WatchfulSaintAgnes</span><span class="punct">::</span><span class="constant">FatWaxyChild</span><span class="punct">.</span><span class="ident">new</span>
 <span class="punct">=&gt;</span> <span class="comment">#&lt;WatchfulSaintAgnes::FatWaxyChild:0xb7d2ad78&gt;</span>
 <span class="punct">&gt;&gt;</span> <span class="constant">WatchfulSaintAgnes</span><span class="punct">::</span><span class="ident">instance_methods</span>
 <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">timid_foxfaced_girl</span><span class="punct">&quot;]</span></code></pre></div>
	<p>Always remember that a <code><span class="constant">Module</span></code> is only an inn.  A roof over their heads.  It is not a self-aware <code><span class="constant">Class</span></code> and, therefore, cannot be brought to life with <code><span class="ident">new</span></code>.</p>


<div class='example'><pre><code> <span class="punct">&gt;&gt;</span> <span class="constant">WatchfulSaintAgnes</span><span class="punct">.</span><span class="ident">new</span>
 <span class="constant">NoMethodError</span><span class="punct">:</span> <span class="ident">undefined</span> <span class="ident">method</span> `<span class="ident">new</span><span class="punct">'</span><span class="string"> for WatchfulSaintAgnes:Module
         from (irb):2</span></code></pre></div>
	<p>St. Agnes has given up her whole life in order that she may care for these desperate bits of code. Please.  Don&#8217;t take that away from her.</p>


	<p>If you wanted to steal from St. Agnes, though, I can help you. You can bring in a larger abbey to swallow up the ministry of <code><span class="constant">WatchfulSaintAgnes</span></code> and then what is she left with?</p>


	<p>For this you can use <code><span class="ident">extend</span></code>, which will pull all the methods from a module into a class or an object.</p>


<div class='example'><pre><code> <span class="punct">&gt;&gt;</span> <span class="keyword">class </span><span class="class">TheTimeWarnerAolCitibankCaringAndLovingFacility</span><span class="punct">;</span> <span class="keyword">end</span>
 <span class="punct">&gt;&gt;</span> <span class="constant">TheTimeWarnerAolCitibankCaringAndLovingFacility</span><span class="punct">.</span><span class="ident">extend</span> <span class="constant">WatchfulSaintAgnes</span>
 <span class="punct">&gt;&gt;</span> <span class="constant">TheTimeWarnerAolCitibankCaringAndLovingFacility</span><span class="punct">::</span><span class="ident">instance_methods</span>
 <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">timid_foxfaced_girl</span><span class="punct">&quot;]</span></code></pre></div>
	<p>In truth, no one&#8217;s <em>stolen</em> from <code><span class="constant">WatchfulSaintAgnes</span></code>, only borrowed.  The <code><span class="ident">timid_foxfaced_girl</span></code> now has two addresses.</p>


	<p>You gotta admit.  The old abbey can get bought out a zillion times and that little fox-faced girl will <em>still</em> be back in the banana closet wanting an acorn!  Too bad we can&#8217;t feed her. She&#8217;s a method with no arguments.</p>


	<p>When Dr. Cham came out refreshed, the filmstrip was a bit behind.  But the goat hadn&#8217;t noticed, so the Doctor advanced frames until it made some sense.</p>


	<p><img src="i/filmstrip-2.gif" title="The goats that told a planet it was ugly." alt="The goats that told a planet it was ugly." /></p>


	<p>So the invaders left the planet.</p>


	<p>&#8220;This planet <em>is</em> decrepit,&#8221; said Dr. Cham.  &#8220;The castle is nice.  But inside it&#8217;s a disaster.&#8221;</p>


	<p>&#8220;The whole castle look is a projection,&#8221; said the goat.  &#8220;All the flowers and apple blossoms and the sky even.  It&#8217;s a low-resolution projection.&#8221;</p>


	<p>&#8220;Yes?  It is enchanting.&#8221;</p>


	<p>&#8220;I guess.&#8221;</p>


	<p><img src="i/filmstrip-3.gif" title="The spool ends." alt="The spool ends." /></p>


	<p>&#8220;That&#8217;s messed up!&#8221; said the goat.  &#8220;That&#8217;s not the way the film ends! There&#8217;s no blood!  What happened?  What happened?  Did you screw up the knob, idiot?&#8221;</p>


	<p>&#8220;Well, I don&#8217;t know,&#8221; said Dr. Cham.  He turned the knob reverse and forward. Tapped the lens.</p>


	<p>&#8220;Check the film!  Check the film!&#8221;</p>


	<p>Dr. Cham pulled out a length of film from the projection feed, melted and dripping from its end.</p>


	<p>&#8220;Curse that!  These projectors are quality!  I&#8217;ve never had this happen.  There&#8217;s no way.&#8221;</p>


	<h3>Hunting For a Voice</h3>

	<p>&#8220;I don&#8217;t think it was the projector,&#8221; said Dr. Cham.  &#8220;Something flew across that screen and uttered a blistering moan.&#8221;</p>


	<p>&#8220;I don&#8217;t have any dupes of that movie,&#8221; said the goat somberly.  &#8220;And that girl.  That casting director.  I never see her anymore.&#8221;</p>


	<p>Dr. Cham stood up and looked over the dumpy aisles of magnetic carnage, searching.</p>


	<p>&#8220;Oh, hey, you should call that girl,&#8221; the goat went on. &#8220;You could talk to her, get an understanding. Tell her about me.  Don&#8217;t act like your my friend, just, you know, &#8216;Oh, that guy? Yeah, whatta maroon.&#8217;&#8221;</p>


	<p>Dr. Cham spotted the doorway and exited.</p>


	<p>The hallways were an entirely new world of mess.  In the goat&#8217;s archives, the shelves had been messy. In the hallway, shelves were completely tipped.  Sinks were falling through the ceiling.   The Doctor ventured under the debris, kicking through plywood when necessary.</p>


	<p>&#8220;You shouldn&#8217;t be out here,&#8221; said the goat.  &#8220;You&#8217;re on someone else&#8217;s property at this point. A couple of pygmy elephants own all this.  They&#8217;re nasty guys.  They&#8217;ll beat the crap outta you with their trunks.  They ball it up and just whack ya.&#8221;</p>


	<p>Dr. Cham pushed a file cabinet out of his way, which fell through a flimsy wall, then through the floor of the next room over.  And they heard it fall through several floors after that.</p>


	<p>&#8220;I&#8217;m trying to remember how it goes in the book,&#8221; said Dr. Cham, as he walked swiftly through the hall.  &#8220;That milky fog that swept across the projection.  We find that thing.&#8221;  He jiggled a door handle, broke it off.  Forged through the doorway and disappeared inside.</p>


	<p>&#8220;You really get a kick out of beating stuff up, don&#8217;t you?&#8221; said the goat.  &#8220;Walls, doors.&#8221; The goat headbutted a wall.  The wall shuddered and then laid still.</p>


	<p>Then, it was quiet.  And black.</p>


	<p>The goat stayed put in the bleak hallway, expecting Dr. Cham to flip over a few desks and emerge, ready to move on from the room he&#8217;d busted into.  But Dr. Cham didn&#8217;t return, and the goat opted to share a moment with the neglected wreckage left by his neighbors.  Not that he could see at all. He could only hear the occassional rustling of the piles of invoices and carbon copy masters and manila envelopes when he shifted his legs.</p>


	<p>The ground seemed to buckling right under the goat, as if the heaps of kipple around him were beginning to slide toward his weight.  He would be at the center of this whirlpool of elephant documentation.  Would he die of papercuts first?  Or would he suffocate under the solid burial by office supplies?</p>


	<p>A soft light, however, crept up to him.  A floating, silver fish.  No, it was a&#8212;was it scissors? The scissors grew into a shimmering cluster of intellegent bread, each slice choking on glitter. But, no, it was hands.  And an Easter hat.</p>


	<p><img src="i/hannah-1.gif" title="The goat alone in the hallway, meets an apparition." alt="The goat alone in the hallway, meets an apparition." /></p>


	<p>In another room, Dr. Cham stood under the clear glass silently.  The ceiling had abruptly gone transparent, then starlight washed over his pants and jacket.  He walked further to the room&#8217;s center in muted colors, lit as softly as an ancient manuscript in its own box at the museum.  More stars, more cotton clusters of fire, unveiled as he came across the floor. And it peeked into view soon enough, he expected it to be larger, but it wasn&#8217;t.</p>


	<p>Earth.  Like a painted egg, still fresh.  He felt long cello strings sing right up against his spine.  How could that be called Peoplemud?  Here was a vibrant and grassy lightbulb.  The one big ball that had something going for it.</p>


	<p>He thought of The Rockettes.  Actually, he missed The Rockettes.  What a bunch of great dancers.  He had yelled something to The Rockettes when he saw them.  Something very observant and flattering.</p>


	<p>Oh, yes, while The Rockettes were spinning, arm in arm, he had yelled, &#8220;Concentric circles!&#8221; Which no one else cared to observe.</p>


	<p>And this thought was enough to feed Dr. Cham&#8217;s superiority complex.  He wore a goofy smile as he retraced his footsteps.  He truthfully felt his genius coming through in such a statement.  To realize the simplicity of a circle was his.  He reflected on it all the way back to the hallway.</p>


	<p>Which I think is great.  Adore yourself when you have a second.</p>


	<p><img src="i/hannah-2.gif" title="The Doctor knows this ghost." alt="The Doctor knows this ghost." /></p>


	<p>&#8220;Oh, right,&#8221; said the goat.  &#8220;Your niece.  The niece you killed.  I&#8217;m with ya now.&#8221;</p>


	<p>For just a few moments, they all looked at each other.  Just enough time for both Dr. Cham and the goat to think: <em>Oh, yeah.  Hannah causes us a lot of trouble.  She&#8217;s already talking about maple donuts.</em></p>


	<p>&#8220;Does she start talking about maple donuts right away like that?&#8221; asked the goat.</p>


	<p>&#8220;Yes, she does,&#8221; said the Doctor.  &#8220;She brings it up to you, then she brings it up to me.  She sees a maple donut somewhere&#8212;I don&#8217;t quite remember where.&#8221;</p>


	<p>&#8220;Do I see a real maple donut?&#8221; Hannah said.  &#8220;I need a real one.&#8221;</p>


	<p>&#8220;Okay, okay,&#8221; said the goat.  &#8220;Yeah, I remember: here&#8217;s where she says that if she gets a real maple donut, she&#8217;ll become a real person again. Because her real destiny was to own a bakery and you ruined that destiny and now she&#8217;s trapped as a ghost.&#8221;</p>


	<p>&#8220;Hey, that&#8217;s the truth!&#8221; Hannah yelped.</p>


	<p>&#8220;It&#8217;s terrible that we must bear through this whole scene again,&#8221; said the Doctor.  &#8220;The donuts are immaterial.  They should be left out altogether.&#8221;</p>


	<p>&#8220;Man, I am having a <em>hard</em> time remembering all of this chapter,&#8221; said the goat.  &#8220;I don&#8217;t even remember how to get out of this hallway.  I must have read that book like thirty times.  Do we blast through a wall?   Do we scream until someone finds us?&#8221;</p>


	<p>&#8220;We get Hannah to float through walls and she finds some kind of machine,&#8221; says Dr. Cham.  &#8220;I have to write a program&#8212;it all works out somehow.&#8221;</p>


	<p>&#8220;But, you know what I&#8217;m saying?&#8221; said the goat.  &#8220;I forget all the details. Especially the earlier chapters.  I mean I can remember the ending perfectly. It&#8217;s hard to sit through all this.  The end is so much better.&#8221;</p>


	<p>Dr. Cham folded his arms and teetered on a heel.  &#8220;The porcupine.&#8221;  He smiled greedily at the goat.</p>


	<p>&#8220;Oh, totally.  The porcupine is definitely who I want to meet,&#8221; said the goat.  &#8220;I wonder what he does with all that money when the book is over.&#8221;</p>


	<p>Dr. Cham nodded respectfully.  &#8220;I&#8217;m very excited to see him wearing slippers.&#8221;</p>


	<p>&#8220;Those infernal slippers!&#8221; said the goat and he haw-hawed coarsely, a shower of saliva cascading from his jaws.</p>


	<p>Hannah&#8217;s mind rattled, waiting for this nonsense to break for a moment. She tipped her head on its side and the rattle slid along the curve of her cranium.  The little noise died away, though, as the back of her head vanished (<em>fluxed out</em> is what she called it) and then her head was   back again with its little rattle and she caught herself doing that careless moaning again.  <strong>HRRRRRR-RRR-OH-RRRR-RRRR.</strong></p>


	<p>&#8220;I&#8217;m not as into the chunky bacon stuff,&#8221; said the goat.  &#8220;I don&#8217;t see what&#8217;s so great about it.&#8221;</p>


	<p>Could she speak while moaning? <strong>BON-BON.</strong>  With a French moan.  <strong>BOHN-BOHN. <span class="caps">BOHN</span>-APPE-TEET-OHHHH-RRRR.</strong></p>


	<p>&#8220;I know she&#8217;s harmless, but that sound freaks me out.  My hair is <strong>completely</strong> on end.&#8221;</p>


	<p>&#8220;Hannah?&#8221; said Dr. Cham.  &#8220;Where are you, child?  Come do a good turn for us, my niece.&#8221;</p>


	<p>She was right near them, in and out.  And they could hear her cleaning up her voice, bright, speaking like a angel scattering stardust. Yes, the whole maple donut story came out again, and more about the bakery she would own, the muffins and rolls and baguettes.</p>

    
    
        
        <a name="section5" />
        <h2>5. The Theft of the Lottery Captain</h2>

        <p style="float:right"><img src="i/my.daughters.organ-3.gif" title="The piping and mixtures of the lotteries." alt="The piping and mixtures of the lotteries." /></p>


	<p>And now, Paij-ree&#8217;s stories of the Lotteries.</p>


	<p>On Endertromb, the organist&#8217;s father invented the lottery.  The idea came while he was praying to Digger Dosh.</p>


	<p>Digger Dosh is sort of like their God.  But ten times scarier.  This guy dug an infinitely deep tunnel straight through the planet and came out dead. But he&#8217;s really not dead.  He&#8217;s really just <em>one second</em> behind them.  And he eats time.</p>


	<p>It&#8217;s kind of complicated because Digger Dosh totally kills people.  But I guess if  you do what he says, it&#8217;s not so bad.  Maybe I&#8217;ll talk about it later.  It&#8217;s such a pain to talk about because it&#8217;s so scary and yet one of my friends actually believes the whole thing.  I get kind of choked up&#8212;not like I&#8217;m crying, more like I&#8217;m choking.</p>


	<p>Anyway, once while praying, three numbers came to Paij-ree&#8217;s father.</p>


	<p>He then asked his mind, &#8220;What are these numbers?&#8221;</p>


	<p>And his mind played a short video clip of him selling all kinds of numbers.  And, for years and years, travelling and selling numbers.</p>


	<p>And he asked his brain, &#8220;People will buy numbers?&#8221;</p>


	<p>And his brain said, &#8220;If they buy the right three numbers, give them a prize.&#8221;</p>


	<p>At which he imagined himself launching off a ski jump and showering people with presents.  No question: he would be an icon.</p>


	<p>So he went and did as his brain said and sold numbers.  The father&#8217;s simple lottery consisted of three unique numbers, drawn from a set of 25 numbers.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">LotteryTicket</span>

   <span class="constant">NUMERIC_RANGE</span> <span class="punct">=</span> <span class="number">1</span><span class="punct">..</span><span class="number">25</span>

   <span class="ident">attr_reader</span> <span class="symbol">:picks</span><span class="punct">,</span> <span class="symbol">:purchased</span>

   <span class="keyword">def </span><span class="method">initialize</span><span class="punct">(</span> <span class="punct">*</span><span class="ident">picks</span> <span class="punct">)</span>
     <span class="keyword">if</span> <span class="ident">picks</span><span class="punct">.</span><span class="ident">length</span> <span class="punct">!=</span> <span class="number">3</span>
       <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">three numbers must be picked</span><span class="punct">&quot;</span> 
     <span class="keyword">elsif</span> <span class="ident">picks</span><span class="punct">.</span><span class="ident">uniq</span><span class="punct">.</span><span class="ident">length</span> <span class="punct">!=</span> <span class="number">3</span>
       <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">the three picks must be different numbers</span><span class="punct">&quot;</span> 
     <span class="keyword">elsif</span> <span class="ident">picks</span><span class="punct">.</span><span class="ident">detect</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">p</span><span class="punct">|</span> <span class="keyword">not</span> <span class="constant">NUMERIC_RANGE</span> <span class="punct">===</span> <span class="ident">p</span> <span class="punct">}</span>
       <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">the three picks must be numbers between 1 and 25.</span><span class="punct">&quot;</span> 
     <span class="keyword">end</span>
     <span class="attribute">@picks</span> <span class="punct">=</span> <span class="ident">picks</span>
     <span class="attribute">@purchased</span> <span class="punct">=</span> <span class="constant">Time</span><span class="punct">.</span><span class="ident">now</span>
   <span class="keyword">end</span>

 <span class="keyword">end</span></code></pre></div>
	<p>Yes, the <code><span class="constant">LotteryTicket</span></code> class contained the three numbers (<code><span class="ident">picks</span></code>) and the time when the ticket was bought (<code><span class="ident">purchased</span></code>).  The allowed range of numbers (from <strong>one</strong> to <strong>twenty-five</strong>) is kept in the constant <code><span class="constant">NUMERIC_RANGE</span></code>.</p>


	<p>The <code><span class="ident">initialize</span></code> method here can have any number of arguments passed in.  The <strong>asterisk</strong> in the <code><span class="ident">picks</span></code> argument means that <strong>any arguments will be passed in as an Array</strong>.  Having the arguments in an Array means that methods like <code><span class="ident">uniq</span></code> and <code><span class="ident">detect</span></code> can be used on the arguments together.</p>


	<p>This class contains two definitions: the method definition (<code><span class="keyword">def</span></code>) and an attributes definition (<code><span class="ident">attr_reader</span></code>).  Both are <strong>really just method definitions</strong> though.</p>


	<p>The <code><span class="ident">attr_reader</span></code> shortcut is identical to writing this Ruby code:</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">LotteryTicket</span>
   <span class="keyword">def </span><span class="method">picks</span><span class="punct">;</span> <span class="attribute">@picks</span><span class="punct">;</span> <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">purchased</span><span class="punct">;</span> <span class="attribute">@purchased</span><span class="punct">;</span> <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Attributes are wrapper methods for instance variables (such as <code><span class="ident">picks</span></code>) which can be used <strong>outside of the class itself</strong>.  Paij-ree&#8217;s father wanted to code a machine which could read the numbers and the date of purchase from the ticket.  In order to do that, those instance variables must be exposed.</p>


	<p>Let&#8217;s create a random ticket and read back the numbers:</p>


<div class='example'><pre><code> <span class="ident">ticket</span> <span class="punct">=</span> <span class="constant">LotteryTicket</span><span class="punct">.</span><span class="ident">new</span><span class="punct">(</span> <span class="ident">rand</span><span class="punct">(</span> <span class="number">25</span> <span class="punct">)</span> <span class="punct">+</span> <span class="number">1</span><span class="punct">,</span>
             <span class="ident">rand</span><span class="punct">(</span> <span class="number">25</span> <span class="punct">)</span> <span class="punct">+</span> <span class="number">1</span><span class="punct">,</span> <span class="ident">rand</span><span class="punct">(</span> <span class="number">25</span> <span class="punct">)</span> <span class="punct">+</span> <span class="number">1</span> <span class="punct">)</span>
 <span class="ident">p</span> <span class="ident">ticket</span><span class="punct">.</span><span class="ident">picks</span></code></pre></div>
	<p>Running the above, I just got: <code><span class="punct">[</span><span class="number">23</span><span class="punct">,</span> <span class="number">14</span><span class="punct">,</span> <span class="number">20</span><span class="punct">]</span></code>.  You will get an error if two of the random numbers happen to be identical.</p>


	<p>However, I can&#8217;t change the lottery ticket&#8217;s picks from outside of the class.</p>


<div class='example'><pre><code> <span class="ident">ticket</span><span class="punct">.</span><span class="ident">picks</span> <span class="punct">=</span> <span class="punct">[</span><span class="number">2</span><span class="punct">,</span> <span class="number">6</span><span class="punct">,</span> <span class="number">19</span><span class="punct">]</span></code></pre></div>
	<p>I get an error: <code><span class="ident">undefined</span> <span class="ident">method</span> `<span class="ident">picks</span><span class="punct">='</span><span class="string"></span></code>. This is because <code><span class="ident">attr_reader</span></code> only adds a <strong>reader</strong> method, not a writer method. That&#8217;s fine, though.  We don&#8217;t want the numbers or the date to change.</p>


	<p>So, the tickets are <em>objects</em>.  Instances of the <code><span class="constant">LotteryTicket</span></code> class.  Make a ticket with <code><span class="constant">LotteryTicket</span><span class="punct">.</span><span class="ident">new</span></code>.  Each ticket has it&#8217;s own <code><span class="ident">picks</span></code> and it&#8217;s own <code><span class="ident">purchased</span></code> instance variables.</p>


	<p>The lottery captain would need to draw three random numbers at the close of the lottery, so we&#8217;ll add a convenient class method for generating random tickets.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">LotteryTicket</span>
   <span class="keyword">def </span><span class="method">self.new_random</span>
     <span class="ident">new</span><span class="punct">(</span> <span class="ident">rand</span><span class="punct">(</span> <span class="number">25</span> <span class="punct">)</span> <span class="punct">+</span> <span class="number">1</span><span class="punct">,</span> <span class="ident">rand</span><span class="punct">(</span> <span class="number">25</span> <span class="punct">)</span> <span class="punct">+</span> <span class="number">1</span><span class="punct">,</span> <span class="ident">rand</span><span class="punct">(</span> <span class="number">25</span> <span class="punct">)</span> <span class="punct">+</span> <span class="number">1</span> <span class="punct">)</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Oh, no.  But we have that stupid error that pops up if two of the random numbers happen to be identical.  If two numbers are the same, the <code><span class="ident">initialize</span></code> throws an <code><span class="constant">ArgumentError</span></code>.</p>


	<p>The trick is going to be restarting the method if an error happens. We can use Ruby&#8217;s <code><span class="keyword">rescue</span></code> to handle the error and <code><span class="keyword">redo</span></code> to start the method over.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">LotteryTicket</span>
   <span class="keyword">def </span><span class="method">self.new_random</span>
     <span class="ident">new</span><span class="punct">(</span> <span class="ident">rand</span><span class="punct">(</span> <span class="number">25</span> <span class="punct">)</span> <span class="punct">+</span> <span class="number">1</span><span class="punct">,</span> <span class="ident">rand</span><span class="punct">(</span> <span class="number">25</span> <span class="punct">)</span> <span class="punct">+</span> <span class="number">1</span><span class="punct">,</span> <span class="ident">rand</span><span class="punct">(</span> <span class="number">25</span> <span class="punct">)</span> <span class="punct">+</span> <span class="number">1</span> <span class="punct">)</span>
   <span class="keyword">rescue</span> <span class="constant">ArgumentError</span>
     <span class="keyword">redo</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Better.  It may take a couple times for the numbers to fall together right, but it&#8217;ll happen.  The wait will build suspense, huh?</p>


	<p>The lottery captain kept a roster of everyone who bought tickets, along with the numbers they drew.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">LotteryDraw</span>
   <span class="attribute">@@tickets</span> <span class="punct">=</span> <span class="punct">{}</span>
   <span class="keyword">def </span><span class="method">LotteryDraw.buy</span><span class="punct">(</span> <span class="ident">customer</span><span class="punct">,</span> <span class="punct">*</span><span class="ident">tickets</span> <span class="punct">)</span>
     <span class="keyword">unless</span> <span class="attribute">@@tickets</span><span class="punct">.</span><span class="ident">has_key?</span><span class="punct">(</span> <span class="ident">customer</span> <span class="punct">)</span>
       <span class="attribute">@@tickets</span><span class="punct">[</span><span class="ident">customer</span><span class="punct">]</span> <span class="punct">=</span> <span class="punct">[]</span>
     <span class="keyword">end</span>
     <span class="attribute">@@tickets</span><span class="punct">[</span><span class="ident">customer</span><span class="punct">]</span> <span class="punct">+=</span> <span class="ident">tickets</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Yal-dal-rip-sip was the first customer.</p>


<div class='example'><pre><code> <span class="constant">LotteryDraw</span><span class="punct">.</span><span class="ident">buy</span> <span class="punct">'</span><span class="string">Yal-dal-rip-sip</span><span class="punct">',</span>
     <span class="constant">LotteryTicket</span><span class="punct">.</span><span class="ident">new</span><span class="punct">(</span> <span class="number">12</span><span class="punct">,</span> <span class="number">6</span><span class="punct">,</span> <span class="number">19</span> <span class="punct">),</span>
     <span class="constant">LotteryTicket</span><span class="punct">.</span><span class="ident">new</span><span class="punct">(</span> <span class="number">5</span><span class="punct">,</span> <span class="number">1</span><span class="punct">,</span> <span class="number">3</span> <span class="punct">),</span>
     <span class="constant">LotteryTicket</span><span class="punct">.</span><span class="ident">new</span><span class="punct">(</span> <span class="number">24</span><span class="punct">,</span> <span class="number">6</span><span class="punct">,</span> <span class="number">8</span> <span class="punct">)</span></code></pre></div>
	<p>When it came time for the lottery draw, Paij-ree&#8217;s father (the lottery captain) added a bit of code to randomly select the numbers.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">LotteryTicket</span>
   <span class="keyword">def </span><span class="method">score</span><span class="punct">(</span> <span class="ident">final</span> <span class="punct">)</span>
     <span class="ident">count</span> <span class="punct">=</span> <span class="number">0</span>
     <span class="ident">final</span><span class="punct">.</span><span class="ident">picks</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">note</span><span class="punct">|</span>
       <span class="ident">count</span> <span class="punct">+=</span><span class="number">1</span> <span class="keyword">if</span> <span class="ident">picks</span><span class="punct">.</span><span class="ident">include?</span> <span class="ident">note</span>
     <span class="keyword">end</span>
     <span class="ident">count</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>The <code><span class="ident">score</span></code> method compares a <code><span class="constant">LotteryTicket</span></code> against a random ticket, which represents the winning combination.  The random ticket is passed in through the <code><span class="ident">final</span></code> variable.  The ticket gets one point for every winning number.  The point total is returned from the <code><span class="ident">score</span></code> method.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">ticket</span> <span class="punct">=</span> <span class="constant">LotteryTicket</span><span class="punct">.</span><span class="ident">new</span><span class="punct">(</span> <span class="number">2</span><span class="punct">,</span> <span class="number">5</span><span class="punct">,</span> <span class="number">19</span> <span class="punct">)</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">winner</span> <span class="punct">=</span> <span class="constant">LotteryTicket</span><span class="punct">.</span><span class="ident">new</span><span class="punct">(</span> <span class="number">4</span><span class="punct">,</span> <span class="number">5</span><span class="punct">,</span> <span class="number">19</span> <span class="punct">)</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">ticket</span><span class="punct">.</span><span class="ident">score</span><span class="punct">(</span> <span class="ident">winner</span> <span class="punct">)</span>
   <span class="punct">=&gt;</span> <span class="number">2</span></code></pre></div>
	<p>You will see how brilliant Paij-ree is, in time.  His father commissioned him to finish the lottery for him, while the demand for tickets consumed the lottery captain&#8217;s daylight hours.  Can&#8217;t you just imagine young Paij-ree in his stuffy suit, snapping a rubber band in his young thumbs at the company meetings where he proposed the final piece of the system?  Sure, when he stood up, his dad did all the talking for him, but he flipped on the projector and performed all the hand motions.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="punct">&lt;&lt;</span> <span class="constant">LotteryDraw</span>
   <span class="keyword">def </span><span class="method">play</span>
     <span class="ident">final</span> <span class="punct">=</span> <span class="constant">LotteryTicket</span><span class="punct">.</span><span class="ident">new_random</span>
     <span class="ident">winners</span> <span class="punct">=</span> <span class="punct">{}</span>
     <span class="attribute">@@tickets</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">buyer</span><span class="punct">,</span> <span class="ident">ticket_list</span><span class="punct">|</span>
       <span class="ident">ticket_list</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">ticket</span><span class="punct">|</span>
         <span class="ident">score</span> <span class="punct">=</span> <span class="ident">ticket</span><span class="punct">.</span><span class="ident">score</span><span class="punct">(</span> <span class="ident">final</span> <span class="punct">)</span>
         <span class="keyword">next</span> <span class="keyword">if</span> <span class="ident">score</span><span class="punct">.</span><span class="ident">zero?</span>
         <span class="ident">winners</span><span class="punct">[</span><span class="ident">buyer</span><span class="punct">]</span> <span class="punct">||=</span> <span class="punct">[]</span>
         <span class="ident">winners</span><span class="punct">[</span><span class="ident">buyer</span><span class="punct">]</span> <span class="punct">&lt;&lt;</span> <span class="punct">[</span> <span class="ident">ticket</span><span class="punct">,</span> <span class="ident">score</span> <span class="punct">]</span>
       <span class="keyword">end</span>
     <span class="keyword">end</span>
     <span class="attribute">@@tickets</span><span class="punct">.</span><span class="ident">clear</span>
     <span class="ident">winners</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>His father&#8217;s associates were stunned.  What was this?  (Paij-ree knew this was just another class method definition&#8212;they would all feel completely demoralized when he told them so.)  They couldn&#8217;t understand the <strong>double angle bracket</strong> up there!  Yes, it was a concatenator, but how is it in the class title?</p>


	<p><em>Infants</em>, thought Paij-ree, although he held everyone of those men in very high esteem.  He was just a kid and kids are tough as a brick&#8217;s teeth.</p>


	<p>The <code><span class="punct">&lt;&lt;</span></code> operator allows you to alter the definition of an object. Had Paij-ree simply used <code><span class="keyword">class </span><span class="class">LotteryDraw</span></code>, his <code><span class="ident">play</span></code> method would be a normal instance method.  But since he used the <code><span class="punct">&lt;&lt;</span></code> operator, the <code><span class="ident">play</span></code> method will be added directly to the class, as a class method.</p>


	<p>When you see <code><span class="keyword">class </span><span class="punct">&lt;&lt;</span> <span class="ident">obj</span></code>, believe in your heart, <em>I&#8217;m adding directly to the definition of <code><span class="ident">obj</span></code>.</em></p>


	<p>The budding organ instructor also threw in a tricky syntax worth examining. In the ninth line, a winner has been found.</p>


<div class='example'><pre><code> <span class="ident">winners</span><span class="punct">[</span><span class="ident">buyer</span><span class="punct">]</span> <span class="punct">||=</span> <span class="punct">[]</span>
 <span class="ident">winners</span><span class="punct">[</span><span class="ident">buyer</span><span class="punct">]</span> <span class="punct">&lt;&lt;</span> <span class="punct">[</span> <span class="ident">ticket</span><span class="punct">,</span> <span class="ident">score</span> <span class="punct">]</span></code></pre></div>
	<p>The <code><span class="punct">||=</span></code> syntax is a shortcut.</p>


<div class='example'><pre><code> <span class="ident">winners</span><span class="punct">[</span><span class="ident">buyer</span><span class="punct">]</span> <span class="punct">=</span> <span class="ident">winners</span><span class="punct">[</span><span class="ident">buyer</span><span class="punct">]</span> <span class="punct">||</span> <span class="punct">[]</span></code></pre></div>
	<p>The <strong>double pipe</strong> is an <strong>or</strong> logic.  Set <code><span class="ident">winners</span><span class="punct">[</span><span class="ident">buyer</span><span class="punct">]</span></code> equal to <code><span class="ident">winners</span><span class="punct">[</span><span class="ident">buyer</span><span class="punct">]</span></code> or, if <code><span class="ident">winners</span><span class="punct">[</span><span class="ident">buyer</span><span class="punct">]</span></code> is nil, set it to <code><span class="punct">[]</span></code>.  This shortcut is a little strange, but if you can really plant it in your head, it&#8217;s a nice timesaver.  You&#8217;re just making sure a variable is set before using it.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">LotteryDraw</span><span class="punct">.</span><span class="ident">play</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">winner</span><span class="punct">,</span> <span class="ident">tickets</span><span class="punct">|</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="ident">puts</span> <span class="ident">winner</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string">won on </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">tickets</span><span class="punct">.</span><span class="ident">length</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string"> ticket(s)!</span><span class="punct">&quot;</span> 
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="ident">tickets</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">ticket</span><span class="punct">,</span> <span class="ident">score</span><span class="punct">|</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>     <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string"><span class="escape">\t</span></span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">ticket</span><span class="punct">.</span><span class="ident">picks</span><span class="punct">.</span><span class="ident">join</span><span class="punct">(</span> <span class="punct">'</span><span class="string">, </span><span class="punct">'</span> <span class="punct">)</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string">: </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">score</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="keyword">end</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">end</span>

 <span class="constant">Gram</span><span class="punct">-</span><span class="ident">yol</span> <span class="ident">won</span> <span class="ident">on</span> <span class="number">2</span> <span class="ident">ticket</span><span class="punct">(</span><span class="ident">s</span><span class="punct">)!</span>
     <span class="number">25</span><span class="punct">,</span> <span class="number">14</span><span class="punct">,</span> <span class="number">33</span><span class="punct">:</span> <span class="number">1</span>
     <span class="number">12</span><span class="punct">,</span> <span class="number">11</span><span class="punct">,</span> <span class="number">29</span><span class="punct">:</span> <span class="number">1</span>
 <span class="constant">Tarker</span><span class="punct">-</span><span class="ident">azain</span> <span class="ident">won</span> <span class="ident">on</span> <span class="number">1</span> <span class="ident">ticket</span><span class="punct">(</span><span class="ident">s</span><span class="punct">)!</span>
     <span class="number">13</span><span class="punct">,</span> <span class="number">15</span><span class="punct">,</span> <span class="number">29</span><span class="punct">:</span> <span class="number">2</span>
 <span class="constant">Bramlor</span><span class="punct">-</span><span class="ident">exxon</span> <span class="ident">won</span> <span class="ident">on</span> <span class="number">1</span> <span class="ident">ticket</span><span class="punct">(</span><span class="ident">s</span><span class="punct">)!</span>
     <span class="number">2</span><span class="punct">,</span> <span class="number">6</span><span class="punct">,</span> <span class="number">14</span><span class="punct">:</span> <span class="number">1</span></code></pre></div>
	<p>But these salad days were not to continue for Paij-ree and his father.  His father often neglected to launder his uniform and contracted a moss disease on his shoulders.  The disease gradually stole his equilibrium and his sense of direction.</p>


	<p>His father still futilely attempted to keep the business running.  He spiraled through the city, sometimes tumbling leg-over-leg down the cobbled stone, most often slowly feeling the walls, counting bricks to the math parlours and coachmen stations, where he would thrust tickets at the bystanders, who hounded him and slapped him away with long, wet beets.  Later, Paij-ree would find him in a corner, his blood running into the city drains alongside the juices of the dark, splattered beets, which juice weaseled its way up into his veins and stung and clotted and glowed fiercely like a congested army of brake lights fighting their way through toll bridges.</p>


	<h3>A Word About Accessors (Because I Love You and I Hope For Your Success and My Hair is On End About This and Dreams Really Do Come True)</h3>

	<p>Earlier, I mentioned that <code><span class="ident">attr_reader</span></code> adds <strong>reader</strong> methods, but not <strong>writer</strong> methods.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">ticket</span> <span class="punct">=</span> <span class="constant">LotteryTicket</span><span class="punct">.</span><span class="ident">new</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">ticket</span><span class="punct">.</span><span class="ident">picks</span> <span class="punct">=</span> <span class="number">3</span>
 <span class="constant">NoMethodError</span><span class="punct">:</span> <span class="ident">undefined</span> <span class="ident">method</span> `<span class="ident">picks</span><span class="punct">='</span><span class="string"> for #&lt;LotteryTicket:0xb7d49110&gt;</span></code></pre></div>
	<p>Which is okay in this case, since Paij-ree&#8217;s father didn&#8217;t want the numbers to be changed after the ticket was bought.  If we were interested in having instance variables which had <strong>both readers and writers</strong>, we would use <code><span class="ident">attr_accessor</span></code>.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">LotteryTicket</span>
   <span class="ident">attr_accessor</span> <span class="symbol">:picks</span><span class="punct">,</span> <span class="symbol">:purchased</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Which is exactly the same as this lengthier code:</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">LotteryTicket</span>
   <span class="keyword">def </span><span class="method">picks</span><span class="punct">;</span>           <span class="attribute">@picks</span><span class="punct">;</span>            <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">picks=</span><span class="punct">(</span><span class="ident">var</span><span class="punct">);</span>     <span class="attribute">@picks</span> <span class="punct">=</span> <span class="ident">var</span><span class="punct">;</span>      <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">purchased</span><span class="punct">;</span>       <span class="attribute">@purchased</span><span class="punct">;</span>        <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">purchased=</span><span class="punct">(</span><span class="ident">var</span><span class="punct">);</span> <span class="attribute">@purchased</span> <span class="punct">=</span> <span class="ident">var</span><span class="punct">;</span>  <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Holy cats!  Look at those writer methods for a moment.  They are the methods named <code><span class="ident">picks</span><span class="punct">=</span></code> and <code><span class="ident">purchased</span><span class="punct">=</span></code>.  These methods <strong>intercept outside assignment</strong> to instance variables. Usually you will just let <code><span class="ident">attr_reader</span></code> or <code><span class="ident">attr_accessor</span></code> (or even perhaps <code><span class="ident">attr_writer</span></code>) do the work for you. Other times you may want to put a guard at the door yourself, checking variables in closer detail.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">SkatingContest</span>
   <span class="keyword">def </span><span class="method">the_winner</span><span class="punct">;</span> <span class="attribute">@the_winner</span><span class="punct">;</span> <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">the_winner=</span><span class="punct">(</span> <span class="ident">name</span> <span class="punct">)</span>
     <span class="keyword">unless</span> <span class="ident">name</span><span class="punct">.</span><span class="ident">respond_to?</span> <span class="symbol">:to_str</span>
       <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">The winner's name must be a String,
         not a math problem or a list of names or any of that business.</span><span class="punct">&quot;</span> 
     <span class="keyword">end</span>
     <span class="attribute">@the_winner</span> <span class="punct">=</span> <span class="ident">name</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Most of the time you won&#8217;t use this.  But, as we move along through your lessons, you&#8217;ll find that Ruby has lots of escape hatches and alley ways you can sneak into and hack code into.  I&#8217;m also preparing you for metaprogramming, which, if you can smell that dragon, is ominously near.</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Another Excerpt from The Scarf Eaters</h2>
        

        <p>(<em>from Chapter <span class="caps">VIII</span>: Sky High</em>.)</p>


	<p>&#8220;I know you,&#8221; said Brent.  &#8220;And I know your timelines. You couldn&#8217;t have done this Flash piece.&#8221;</p>


	<p>&#8220;So, you&#8217;re saying I&#8217;m predictable?&#8221; said Deborah.  She opened her hands and the diced potatoes stumbled like little, drunk sea otters happily into the open crockpot.</p>


	<p>&#8220;You&#8217;re very linear,&#8221; said Brent.  He took up a mechanical pencil, held it straight before his eyes, gazing tightly at it before replacing it in the pencil holder on the counter.  &#8220;Do you even know how to load a scene?  How to jump frames?  This movie I saw was all over the place, Deb.&#8221;</p>


	<p>She heaped five knit scarves and a single bandana into the slow cooker and set it on high.  She closed the lid, leaving her hand resting upon it.</p>


	<p>&#8220;What is it about this movie?&#8221;  Deborah asked.  &#8220;You go to Flash sites all the time.  You played the Elf Snowball game for two seconds, it didn&#8217;t interest you.  You didn&#8217;t care for Elf Bowling games even.  And you weren&#8217;t even phased by that Hit The Penguin flash game.  Elf versus Penguin?  Don&#8217;t even ask!</p>


	<p>&#8220;Now this movie comes along and you can&#8217;t get a grip.&#8221; She walked over and siddled up next to him.  &#8220;Yo, bro, it&#8217;s me. Deborah.  What happened when you saw that movie?&#8221;</p>


	<p>&#8220;Everything,&#8221; said Brent, his eyes reflecting a million worlds. &#8220;And: nothing.  It opened with a young girl riding upon a wild boar.  She was playing harmonica.  The harmonica music washed in and out, uneasy, unsure.  But she rode naturally, as if it wasn&#8217;t anything of a big deal to ride a wild boar.  And with Flash, riding a wild boar really isn&#8217;t a big deal.&#8221;</p>


	<p>Deborah unclasped her bracelet and set it on the counter by the crockpot.</p>


	<p>&#8220;The bottom of the movie started to break up, an ink puddle formed. The boar reared up, but his legs gave way to the all the dark, sputtering ink.&#8221;</p>


	<p>&#8220;Dark clouds converged.  Hardcore music started to play.  Secret agents came out of the clouds.  <span class="caps">CIA</span> guys and stuff.  The animation simply rocked.</p>


	<p>&#8220;And then, at the very end of the movie, these words fade upon the screen.  In white, bold letters.&#8221;</p>


	<p>&#8220;Sky high,&#8221; said Deborah.</p>


	<p>&#8220;How did you know?&#8221; Brent&#8217;s lip quivered.  Could she be trusted?</p>


	<p>&#8220;There is no room left in the world,&#8221; she said.  &#8220;No room for Scarf Eaters, no room for you and I.  Here, take my hand.&#8221;</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Paij-ree was an enterprising young Endertromaltoek.  He hammered animal bones into long, glistening trumpets with deep holes that were plugged by corks the musicians banded to their fingers.  Sure, he only sold three of those units, but he was widely reviled as a freelance scholar, a demonic one, for he was of a poorer class and the poor only ever acquired their brilliance through satanic practice.  Of course, they were right, indeed, he did have a bargain with the dark mages, whom he kept appointments with annually, enduring torturous hot springs, bathing as they chanted spells.</p>


	<p>He adored his father, even as his father deteriorated into but a gyroscope.  He idolized the man&#8217;s work and spent his own small earnings playing the lottery.  He loved to watch the numerals, each painted upon hollow clay balls, rise in the <em>robloch</em> (which is any fluid, pond or spill that has happened to withstand the presence of ghosts), the great bankers tying them together on a silver string, reading them in order.</p>


	<p>Even today, Paij-ree paints the scenes with crude strokes of black ink on sheets of aluminum  foil.  It is very touching to see him caught up in the preciousness of his memory, but I don&#8217;t  know exactly why he does it on aluminum foil.  His drawings rip too easily.  Paij-ree himself gets mixed up and will serve you crumbcake right off of some of this art, even after it has been properly framed.  So many things about him are troubling and absurd and downright wretched.</p>


The disease spread over his father&#8217;s form and marshy weeds covered his father&#8217;s hands and face.  The moss pulled his spine up into a rigid uprightness.  So thick was the growth over his head that he appeared to wear a shrub molded into a bowler&#8217;s hat.  He also called himself by a new name <del>- <strong>Quos</strong> &#8211; </del> and he healed the people he touched, leaving a pile of full-blooded, greenly-cheeked villages in his wake as he travelled the townships.  Many called him The Mossiah and wept on his feet, which wet the buds and caused him to weed into the ground.  This made him momentarily angry, he harshly jogged his legs to break free and thrashed his fists wildly in the sky, bringing down a storm of lightning shards upon these pitiful.

	<p>Paij-ree was apart from the spiritual odysseys of his father (in fact, thought the man dead), so he only saw the decay of the lottery without its captain present.  Here is where Paij-ree went to work, reviving the dead lottery of his family.</p>


	<h3>Gambling with Fewer Fingers</h3>

	<p>The city was crowded with people who had lost interest in the lottery.  The weather had really worn everyone down as well.  Such terrible rain flooding their cellars. The entire city was forced to move up one story.  You&#8217;d go to put the cap back on your pen and you&#8217;d ruin the pen, since the cap was already full of slosh.  Everyone was depleted, many people drowned.</p>


	<p>Paij-ree found himself wasting his days in a quadruple bunkbed, the only furniture that managed to stay above sea level.  He slept on the top bed.  The third bed up was dry as well, so he let a homeless crater gull nest upon it.  The gull didn&#8217;t need the whole bed, so Paij-ree also kept his calculators and pencils down there.</p>


	<p>At first, these were very dark times for both of them, and they insisted on remaining haggard at all times.  Paij-ree became obsessed with his fingernails, kept them long and pristine, while the rest of him deteriorated under a suit of hair.  In the company of Paij-ree, the crater gull learned his own eccentrity and plucked all the feathers on the right side of his body.  He looked like a cutaway diagram.</p>


	<p>They learned to have happier times.  Paij-ree carved a flute from the wall with his nails and played it often.  Mostly he played his relaxed ballads during the daytime.  In the evening, they pounded the wall and shook the bed frame in time to his songs.  The gull went nuts when he played a certain four notes and he looped this section repeatedly, watching the gull swoop and circle in ectasy.  Paij-ree could hardly keep his composure over the effect the little tune had and he couldn&#8217;t keep it together, fell all apart, slobbering and horse-giggling.</p>


	<p>Paij-ree called the gull <em>Eb-F-F-A</em>, after that favorite song.</p>


	<p>Friendship can be a very good catalyst for progress.  A friend can find traits in you that no one else can.  It&#8217;s like they searched your person and somehow came up with five full sets of silverware you never knew were there.  And even though that friend may not understand why you had these utensils concealed, it&#8217;s still a great feat, worth honoring.</p>


	<p>While <em>Eb-F-F-A</em> didn&#8217;t find silverware, he did find something else.  A pile of something else.  Since Paij-ree was stranded on the quadruple bed, the gull would scout around for food.  One day, he flew down upon a barrel, floating over where the toolshed had been.  <em>Eb-F-F-A</em> walked on top of the barrel, spinning it back to Paij-ree&#8217;s house and they cracked it open, revealing Paij-ree&#8217;s lost collection of duck bills.</p>


	<p>Yes, real duck bills. (<em>Eb-F-F-A</em> was esophagizing his squawks, remaining calm, sucking beads of sweat back into his forehead&#8212;ducks were not <em>of his chosen feather</em>, but still in the species.)  Paij-ree clapped gleefully, absolutely, he had intended to shingle his house with these, they could have deflected a bit of the torrent. Probably not much, nothing to cry about.</p>


	<p>And the roof glue was at the barrel&#8217;s bottom and they were two enterprising bunkmates with time to kill, so they made a raft from the previously-quacked lip shades.  And off they were to the country!  Stirring through a real mess of city and soup.  How strange it was to hit a beach and find out it was just the old dirt road passed Toffletown Junction.</p>


	<p>In the country, they sold.  It was always a long walk to the next plantation, but there would be a few buyers up in the mansion (&#8220;Welcome to The Mansion Built on Beets&#8221;, they&#8217;d say or, &#8220;The Mansion Built on Cellophane Substitutes&#8212;don&#8217;t you know how harmful real cellophane can be?&#8221;)  And one of the families wrapped up some excess jelly and ham in some cellophane for the two travellers.  And they almost died one day later because of it.</p>


	<p>Then, when the heat came and, as the first countryside lottery was at nigh, a farmer called to them from his field, as he stood by his grazing cow. Paij-ree and <em>Eb-F-F-A</em> wandered out to him, murmuring to each other as to whether they should offer him the Wind-Beaten Ticket Special or whether he might want to opt in to winning Risky Rosco&#8217;s Original Homestyle Country  Medallion.</p>


	<p>But the farmer waved them down as he approached, &#8220;No, put your calculators and probability wheels away.  It&#8217;s for my grazledon.&#8221;  He meant his cow.  The Endertromb version: twice as much flesh, twice as meaty, doesn&#8217;t produce milk, produces paper plates.  Still, it grazes.</p>


	<p>&#8220;Your grazledon (poh-kon-ic) wants a lucky ticket?&#8221; asked Paij-ree.</p>


	<p>&#8220;He saw you two and got real excited,&#8221; said the farmer.  &#8220;He doesn&#8217;t know numbers, but he understands luck a bit.  He almost got hit by a doter plane one day and, when I found him, he just gave shrug.  It was like he said, &#8216;Well, I guess that worked out okay.&#8217;&#8221;</p>


	<p>&#8220;The whole (shas-op) lottery is numer-(ig-ig)-ic,&#8221; said Paij-ree.  &#8220;Does he know (elsh) notes?  My eagle knows (losh) notes.&#8221;  Paij-ree whistled at the crater gull, who cooed back a sustained <em>D</em>.</p>


	<p>The farmer couldn&#8217;t speak to his grazledon&#8217;s tonal awareness, so Paij-ree sent the gull to find out (<em>D-D-D-A-D</em>, <em>go-teach-the-gra-zle</em>) while he hacked some notes into his calculator.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">AnimalLottoTicket</span>

   <span class="comment"># A list of valid notes.</span>
   <span class="constant">NOTES</span> <span class="punct">=</span> <span class="punct">[</span><span class="symbol">:Ab</span><span class="punct">,</span> <span class="symbol">:A</span><span class="punct">,</span> <span class="symbol">:Bb</span><span class="punct">,</span> <span class="symbol">:B</span><span class="punct">,</span> <span class="symbol">:C</span><span class="punct">,</span> <span class="symbol">:Db</span><span class="punct">,</span> <span class="symbol">:D</span><span class="punct">,</span> <span class="symbol">:Eb</span><span class="punct">,</span> <span class="symbol">:E</span><span class="punct">,</span> <span class="symbol">:F</span><span class="punct">,</span> <span class="symbol">:Gb</span><span class="punct">,</span> <span class="symbol">:G</span><span class="punct">]</span>

   <span class="comment"># Stores the three picked notes and a purchase date.</span>
   <span class="ident">attr_reader</span> <span class="symbol">:picks</span><span class="punct">,</span> <span class="symbol">:purchased</span>

   <span class="comment"># Creates a new ticket from three chosen notes.  The three notes</span>
   <span class="comment"># must be unique notes.</span>
   <span class="keyword">def </span><span class="method">initialize</span><span class="punct">(</span> <span class="ident">note1</span><span class="punct">,</span> <span class="ident">note2</span><span class="punct">,</span> <span class="ident">note3</span> <span class="punct">)</span>
     <span class="keyword">if</span> <span class="punct">[</span><span class="ident">note1</span><span class="punct">,</span> <span class="ident">note2</span><span class="punct">,</span> <span class="ident">note3</span><span class="punct">].</span><span class="ident">uniq!</span>
       <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">the three picks must be different notes</span><span class="punct">&quot;</span> 
     <span class="keyword">elsif</span> <span class="ident">picks</span><span class="punct">.</span><span class="ident">detect</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">p</span><span class="punct">|</span> <span class="keyword">not</span> <span class="constant">NOTES</span><span class="punct">.</span><span class="ident">include?</span> <span class="ident">p</span> <span class="punct">}</span>
       <span class="keyword">raise</span> <span class="constant">ArgumentError</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">the three picks must be notes in the chromatic scale.</span><span class="punct">&quot;</span> 
     <span class="keyword">end</span>
     <span class="attribute">@picks</span> <span class="punct">=</span> <span class="ident">picks</span>
     <span class="attribute">@purchased</span> <span class="punct">=</span> <span class="constant">Time</span><span class="punct">.</span><span class="ident">now</span>
   <span class="keyword">end</span>

   <span class="comment"># Score this ticket against the final draw.</span>
   <span class="keyword">def </span><span class="method">score</span><span class="punct">(</span> <span class="ident">final</span> <span class="punct">)</span>
     <span class="ident">count</span> <span class="punct">=</span> <span class="number">0</span>
     <span class="ident">final</span><span class="punct">.</span><span class="ident">picks</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">note</span><span class="punct">|</span>
       <span class="ident">count</span> <span class="punct">+=</span><span class="number">1</span> <span class="keyword">if</span> <span class="ident">picks</span><span class="punct">.</span><span class="ident">include?</span> <span class="ident">note</span>
     <span class="keyword">end</span>
     <span class="ident">count</span>
   <span class="keyword">end</span>

   <span class="comment"># Constructor to create a random AnimalLottoTicket</span>
   <span class="keyword">def </span><span class="method">self.new_random</span>
     <span class="ident">new</span><span class="punct">(</span> <span class="constant">NOTES</span><span class="punct">[</span> <span class="ident">rand</span><span class="punct">(</span> <span class="constant">NOTES</span><span class="punct">.</span><span class="ident">length</span> <span class="punct">)</span> <span class="punct">],</span> <span class="constant">NOTES</span><span class="punct">[</span> <span class="ident">rand</span><span class="punct">(</span> <span class="constant">NOTES</span><span class="punct">.</span><span class="ident">length</span> <span class="punct">)</span> <span class="punct">],</span>
          <span class="constant">NOTES</span><span class="punct">[</span> <span class="ident">rand</span><span class="punct">(</span> <span class="constant">NOTES</span><span class="punct">.</span><span class="ident">length</span> <span class="punct">)</span> <span class="punct">]</span> <span class="punct">)</span>
   <span class="keyword">rescue</span> <span class="constant">ArgumentError</span>
     <span class="keyword">redo</span>
   <span class="keyword">end</span>

 <span class="keyword">end</span></code></pre></div>
	<p>No need for the animal&#8217;s tickets to behave drastically different from the traditional tickets.  The <code><span class="constant">AnimalLottoTicket</span></code> class is internally different, but exposes the same methods seen in the original <code><span class="constant">LotteryTicket</span></code> class. The <code><span class="ident">score</span></code> method is even identical to the <code><span class="ident">score</span></code> method from the old <code><span class="constant">LotteryTicket</span></code> class.</p>


	<p>Instead of using a class variable to store the musical note list, they&#8217;re stored in a constant called <code><span class="constant">AnimalLottoTicket</span><span class="punct">::</span><span class="constant">NOTES</span></code>.  Variables change and the note list shouldn&#8217;t change.  Constants are designed to stay the same.  You can still change the constant, but you&#8217;ll have to be tricky or Ruby will speak up.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">AnimalLottoTicket</span><span class="punct">::</span><span class="constant">NOTES</span> <span class="punct">=</span> <span class="punct">[</span><span class="symbol">:TOOT</span><span class="punct">,</span> <span class="symbol">:TWEET</span><span class="punct">,</span> <span class="symbol">:BLAT</span><span class="punct">]</span>
 <span class="punct">(</span><span class="ident">irb</span><span class="punct">)</span><span class="symbol">:3</span><span class="punct">:</span> <span class="ident">warning</span><span class="punct">:</span> <span class="ident">already</span> <span class="ident">initialized</span> <span class="ident">constant</span> <span class="constant">NOTES</span>
   <span class="punct">=&gt;</span> <span class="punct">[</span><span class="symbol">:TOOT</span><span class="punct">,</span> <span class="symbol">:TWEET</span><span class="punct">,</span> <span class="symbol">:BLAT</span><span class="punct">]</span></code></pre></div>
	<p>The gull came back with the grazledon, his name was Merphy, he was thrilled to play chance, he puffed his face dreamily, whistled five and six notes in series, they all held his collar, pulled him close to the calculator and let him breathe three notes, then they choked the bedosh outta him until his ticket was printed and  everything was nicely catalogued inside <code><span class="attribute">@tickets</span><span class="punct">['</span><span class="string">merphy</span><span class="punct">']</span></code>.  Thankyou, see ya at the draw!</p>


	<p>So, the fever of the lottery became an epidemic among the simple minds of the animals.   Paij-ree saved his costs, used the same <code><span class="constant">LotteryDraw</span></code> class he&#8217;d used in the corporate environment of the lottery from his childhood.  And soon enough, the animals were making their own music and their own maps and films.</p>


	<p>&#8220;What about The Originals?&#8221; I asked Paij-ree.  &#8220;They must have hated your animals!&#8221;</p>


	<p>But he winced sourly and pinched his forehead.  &#8220;I am an Original.  You as well. Do we (ae-o) hate any of them?&#8221;</p>


	<p>Not too long after the lottery ended, Paij-ree felt the crater gull <em>Eb-F-F-A</em> lighting upon his shoulder, which whistled an urgent and sad <em>C-Eb-D C-A-Eb</em>. These desparate notes sent an organ roll of chills straight through Paij-ree.  Had the King God of Potted Soil, Our Beloved Topiary, <strong>the Mossiah Quos</strong>, Literal Father of That Man Who Would Be My Daughter&#8217;s Organ Instructor&#8212;had he truly come to his end? How could this be?  Could the great arbors no longer nourish him and guide the moist crosswinds to him?  Or did his own spindly lichen hedge up his way and grow against his breathing?</p>


	<p><em>You never mind</em>, went the tune of the gull.  <em>He has detoriated and weakened and fallen in the lit door of your home cottage.  His tendrils needing and crying for the day to not end. For the sun to stay fixed and wide and attentive.</em></p>


	<p>Plor-ian, the house attendant, kept the pitchers coming and Quos stayed well watered until Paij-ree arrived to survey the decaying buds of soft plant and the emerging face of his father, the lottery captain.  His skin deeply pocked like an overly embroidered pillow. Great shoots springing from his sleeves now curled back with lurching thirst.</p>


	<p>Paij-ree combed back the longer stems around his father&#8217;s eyes and those coming from the corners of his mouth.  While I&#8217;d like to tell you that Paij-ree&#8217;s tears rolled down his sleeves and into the pours of his father, rejuvenating and restoring the grassy gentleman: I cannot say this.</p>


	<p>Rather, Paij-ree&#8217;s tears rolled down his sleeves and into the creaking clapboard floor, nourishing the vile weeds, energizing the dark plant matter, which literally lept through the floor at night and strangled Our Quos.  Yank, pull, crack.  And that was his skull.</p>


	<p>So Paij-ree could never be called Wert-ree or Wert-plo after that.</p>

    
    
        
        <a name="section6" />
        <h2>6. Them What Make the Rules</h2>

        <p>Hannah lept back from the wall and clenched down on her fingers.</p>


	<p>&#8220;This is the wall,&#8221; said Dr. Cham.  &#8220;The Originals are in there.  My child, can you lead us to the observation deck?&#8221;</p>


	<p>&#8220;You expect us to go up against those guys?&#8221; asked the goat.  &#8220;They&#8217;re mad as koalas.  But these koalas have lasers!&#8221;</p>


	<p>&#8220;We prevail, though,&#8221; said Dr. Cham.  &#8220;You and I know this.&#8221;</p>


	<p>&#8220;Okay, well I&#8217;m muddled on that point,&#8221; said the goat.  &#8220;Do we really win? Or could we be thinking about <em>Kramer vs. Kramer</em>?  Does Dustin Hoffman win or do we win?&#8221;</p>


	<p>&#8220;No.  No.  No.  No.&#8221;  Hannah hovered and dragged her legs along the wall nervously. &#8220;There is a man with a huge face in there!&#8221;</p>


	<p>&#8220;Mr. Face,&#8221; said the Doctor.  &#8220;He is the original face.&#8221;</p>


	<p>&#8220;He didn&#8217;t see me,&#8221; said Hannah and moaned.  <strong>HOMA-HOMA-ALLO-ALLO.</strong></p>


	<p>She made that hollow weeping through the crumbling mouseholes and the freezer gateways, fluxing in and out, causing the video checkpoints to hiss and the wall panels to brace themselves and fall silent.  The three passed through two levels of frayed security and emerged in the observation deck overlooking the cargo bay.</p>


	<p><img src="i/the.originals-1.jpg" title="Klon Ooper. Corwood. Mr. Face. Vonblisser.  The Originals." alt="Klon Ooper. Corwood. Mr. Face. Vonblisser.  The Originals." /></p>


	<p>&#8220;The last living among The Originals,&#8221; said Dr. Cham.  &#8220;Are you alright with this, Hannah?&#8221;  Which she didn&#8217;t hear in any way, as her eyes laid fixed on the legendary creatures.</p>


	<p>&#8220;Look at them,&#8221; said the goat.  &#8220;These guys wrote the rule books, Doctor.  We owe everything to these guys.&#8221;</p>


	<p>&#8220;What about God?&#8221; said Dr. Cham.</p>


	<p>&#8220;I don&#8217;t really know,&#8221; said the goat.  &#8220;Hannah probably knows better than any of us about that.&#8221;</p>


	<p>Hannah said nothing.  She only really knew one other ghost and that was her Post-Decease Mediator, Jamie Huft.  Who didn&#8217;t seem to have any answers for her and required questions to be submitted in writing with a self-addressed stamped envelope included.  Hannah hadn&#8217;t gotten the ball rolling on that P.O. Box yet.</p>


	<p>&#8220;We must be up in the mountains,&#8221; said the goat.  &#8220;Look out at that blackness.&#8221;</p>


	<p>&#8220;I saw another deck like this down by where we found Hannah,&#8221; said Dr. Cham.  &#8220;Down closer to your living area.  You should take time to search for it.  It&#8217;s very peaceful there. You can see Earth and the seven seas.&#8221;</p>


	<p>&#8220;The seven seas?&#8221;  The goat wondered if that was near The Rockettes.  He&#8217;d read his share of material on precision dancing and he&#8217;d seen that line of legs, mincing across the stage like a big, glitsy rototiller.</p>


	<p>Hannah stirred to life.</p>


	<p><img src="i/the.originals-2.jpg" title="Hannah panicks. Maple donuts are within reach." alt="Hannah panicks. Maple donuts are within reach." /></p>


	<p><img src="i/the.originals-3.jpg" title="They couldn't hear them, but they saw their slides." alt="They couldn't hear them, but they saw their slides." /></p>


	<p>And none of the three spoke when The Originals flicked off the slide projector and boarded a very slender rocketship and cleanly exploded through a crevice in the cargo bay roof.</p>


	<p>&#8220;Oh, boy,&#8221; said the goat.</p>


	<p>&#8220;What?&#8221; said Hannah.</p>


	<p>&#8220;You&#8217;re going to die,&#8221; said the goat.</p>


	<p>Dr. Cham looked over the controls in front of them, a long panel of padded handles and green screens.</p>


	<p>&#8220;I&#8217;m already dead.  I&#8217;m a ghost.&#8221;</p>


	<p>The goat looked down at the Doctor, who was rummaging under the control panel.  &#8220;Okay, well if your uncle isn&#8217;t going to have a talk with you, I&#8217;m going to make things very clear.  There&#8217;s a good chance these guys are going to build a bomb.  And you see how I&#8217;m fidgeting?  You see how my knees are wobbling?&#8221;</p>


	<p>&#8220;Yeah.&#8221;</p>


	<p>&#8220;Yeah, that&#8217;s how real this is, kid.  I don&#8217;t remember anything from that <em>confounded book</em> except that these guys are building a bomb that can blow up the ghost world.   Because once the ghost world&#8217;s gone, then Digger Dosh gets his one second back.   It&#8217;s a trade they&#8217;ve worked out.  Hell, it&#8217;s sick stuff, that&#8217;s all you need to know.&#8221;</p>


	<p>&#8220;But I&#8217;m dead.&#8221;</p>


	<p>&#8220;Okay, well, we&#8217;re talking, aren&#8217;t we?  You can talk, so are you dead?&#8221;  The goat shook his head. &#8220;I wish I could remember if we win or if it was Dustin Hoffman.&#8221;</p>


	<p>Hannah cried.  &#8220;Why do I have to die again?&#8221;  She wailed and her legs fell into flux and she sunk into the floor.  <strong>MOH-MOHHH-MAO-MAOOO.</strong></p>


	<p>Dr. Cham had forceably yanked on a plush handle, which unlocked and slid open like a breadbox. He reached his hands inside and found a keyboard firmly bolted deep inside.</p>


	<p>&#8220;That&#8217;s it,&#8221; he said and pulled up <code><span class="ident">irb</span></code>, which appeared on a display to the left of his concealed typing.  He checked the Ruby version.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">RUBY_VERSION</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">1.8.2</span><span class="punct">&quot;</span></code></pre></div>
	<p>Ruby was up-to-date.  What else could he do?  Scanning <code><span class="ident">constants</span></code> and <code><span class="ident">class_variables</span></code> was pointless. The only reason that had worked with the <code><span class="constant">Elevator</span></code> class was because someone had left <code><span class="ident">irb</span></code> running with their classes still loaded.</p>


	<p>He had just loaded this <code><span class="ident">irb</span></code>, so no special classes were available yet.  He had to find some classes. He started by loading the <code>`<span class="ident">rbconfig`</span></code> file to get an idea of what Ruby&#8217;s settings were.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">require</span> <span class="punct">'</span><span class="string">rbconfig</span><span class="punct">'</span>
   <span class="punct">=&gt;</span> <span class="constant">true</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Config</span><span class="punct">::</span><span class="constant">CONFIG</span>
   <span class="punct">=&gt;</span> <span class="punct">{&quot;</span><span class="string">abs_srcdir</span><span class="punct">&quot;=&gt;&quot;</span><span class="string">$(ac_abs_srcdir)</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">sitedir</span><span class="punct">&quot;=&gt;&quot;</span><span class="string">bay://Ruby/lib/site_ruby</span><span class="punct">&quot;,</span> <span class="punct">...</span> <span class="punct">}</span></code></pre></div>
	<p>Too much information to sort through there.  The <code><span class="constant">Config</span><span class="punct">::</span><span class="constant">CONFIG</span></code> constant is a Hash that contains every environment setting used to setup Ruby.  You can find the operating system name at <code><span class="constant">Config</span><span class="punct">::</span><span class="constant">CONFIG</span><span class="punct">['</span><span class="string">host_os</span><span class="punct">']</span></code>.  The directory where core Ruby libraries are stored can be found at <code><span class="constant">Config</span><span class="punct">::</span><span class="constant">CONFIG</span><span class="punct">['</span><span class="string">rubylibdir</span><span class="punct">']</span></code>.  Ruby programs can store helper files at <code><span class="constant">Config</span><span class="punct">::</span><span class="constant">CONFIG</span><span class="punct">['</span><span class="string">datadir</span><span class="punct">']</span></code>.</p>


	<p>What Dr. Cham really needed, though, was a list of all the libraries that aren&#8217;t core Ruby libraries.  Libraries which were installed by The Originals or whoever manned this console. He checked a few global variables for this information.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$&quot;</span> 
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">irb.rb</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">e2mmap.rb</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">irb/init.rb</span><span class="punct">&quot;,</span> <span class="punct">...</span> <span class="punct">&quot;</span><span class="string">rbconfig.rb</span><span class="punct">&quot;]</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$:</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">bay://Ruby/lib/site_ruby/1.9</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">bay://Ruby/lib/site_ruby/1.9/i686-unknown</span><span class="punct">&quot;,</span>
       <span class="punct">&quot;</span><span class="string">bay://Ruby/lib/site_ruby</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">bay://Ruby/lib/1.9</span><span class="punct">&quot;,</span> 
       <span class="punct">&quot;</span><span class="string">bay://Ruby/lib/1.9/i686-unknown</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">.</span><span class="punct">&quot;]</span></code></pre></div>
	<p>Aha, good.  Dr. Cham stroked his beard and looked over his <code><span class="ident">irb</span></code> session.  The <code><span class="global">$&quot;</span></code> global variable contains an Array of every library which has been loaded with <code><span class="ident">require</span></code>.  Most of these libraries had been loaded by <code><span class="ident">irb</span></code>.  He had loaded <code><span class="punct">'</span><span class="string">rbconfig.rb</span><span class="punct">'</span></code> earlier, though.</p>


	<p>The <code><span class="global">$:</span></code> global variable, which can also be accessed as <code><span class="global">$LOAD_PATH</span></code>, contains a list of all the directories which Ruby will check when you try to load a file with <code><span class="ident">require</span></code>.  When Dr. Cham ran <code><span class="ident">require</span> <span class="punct">'</span><span class="string">rbconfig</span><span class="punct">'</span></code>, Ruby checked each directory in order.</p>


<div class='example'><pre><code> <span class="ident">bay</span><span class="punct">:/</span><span class="regex"></span><span class="punct">/</span><span class="constant">Ruby</span><span class="punct">/</span><span class="ident">lib</span><span class="punct">/</span><span class="ident">site_ruby</span><span class="punct">/</span><span class="number">1.9</span><span class="punct">/</span><span class="ident">rbconfig</span><span class="punct">.</span><span class="ident">rb</span>
 <span class="ident">bay</span><span class="punct">:/</span><span class="regex"></span><span class="punct">/</span><span class="constant">Ruby</span><span class="punct">/</span><span class="ident">lib</span><span class="punct">/</span><span class="ident">site_ruby</span><span class="punct">/</span><span class="number">1.9</span><span class="punct">/</span><span class="ident">i686</span><span class="punct">-</span><span class="ident">unknown</span><span class="punct">/</span><span class="ident">rbconfig</span><span class="punct">.</span><span class="ident">rb</span> <span class="punct">(*)</span>
 <span class="ident">bay</span><span class="punct">:/</span><span class="regex"></span><span class="punct">/</span><span class="constant">Ruby</span><span class="punct">/</span><span class="ident">lib</span><span class="punct">/</span><span class="ident">site_ruby</span><span class="punct">/</span><span class="ident">rbconfig</span><span class="punct">.</span><span class="ident">rb</span>
 <span class="ident">bay</span><span class="punct">:/</span><span class="regex"></span><span class="punct">/</span><span class="constant">Ruby</span><span class="punct">/</span><span class="ident">lib</span><span class="punct">/</span><span class="number">1.9</span><span class="punct">/</span><span class="ident">rbconfig</span><span class="punct">.</span><span class="ident">rb</span>
 <span class="ident">bay</span><span class="punct">:/</span><span class="regex"></span><span class="punct">/</span><span class="constant">Ruby</span><span class="punct">/</span><span class="ident">lib</span><span class="punct">/</span><span class="number">1.9</span><span class="punct">/</span><span class="ident">i686</span><span class="punct">-</span><span class="ident">unknown</span><span class="punct">/</span><span class="ident">rbconfig</span><span class="punct">.</span><span class="ident">rb</span>
 <span class="punct">./</span><span class="regex">rbconfig.rb</span></code></pre></div>
	<p>The second path was where Ruby ended up finding the rbconfig.rb file.  Dr. Cham guessed that the first five paths were <strong>absolute paths</strong>.  These were paths to directories on a drive called <code><span class="ident">bay</span></code>.  Absolute paths may vary on your system.  On Windows, absolute paths will start with a drive letter.  On Linux, absolute paths start with a slash.</p>


	<p>The directory <code><span class="punct">&quot;</span><span class="string">.</span><span class="punct">&quot;</span></code> indicates a <strong>relative path</strong>.  The lone period represents the current work directory.  The directory where Dr. Cham started up <code><span class="ident">irb</span></code>.  So, after Ruby has searched all the standard places, it checks the current directory.</p>


	<p>The goat had peeked his head around Dr. Cham and was watching all these instructions transpire, as he licked his lips to keep his salivations from running all over the monitors and glossy buttons.  He had been interjecting a few short cheers (along the lines of: <em>No, not that</em> or <em>Yes, yes, right</em> or <em>Okay, well, your choice</em>), but now he was fully involved, recommending code, &#8220;Try <code><span class="ident">require</span> <span class="punct">'</span><span class="string">setup</span><span class="punct">'</span></code> or, no, try <code><span class="number">3</span> <span class="punct">*</span> <span class="number">5</span></code>.  Make sure that basic math works.&#8221;</p>


	<p>&#8220;Of course the math works,&#8221; said Dr. Cham.  &#8220;Let me be, I need to find some useful classes.&#8221;</p>


	<p>&#8220;It&#8217;s a basic sanity test,&#8221; said the goat.  &#8220;Just try it.  Do <code><span class="number">3</span> <span class="punct">*</span> <span class="number">5</span></code> and see what comes up.&#8221;</p>


	<p>Dr. Cham caved.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="number">3</span> <span class="punct">*</span> <span class="number">5</span>
   <span class="punct">=&gt;</span> <span class="number">15</span></code></pre></div>
	<p>&#8220;Okay, great!  We&#8217;re in business!&#8221; the goat tossed his furry face about in glee.</p>


	<p>Dr. Cham patted the goat&#8217;s head, &#8220;Well done.  We can continue.&#8221;</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Dir</span><span class="punct">.</span><span class="ident">chdir</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">bay://Ruby/lib/site_ruby/1.9/</span><span class="punct">&quot;</span> <span class="punct">)</span>
   <span class="punct">=&gt;</span> <span class="number">0</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Dir</span><span class="punct">[&quot;</span><span class="string">./*.{rb}</span><span class="punct">&quot;]</span>
   <span class="punct">=&gt;</span> <span class="punct">['</span><span class="string">endertromb.rb</span><span class="punct">',</span> <span class="punct">'</span><span class="string">mindreader.rb</span><span class="punct">',</span> <span class="punct">'</span><span class="string">wishmaker.rb</span><span class="punct">']</span></code></pre></div>
	<p>Dr. Cham had use <code><span class="ident">chdir</span></code> to change the current working directory over the the first path listed in <code><span class="global">$LOAD_PATH</span></code>.  This first path in <code><span class="ident">site_ruby</span></code> is a common place to store custom classes.</p>


	<p>Here were the three legendary classes that my daughter&#8217;s organ instructor had inscribed for me earlier in this chapter.  And, Dr. Cham, having read this selfsame chapter, recognized these three pieces of the system immediately.</p>


	<p>The <code><span class="constant">Endertromb</span></code> class which contained the mysteries of this planet&#8217;s powers.  The <code><span class="constant">MindReader</span></code> class which, upon scanning the minds of its inhabitants, read each mind&#8217;s contents.  And, finally, the crucial <code><span class="constant">WishMaker</span></code> class which powered the granting of ten-letter wishes, should the wish ever find its way to the core of Endertromb.</p>


	<p>&#8220;How about <code><span class="number">4</span> <span class="punct">*</span> <span class="number">56</span> <span class="punct">+</span> <span class="number">9</span></code>?&#8221; asked the goat.  &#8220;We don&#8217;t know if it can do compound expressions.&#8221;</p>


	<p>&#8220;I&#8217;ve got the <code><span class="constant">MindReader</span></code> right here,&#8221; said Dr. Cham.  &#8220;And I have the <code><span class="constant">WishMaker</span></code> here next to it. This planet can read minds.  And this planet can make wishes.  Now, let&#8217;s see if it can do both at the same time.&#8221;</p>

    
    
        
        <a name="section7" />
        <h2>7. Them What Live the Dream</h2>

        <p>While The Originals&#8217; craft had long disappeared, Dr. Cham frantically worked away at the computer built into the control panel up in the observation deck.  Hannah had disappeared into the floor (or perhaps those little sparks along the ground were still wisps of her paranormal presence!) and the goat amicably watched Dr. Cham hack out a Ruby module.</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">endertromb</span><span class="punct">'</span>
 <span class="keyword">module </span><span class="module">WishScanner</span>
   <span class="keyword">def </span><span class="method">scan_for_a_wish</span>
     <span class="ident">wish</span> <span class="punct">=</span> <span class="constant">self</span><span class="punct">.</span><span class="ident">read</span><span class="punct">.</span><span class="ident">detect</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">thought</span><span class="punct">|</span>
       <span class="ident">thought</span><span class="punct">.</span><span class="ident">index</span><span class="punct">(</span> <span class="punct">'</span><span class="string">wish: </span><span class="punct">'</span> <span class="punct">)</span> <span class="punct">==</span> <span class="number">0</span>
     <span class="keyword">end</span>
     <span class="ident">wish</span><span class="punct">.</span><span class="ident">gsub</span><span class="punct">(</span> <span class="punct">'</span><span class="string">wish: </span><span class="punct">',</span> <span class="punct">'</span><span class="string"></span><span class="punct">'</span> <span class="punct">)</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>&#8220;What&#8217;s your plan?&#8221; asked the goat.  &#8220;It seems like I could have solved this problem in like three lines.&#8221;</p>


	<p>&#8220;This <code><span class="constant">Module</span></code> is the new <code><span class="constant">WishScanner</span></code> technology,&#8221; he said.  &#8220;The scanner only picks up a wish if it starts with the word <code><span class="ident">wish</span></code> and a colon and a space.  That way the planet doesn&#8217;t fill up with every less-than-ten-letter word that appears in people&#8217;s heads.&#8221;</p>


	<p>&#8220;Why don&#8217;t you just use a class?&#8221; asked the goat.</p>


	<p>&#8220;Because a <code><span class="constant">Module</span></code> is simpler than a class.  It&#8217;s basically just a storage facility for methods.  It keeps a group of methods together.  You can&#8217;t create new objects from a method.&#8221;</p>


	<p>&#8220;But aren&#8217;t you going to want a <code><span class="constant">WishScanner</span></code> object, so you can actually use it?&#8221; said the goat, appalled.</p>


	<p>&#8220;I&#8217;m going to mix it into the <code><span class="constant">MindReader</span></code>,&#8221; said Dr. Cham.  And he did.</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">mindreader</span><span class="punct">'</span>
 <span class="keyword">class </span><span class="class">MindReader</span>
   <span class="ident">include</span> <span class="constant">MindScanner</span>
 <span class="keyword">end</span></code></pre></div>
	<p>&#8220;Now, the <code><span class="constant">MindScanner</span></code> module is mixed in to the <code><span class="constant">MindReader</span></code>,&#8221; said Dr. Cham. &#8220;I can call the <code><span class="ident">scan_for_a_wish</span></code> method on any <code><span class="constant">MindReader</span></code> object.&#8221;</p>


	<p>&#8220;So, it&#8217;s a mixin,&#8221; said the goat.  &#8220;The <code><span class="constant">MindScanner</span></code> mixin.&#8221;</p>


	<p>&#8220;Yes, any module which is introduced into a class with <code><span class="ident">include</span></code> is a mixin to that class.  If you go back and look at the <code><span class="ident">scan_for_a_wish</span></code> method, you&#8217;ll see that it calls a <code><span class="constant">self</span><span class="punct">.</span><span class="ident">read</span></code> method.  I just have to make sure that whatever class I&#8217;m mixing <code><span class="constant">MindScanner</span></code> into has a <code><span class="ident">read</span></code> method.  Otherwise, an error will be thrown.&#8221;</p>


	<p>&#8220;That seems really wierd that the mixin requires certain methods that it doesn&#8217;t already have. It seems like it should work by itself.&#8221;</p>


	<p>Dr. Cham looked up from the keyboard at the goat.  &#8220;Well, it&#8217;s sort of like your video collection. None of your video cassettes work unless they are put in a machine that uses video cassettes. The depend on each other.  A mixin has some basic requirements, but once a class meets those requirements, you can add all this extra functionality in.&#8221;</p>


	<p>&#8220;Hey, that&#8217;s cool,&#8221; said the goat.</p>


	<p>&#8220;You read the book thirty times and you didn&#8217;t pick that up?&#8221; asked Dr. Cham.</p>


	<p>&#8220;You&#8217;re a much better teacher in person,&#8221; said the goat.  &#8220;I really didn&#8217;t think I was going to like you very much.&#8221;</p>


	<p>&#8220;I completely understand,&#8221; said the Doctor.  &#8220;This is much more real than the cartoons make it seem.&#8221;</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">wishmaker</span><span class="punct">'</span>
 <span class="ident">reader</span> <span class="punct">=</span> <span class="constant">MindReader</span><span class="punct">.</span><span class="ident">new</span>
 <span class="ident">wisher</span> <span class="punct">=</span> <span class="constant">WishMaker</span><span class="punct">.</span><span class="ident">new</span>
 <span class="ident">loop</span> <span class="keyword">do</span>
   <span class="ident">wish</span> <span class="punct">=</span> <span class="ident">reader</span><span class="punct">.</span><span class="ident">scan_for_a_wish</span>
   <span class="keyword">if</span> <span class="ident">wish</span>
     <span class="ident">wisher</span><span class="punct">.</span><span class="ident">grant</span><span class="punct">(</span> <span class="ident">wish</span> <span class="punct">)</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Irb sat and looped on the screen.  It&#8217;ll do that until you hit Control-C.  But Dr. Cham let it churn away.  Looping endlessly, scanning the mind waves for a proper wish.</p>


	<p>And Dr. Cham readied his wish.  At first, he thought immediately of a <code><span class="ident">stallion</span></code>.  To ride bareback over the vales of Sedna.  But he pulled the thought back, his wish hadn&#8217;t been formed properly. A stallion was useless in pursuing The Originals, so he closed his eyes again, bit his lip and he thought to himself: <code><span class="ident">wish</span><span class="punct">:</span> <span class="ident">whale</span></code>.</p>


	<h3>Last Whale to Peoplemud</h3>

	<p>The blocky, sullen whale appeared down at the castle entrance, where Hannah was bashing on a rosebud with her hand.  She whacked at it with a fist, but it only stayed perfect and pleasant and crisp against the solid blue sky of Endertromb.</p>


	<p>&#8220;I&#8217;m bored,&#8221; she said to the whale.  <strong>BOHR-BOHR-OHRRRRRR.</strong></p>


	<p>&#8220;Ok,&#8221; said the whale, deep and soft.  As the word slid along his massive tongue, its edges chipped off and the word slid out polished and worn in a bubble by his mouth&#8217;s corner.</p>


	<p>&#8220;I always have to die,&#8221; said the young ghost.  &#8220;People always kill me.&#8221;</p>


	<p>The whale fluttered his short fins, which hung at useless distance from the ground. So, he pushed himself toward her with his tail.  Scooting over patches of grass.</p>


	<p>&#8220;People kill, so who do they kill?&#8221; said the girl.  &#8220;Me.  They kill me every time.&#8221;</p>


	<p>The whale made it to within three meters of the girl, where he towered like a great war monument that represents enough dead soldiers to actually steal a lumbering step towards you.  And now, the whale rested his tail and, exhausted by the climb thus far, let his eyelids fall shut and became a gently puffing clay mountain, his shadow rich and doubled-up all around the hardly visible Hannah.</p>


	<p>But another shadow combined, narrow and determined.  Right behind her, the hand came on to her shoulder, and the warm ghost inside the hand touched her sleeve.</p>


	<p>&#8220;How did you get down here?&#8221; said the girl.</p>


	<p>Dr. Cham sat right alongside her and the goat walked around and stood in front.</p>


	<p>&#8220;Listen to us,&#8221; said Dr. Cham.  &#8220;We&#8217;ve got to follow this mangy pack of ne&#8217;er-do-wells to the very end, Hannah.  And to nab them, we need your faithful assistance!&#8221;</p>


	<p>&#8220;I&#8217;m scared,&#8221; cried Hannah.</p>


	<p>&#8220;You&#8217;re not scared,&#8221; said the goat.  &#8220;Come on.  You&#8217;re a terrifying little phantom child.&#8221;</p>


	<p>&#8220;Well,&#8221; she said.  &#8220;I&#8217;m a little bored.&#8221;</p>


	<p>Dr. Cham bent down on a knee, bringing his shaggy presence toward the ground, his face just inches from hers.  &#8220;If you come with us, if you can trust what we know, then we can bag this foul troupe.  Now, you say your destiny is to be a baker.  I won&#8217;t dispute that. You have every right on Earth <del>- and Endertromb, for that matter &#8211; </del> to become a baker. Say, if you didn&#8217;t become a baker, that would be a great tragedy.  Who&#8217;s going to take care of all those donuts if you don&#8217;t?&#8221;</p>


	<p>She shrugged.  &#8220;That&#8217;s what I&#8217;ve been saying.&#8221;</p>


	<p>&#8220;You&#8217;re right,&#8221; said the Doctor.  &#8220;You&#8217;ve been saying it from the start.&#8221;  He looked up to the sky, where the wind whistled peacefully despite its forceful piercing by The Originals&#8217; rocketship.  &#8220;If your destiny is to be a baker, then mine is to stop all this, to end the mayhem that is just beginning to boil.  And hear me, child <del>- hear how sure and solid my voice becomes when I say this &#8211; </del> I ended your life, I bear sole responsibility for your life as an apparition, but I will get it back.  It&#8217;s going to take more than a donut, but you will have a real childhood.  I promise you.&#8221;</p>


	<p><img src="i/whale.escape-1.jpg" title="On the wished whale... away..." alt="On the wished whale... away..." /></p>


	<p>Sure, it took a minute for the goat to cut his wish down to ten letters, but he was shortly on his way, following the same jetstreams up into the sky, up toward Dr. Cham and his ghost niece Hannah.  Up toward the villanous animal combo pak called The Originals.  Up toward The Rockettes.</p>


	<p>And Digger Dosh bludgeoned and feasted on each second they left behind them.</p>

    
    

    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>6.</h3>
        <h1>Downtown</h1>
        <p><img src="i/chapter.poignant.guide-6.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/wixl-1.jpg" title="Lost in Wixl" alt="Lost in Wixl" />
<img src="i/wixl-2.gif" title="This heist goes all the way up?" alt="This heist goes all the way up?" /></p>


	<p>Oblivious to their involvement in the expansive plan of The Originals, both the tall fox and the much shorter fox had wandered right into the red alert zone, the city Wixl.  I desire a spatula to scoop them aside with, shuffle them off to the coast near the beach hatcheries, hide them in piles of fish eggs, hold down their pointy ears, concealing their luxurious hides.  And above them I would stand, casting an unmoving shadow, holding my rifle aloof.</p>


	<p>I can&#8217;t.  I have you to teach.  I have to groom and care for myself.  The lightbulbs upstairs need changing.  A free pack of halogen lightbulbs just showed up out of the mail.  Somebody out there is obviously trying to get me to use them.  So I&#8217;m going to screw &#8216;em in.  And just stand there, casting an unmoving shadow, holding my rifle aloof.</p>


	<p>Should that shadow be nice and defined, then I&#8217;ll keep &#8216;em.</p>

    
    
        
        <a name="section1" />
        <h2>1. If I Were Looking For a Vehicle</h2>

        <p><img src="i/wixl-7.gif" title="Sitting for a moment." alt="Sitting for a moment." /></p>


	<p>I like seeing these two out in the wild.  They got pretty bored here in the studio.  They started making up wierd slogans and stuff.  They had some phrase they kept repeating, forming fixations upon. You can&#8217;t be exposed to all that contrived fox nonsense.</p>


	<p>Let&#8217;s just say: I am really trying my best to keep things collegiate.  Having never attended college, I can&#8217;t well say if every passage written chimes right with the stringent criteria which academia demands. I have university friends aplenty, some who tour the globe in their pursuits, and I try to inflect my voice with just their blend of high culture.</p>


	<p>Sometimes I applaud myself for going beyond the work of my educated friends <del>- only in quiet corridors, we never butt heads publicly &#8211; </del> because <em>I have actually subscribed</em> to a school of thought while they are still in their books, turning and turning.</p>


	<p><strong>I am a preeventualist.</strong>  I have dabbled in it long enough and am glad to come forth with it. Inevitably, some of you have already started mining this book for Marxist symbology.  I am sad to kill those interpretations, but I believe any nihilist conclusions you&#8217;ve drawn will still hold up under scrutiny.</p>


	<p>Anyway, I&#8217;ll drop the rhetoric.  I only mention preeventualism because, aside from being a refreshing and easy alternative to the post-modernism we&#8217;re born with, <em>this</em> meta-cult offers a free lost-and-found service for the residents of Wixl.</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">open-uri</span><span class="punct">'</span>
 <span class="ident">open</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">http://preeventualist.org/lost</span><span class="punct">&quot;</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">lost</span><span class="punct">|</span>
   <span class="ident">puts</span> <span class="ident">lost</span><span class="punct">.</span><span class="ident">read</span>
 <span class="keyword">end</span></code></pre></div>
	<p>I have no way of alerting the foxes to this service.  And I&#8217;m sure it&#8217;s too soon for their truck to be listed. Still, the good intentions are here.</p>


	<p>If you&#8217;re connected to the Internet, the above Ruby should have downloaded the web page from the Internet and printed it to the screen.  In a message resembling this:</p>


<div class='example'><pre class="text">                   THE PREEVENTUALIST'S LOSING AND FINDING REGISTRY
          (a free service benefiting the ENLIGHTENED who have been LIGHTENED)

                                      ---
                      updates are made daily, please check back!
                                      ---

                         this service is commissioned and
                     subsidized in part by The Ashley Raymond
                                Youth Study Clan

                                      ...
                      all seals and privileges have been filed
                under the notable authorship of Perry W. L. Von Frowling,
          Magistrate Polywaif of Dispossession.  Also, Seventh Straight Winner
                   of the esteemed Persistent Beggar's Community Cup.
                                      ...

  ABOUT THE REGISTRY
  ==================
  Hello, if you are new, please stay with us.  A brief explanation of our service will 
  follow.  First, a bit of important news from our beloved magistrate.  (The kids call
  him Uncle Von Guffuncle. Tehe!)

  IMPORTANT NEWS
  ==============
  / 15 April 2005 /
  hi, big news.  we were on channel 8 in wixl and ordish.  cory saw it.  i was on and 
  jerry mathers was on.  if you didn't see it, e-mail cory.  he tells it the best.  all 
  i can say is those aren't MY hand motions!! (joke for people who watch channel 8.)  
  thanks harry and whole channel 8 news team!!
                                                   - perry

  / 07 April 2005 /
  we're all sifting through the carpet here at hq, but if you could all keep an eye out 
  for caitlin's clipboard, she's too quiet of a gal to post it and i know that it's 
  REALLY important to her.  she had a few really expensive panoramic radiographs of her 
  husband's underbite clipped to a few irreplacable photos of her husband in a robocop 
  costume back when the underbite was more prominent.  she says (to me), "they'll know
  what i mean when they see them."  i don't know what that means.  :(

  i've checked: * the front desk * the hall * the waiting area * the bathroom * the candy 
  closet * the big tv area * the lunch counter * the disciples room * gaff's old room
  (the one with the painting of the cherry tree) * the server room * staircase.  i'll 
  update this as i find more rooms.
                                                   - love, perry

  / 25 Feb 2005 /
  server went down at 3 o'clock.  i'm mad as you guys.  gaff is downstairs and he'll 
  be down there until he gets it fixed. :O -- UPDATE: it's fixed, back in bizz!!
                                                   - perry

  / 23 Feb 2005 /
  i know there's a lot of noise today.  stanley bros circus lost twelve llamas and a
  trailer and a bunch of Masterlocks and five tents.  they're still finding lost stuff.
  pls keep your heads, i need everyone's help.  these entertainers have _nothing_.  i 
  mean it.  i gave a guy a purple sticker today (it's just something i like to do as a
  kind gesture) and he practically slept on it and farmed the ingredients for pizza sauce
  on it.  they are on rock bottom.

  so please donate.  i know we don't have paypal or anything.  so if you want to donate,
  just post that you found something (a children's bike, a month of perishable canned 
  goods) and that it has the circus people's names written on it or something.
                                                   - great, perry

  / 15 Nov 2004 /
  preeventualist's day sale.  if you lose something today, you get to pick one free 
  item (of $40 value or less) from the house of somebody who found something.  we're 
  having so much fun with this!!  this is EXACTLY how i got my rowing machine last year
  and i LOVE IT!!
                                                   - perry
</pre></div>
	<p>I think the Youth Study Clan is doing a great job with this service.  It&#8217;s a little hokey and threadbare, but if it can get animals to stop using their instinctive means of declaring ownership, then hats off.</p>


	<p>Still, a preeventualist youth group?  How can that be?  You&#8217;ve got to at least <em>flirted with real cynicism</em> before you can become a preeventualist.  And you definitely can&#8217;t attend school. So, I don&#8217;t know.</p>


	<p>Going back to the list of instructions from the Preeventualist&#8217;s Losing and Finding Registry.</p>


<div class='example'><pre class="text"> USING THE L&#38;F SERVER
 ====================
 The L&#38;F is a free service.  The acts of losing and finding are essential qualities in
 building a preeventualist lifestyle.  We hope to accomodate your belief.

 We do not use HTML, in order to simplify our work here.  Our guys are already working
 fifteen hour days.  (Thanks, Terk!!  Thanks, Horace!!)

 You may search our service for your lost items.  Or you may add your lost (or found)
 item to our registry.  This is done by typing the proper address into your browser.

 SEARCHING
 =========
 To search for lost items, use the following address:

   http://preeventualist.org/lost/search?q={search word}

 You may replace {search word} with your search term.  For example, to search for "cup":

   http://preeventualist.org/lost/search?q=cup

 You will be given a list of cups which have been lost or found.

 If you want to search for only lost cups or only found cups, use the `searchlost' and
 `searchfound' pages:

   http://preeventualist.org/lost/searchlost?q=cup
</pre></div>
	<p>I&#8217;m not playing games.  I know where the truck is.  Really, I&#8217;m not teasing you.  I&#8217;ll  show you in just a sec.  I&#8217;m just saying, look at the foxes:</p>


	<p><img src="i/wixl-11.gif" title="Hummmmm." alt="Hummmmm." /></p>


	<p>They are helpless.  And yet, here is this great tool.  A possible key to getting out of this mess. I just want to poke around, see if there are any clues here.</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">open-uri</span><span class="punct">'</span>

 <span class="comment"># Searching all found items containing the word `truck'.</span>
 <span class="ident">open</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">http://preeventualist.org/lost/searchfound?q=truck</span><span class="punct">&quot;</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">truck</span><span class="punct">|</span>
   <span class="ident">puts</span> <span class="ident">truck</span><span class="punct">.</span><span class="ident">read</span>
 <span class="keyword">end</span></code></pre></div>
	<p>I&#8217;m not seeing anything about the tall fox&#8217;s truck in this list.  That&#8217;s okay. The foxes are out of it anyway.  We have some time.</p>


	<p>You&#8217;ve learned a very simple technique for retrieving a web page from the Internet.  The code uses the <code><span class="constant">OpenURI</span></code> library, which was written by one of my favorite Rubyists, Akira Tanaka.  He&#8217;s simplified reading from the Internet so that it&#8217;s identical to reading a file from your computer.</p>


	<p>In a previous chapter, we stored your diabolical ideas in a text file.  You read these files in Ruby using <code><span class="ident">open</span></code>.</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">open-uri</span><span class="punct">'</span>

 <span class="comment"># Opening an idea file from a folder on your computer.</span>
 <span class="ident">open</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">folder/idea-about-hiding-lettuce-in-the-church-chairs.txt</span><span class="punct">&quot;</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">idea</span><span class="punct">|</span>
   <span class="ident">puts</span> <span class="ident">idea</span><span class="punct">.</span><span class="ident">read</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Files are <strong>input-output objects</strong>.  You can read and write to a file.  In Ruby, all IO (input-output) objects have <code><span class="ident">read</span></code> and <code><span class="ident">write</span></code> methods.  The <code><span class="ident">open</span></code> method slides an IO object <strong>down the chute</strong> into a block for your use.  IO is your ticket to the outside world.  It&#8217;s the rays of sunlight cast through the prison bars.  (However, you can&#8217;t <code><span class="ident">write</span></code> to a web page with <code><span class="constant">OpenURI</span></code>.  You&#8217;ll need to find a tool for copying to your web server.  An <span class="caps">FTP</span> program, for instance.)</p>


	<p>If someone wants to read your diabolical idea about hiding lettuce in the church chairs, assuming you&#8217;ve posted it as a web page:</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">open-uri</span><span class="punct">'</span>

 <span class="comment"># Opening an idea file available on a web site.</span>
 <span class="ident">open</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">http://your.com/idea-about-hiding-lettuce-in-the-church-chairs.txt</span><span class="punct">&quot;</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">idea</span><span class="punct">|</span>
   <span class="ident">puts</span> <span class="ident">idea</span><span class="punct">.</span><span class="ident">read</span>
 <span class="keyword">end</span></code></pre></div>
	<p>The <code><span class="constant">OpenURI</span></code> library also understands <span class="caps">FTP</span> addresses as well.  This widens the possibilities for where you can store files.  On your system or elsewhere on the Internet.</p>


	<h3>Reading Files Line by Line</h3>

	<p>When you&#8217;re using <code><span class="constant">OpenURI</span></code> to get information from the web with the <code><span class="ident">open</span></code> and <code><span class="ident">read</span></code> methods, the page is given to you as a <code><span class="constant">String</span></code>.  You can also read the page one line at a time, if you&#8217;re searching for something.  Or if the page is big and you want to conserve your computer&#8217;s memory.</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">open-uri</span><span class="punct">'</span>
 <span class="ident">open</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">http://preeventualist.org/lost/searchfound?q=truck</span><span class="punct">&quot;</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">truck</span><span class="punct">|</span>
   <span class="ident">truck</span><span class="punct">.</span><span class="ident">each_line</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">line</span><span class="punct">|</span>
     <span class="ident">puts</span> <span class="ident">line</span> <span class="keyword">if</span> <span class="ident">line</span><span class="punct">['</span><span class="string">pickup</span><span class="punct">']</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>The above code will retrieve the list of trucks found by preeventualists, then display only those lines that actually contain the word &#8216;pickup&#8217;. That way we can trim out the descriptions and look for only the pertinent lines.</p>


	<p>Above, the <strong>index brackets</strong> are used on a string, so the string is searched for whatever is inside the brackets.  Since the string <code><span class="punct">'</span><span class="string">pickup</span><span class="punct">'</span></code> is inside the brackets, the <code><span class="ident">line</span></code> string is searched for the word &#8220;pickup&#8221;.</p>


	<p><img src="i/wixl-13.gif" title="On being funny." alt="On being funny." /></p>


	<p>When a web page is loaded with <code><span class="ident">read</span></code>, the entire page is loaded into memory.  Usually this only takes up a few thousand bytes.  But if a page is big (several megabytes), you&#8217;ll probably want to use <code><span class="ident">each_line</span></code>, which loads one line at a time to avoid exhausting memory.</p>


	<h3>Yielding is Kiddie Blocks</h3>

	<p>Ruby often uses iterators in this fashion.  Yes, iterators are used for cycling through each item in a collection of items, such as an array or hash.  Now look at an IO source as a collection of lines.  The iterator can crawl that collection of lines.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">IO</span>
   <span class="comment"># Definition for the each_line method.  Notice how it has no</span>
   <span class="comment"># argument list.  Blocks don't need to be listed as arguments.</span>
   <span class="keyword">def </span><span class="method">each_line</span>
     <span class="keyword">until</span> <span class="ident">eof?</span>        <span class="comment"># until we reach the end of the file...</span>
       <span class="keyword">yield</span> <span class="ident">readline</span>  <span class="comment"># pass a line into the block</span>
     <span class="keyword">end</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>The <code><span class="keyword">yield</span></code> keyword is the easiest way to use a block.  One word.  Just like a curtain has a pullstring or like a suitcase has a handle.  Inside a method, you can press the blinking <code><span class="keyword">yield</span></code> button and it will run the block attached to that method.  Glowing a strong red color until the code inside the block is done.  And then it goes back to blinking and you can press the button again if you like.</p>


<div class='example'><pre><code> <span class="keyword">def </span><span class="method">yield_thrice</span>
   <span class="keyword">yield</span>
   <span class="keyword">yield</span>
   <span class="keyword">yield</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Punch the <code><span class="keyword">yield</span></code> button three times quick and the block gets to live its life three times.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">a</span> <span class="punct">=</span> <span class="punct">['</span><span class="string">first, birth.</span><span class="punct">',</span> <span class="punct">'</span><span class="string">then, a life of flickering images.</span><span class="punct">',</span> <span class="punct">'</span><span class="string">and, finally, the end.</span><span class="punct">']</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">yield_thrice</span> <span class="punct">{</span> <span class="ident">puts</span> <span class="ident">a</span><span class="punct">.</span><span class="ident">shift</span> <span class="punct">}</span>
 <span class="comment"># prints out:</span>
 <span class="comment">#   first, birth.</span>
 <span class="comment">#   then, a life of flickering images.</span>
 <span class="comment">#   and, finally, the end.</span></code></pre></div>
	<p>The <code><span class="ident">shift</span></code> method pulls the first item off an array.  The barber <code><span class="ident">shift</span></code> cuts the hair off and hands it over.  Then, the scalp.  And just keeps going, whittling the poor guy down to nothing.</p>


	<p>You&#8217;ve seen blocks attached to methods.  Any Ruby method can have block attached to the end.</p>


<div class='example'><pre><code> <span class="comment"># The brief style of attaching a block to a method.</span>
 <span class="comment"># Here the block is surrounded with curly braces.</span>
 <span class="ident">open</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">idea.txt</span><span class="punct">&quot;</span> <span class="punct">)</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">f</span><span class="punct">|</span> <span class="ident">f</span><span class="punct">.</span><span class="ident">read</span> <span class="punct">}</span>

 <span class="comment"># The verbose style of attaching a block to a method.</span>
 <span class="comment"># Here the block is surrounded with `do' and `end'</span>
 <span class="ident">open</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">idea.txt</span><span class="punct">&quot;</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">f</span><span class="punct">|</span>
   <span class="ident">f</span><span class="punct">.</span><span class="ident">read</span>
 <span class="keyword">end</span></code></pre></div>
	<p>If you pass arguments to <code><span class="keyword">yield</span></code>, those arguments will also be passed to the block. The block is riding in a little sidecar attached to the method&#8217;s motorcycle.  The method yells out a list arguments, screaming to the block over all the wind as they&#8217;re racing through the desert.  The block taps his helmet like, &#8220;I get it, my brain gets it.&#8221;</p>


<div class='example'><pre><code> <span class="comment"># The method opens two files and slides the resulting IO objects down the</span>
 <span class="comment"># chute to an attached block.</span>
 <span class="keyword">def </span><span class="method">double_open</span> <span class="ident">filename1</span><span class="punct">,</span> <span class="ident">filename2</span>
   <span class="ident">open</span><span class="punct">(</span> <span class="ident">filename1</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">f1</span><span class="punct">|</span>
     <span class="ident">open</span><span class="punct">(</span> <span class="ident">filename2</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">f2</span><span class="punct">|</span>
       <span class="keyword">yield</span> <span class="ident">f1</span><span class="punct">,</span> <span class="ident">f2</span>
     <span class="keyword">end</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span>

 <span class="comment"># Prints the files out side-by-side.</span>
 <span class="ident">double_open</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">idea1.txt</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">idea2.txt</span><span class="punct">&quot;</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">f1</span><span class="punct">,</span> <span class="ident">f2</span><span class="punct">|</span>
   <span class="ident">puts</span> <span class="ident">f1</span><span class="punct">.</span><span class="ident">readline</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string"> | </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">f2</span><span class="punct">.</span><span class="ident">readline</span>
 <span class="keyword">end</span></code></pre></div>
	<p>You may also wonder what the <code><span class="keyword">yield</span></code> keyword has to do with street signs.  And really, it&#8217;s a good question with, I believe, a good answer.  When you run a method, you are giving that method control of your program.  Control to do its job and then come back to with an answer.</p>


	<p>With <code><span class="keyword">yield</span></code>, the method is stopping at the intersection, giving control back to you, to your block.  The method is letting you do your work before resuming its work.  So while the <code><span class="ident">each_line</span></code> method does the work of actually reading lines from a file, the <strong>block attached to the <code><span class="ident">each_line</span></code> method</strong> is handed the line itself and gets a chance to hammer away at it in the sidecar.</p>


	<h3>Preeventualism in a Gilded Box</h3>

	<p>You&#8217;ve learned so much about <code><span class="constant">OpenURI</span></code> and using <code><span class="keyword">yield</span></code> to write your own iterators. You know your way around the lost-and-found service.  Really, you can starting hunting through the Wixl junk drawer without me.</p>


	<p>Let&#8217;s neatly <em>encapsulate</em> the entire service into a single class.</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">open-uri</span><span class="punct">'</span>
 <span class="keyword">module </span><span class="module">PreEventualist</span>
   <span class="keyword">def </span><span class="method">self.open</span> <span class="ident">page</span><span class="punct">,</span> <span class="ident">query</span>
     <span class="ident">qs</span> <span class="punct">=</span> 
       <span class="ident">query</span><span class="punct">.</span><span class="ident">map</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">k</span><span class="punct">,</span> <span class="ident">v</span><span class="punct">|</span>
         <span class="constant">URI</span><span class="punct">.</span><span class="ident">escape</span> <span class="punct">&quot;</span><span class="string"><span class="expr">#{ k }</span>=<span class="expr">#{ v }</span></span><span class="punct">&quot;</span> 
       <span class="keyword">end</span><span class="punct">.</span><span class="ident">join</span> <span class="punct">&quot;</span><span class="string">&amp;</span><span class="punct">&quot;</span> 
     <span class="constant">URI</span><span class="punct">.</span><span class="ident">parse</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">http://preeventualist.org/lost/</span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">page</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string">?</span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">qs</span> <span class="punct">).</span><span class="ident">open</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">lost</span><span class="punct">|</span>
       <span class="ident">lost</span><span class="punct">.</span><span class="ident">read</span><span class="punct">.</span><span class="ident">split</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">--<span class="escape">\n</span></span><span class="punct">&quot;</span> <span class="punct">)</span>
     <span class="keyword">end</span>
   <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">self.search</span> <span class="ident">word</span>
     <span class="ident">open</span> <span class="punct">&quot;</span><span class="string">search</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">q</span><span class="punct">&quot;</span> <span class="punct">=&gt;</span> <span class="ident">word</span>
   <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">self.searchlost</span> <span class="ident">word</span>
     <span class="ident">open</span> <span class="punct">&quot;</span><span class="string">searchlost</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">q</span><span class="punct">&quot;</span> <span class="punct">=&gt;</span> <span class="ident">word</span>
   <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">self.searchfound</span> <span class="ident">word</span>
     <span class="ident">open</span> <span class="punct">&quot;</span><span class="string">searchfound</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">q</span><span class="punct">&quot;</span> <span class="punct">=&gt;</span> <span class="ident">word</span>
   <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">self.addfound</span> <span class="ident">your_name</span><span class="punct">,</span> <span class="ident">item_lost</span><span class="punct">,</span> <span class="ident">found_at</span><span class="punct">,</span> <span class="ident">description</span>
     <span class="ident">open</span> <span class="punct">&quot;</span><span class="string">addfound</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">name</span><span class="punct">&quot;</span> <span class="punct">=&gt;</span> <span class="ident">your_name</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">item</span><span class="punct">&quot;</span> <span class="punct">=&gt;</span> <span class="ident">item_lost</span><span class="punct">,</span> 
                      <span class="punct">&quot;</span><span class="string">at</span><span class="punct">&quot;</span> <span class="punct">=&gt;</span> <span class="ident">found_at</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">desc</span><span class="punct">&quot;</span> <span class="punct">=&gt;</span> <span class="ident">description</span>
   <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">self.addlost</span> <span class="ident">your_name</span><span class="punct">,</span> <span class="ident">item_found</span><span class="punct">,</span> <span class="ident">last_seen</span><span class="punct">,</span> <span class="ident">description</span>
     <span class="ident">open</span> <span class="punct">&quot;</span><span class="string">addlost</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">name</span><span class="punct">&quot;</span> <span class="punct">=&gt;</span> <span class="ident">your_name</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">item</span><span class="punct">&quot;</span> <span class="punct">=&gt;</span> <span class="ident">item_found</span><span class="punct">,</span>
                     <span class="punct">&quot;</span><span class="string">seen</span><span class="punct">&quot;</span> <span class="punct">=&gt;</span> <span class="ident">last_seen</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">desc</span><span class="punct">&quot;</span> <span class="punct">=&gt;</span> <span class="ident">description</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>At some point with your code, you need to start shaping it into something neat.  Save the above module in a file called <code><span class="ident">preeventualist</span><span class="punct">.</span><span class="ident">rb</span></code>.</p>


	<p>This module is a very simple library for using the Preeventualist&#8217;s service.  This is exactly the way libraries are written.  You whip up a module or a class, store it in a file, and, if you&#8217;re happy with it and want the world to benefit, put it on the web.</p>


	<p>These stragglers can you use your module just like I used <code><span class="constant">OpenURI</span></code> earlier.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">require</span> <span class="punct">'</span><span class="string">preeventualist</span><span class="punct">'</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">puts</span> <span class="constant">PreEventualist</span><span class="punct">.</span><span class="ident">search</span><span class="punct">(</span> <span class="punct">'</span><span class="string">truck</span><span class="punct">'</span> <span class="punct">)</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">puts</span> <span class="constant">PreEventualist</span><span class="punct">.</span><span class="ident">addfound</span><span class="punct">(</span> <span class="punct">'</span><span class="string">Why</span><span class="punct">',</span> <span class="punct">'</span><span class="string">Ruby skills</span><span class="punct">',</span> <span class="punct">'</span><span class="string">Wixl park</span><span class="punct">',</span>
        <span class="punct">&quot;</span><span class="string">I can give you Ruby skills!<span class="escape">\n</span>Come visit poignantguide.net!</span><span class="punct">&quot;</span> <span class="punct">)</span></code></pre></div>

    
    
        
        <a name="section2" />
        <h2>2. Meanwhile, The Porcupine Stops To Fill-Up</h2>

        <p><img src="i/porcupine-1.gif" title="The porcupine pays for gas.  Kites?" alt="The porcupine pays for gas.  Kites?" /></p>

    
    
        
        <a name="section3" />
        <h2>3. A Sponsored Dragon-Slaying</h2>

        <p><img src="i/wixl.dwemthy-1.gif" title="The slayer hops in." alt="The slayer hops in." /></p>


	<p>&#8220;Look around,&#8221; said Fox Small.  &#8220;Some of us don&#8217;t have time for quests.  Some of us have major responsibilities, jobs, so on.   Livelihood, got it?&#8221;</p>


	<p>&#8220;<em>Heyyyy</em>, my <strong>JOB</strong> was to kill the drgn!!&#8221; screamed the wee rabbit, blinking his eyes and bouncing frantically from tree to tree to pond to pond.  &#8220;His snout was a <strong>HUGE</strong> responsibility!!  His smoky breath was <em>mine to reckon with!!</em> I spent fifty dollars on the cab <strong>JUST</strong> to get out there, which was another <em>huge huge</em> ordeal.  You have <em>nothing on me</em>, not a <em>single</em> indictment, my whole <strong>HERONESS</strong> is <em>absoflutely unimpeachable</em>, my whole <strong>APPROACH</strong> is <em>abassoonly unapricotable</em>, just ask Lester.&#8221;</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>The Inadvertant Meteor</h2>
        

        <p><em>When I first began my inquiry into preeventualism, I was relayed the following story.  I was told that this was all I needed to understand the philosophy.</em></p>


	<p>There was this sculptor who just wasn&#8217;t satisfied with his work.  He had primarily studied traditional subject matter and excelled at sculpting both the human figure and elaborate vegetation.  And he was really quite an exquisite sculptor.  He just didn&#8217;t feel like he was making his mark upon the world.</p>


	<p>By this time, he had aged well into his fifties and wanted to vaunt into the realm of legendary masters. So he began to construct a massive sculpture of two pears with beads of dew clinging precariously to them.</p>


	<p>The sculpture was enormous and hovered ominously above the sculptor&#8217;s hometown, held aloof by a massive infrastructure of struts and beams. In fact, the giant pears were so significant that they truly wreaked havoc on the Earth&#8217;s rotation, everso slightly, what with a new asteroid-sized fruit basket clinging to it.</p>


	<p>The government sent jets and warcrafts to destroy the statue.  They unleashed a vicious attack on the village, dismantling the statue, blowing it into thousands of pieces, chipping away at it with missiles.  Soon enough, the statue was obliterated and all was back to normal.</p>


	<p>A huge chunk of the statue had taken orbit in the heavens and often veered perilously close to the planet.  When it did, it was always met by an arsenal of advanced weaponry, which further damaged it and deflected its course skyward.</p>


	<p>Eventually, this inadvertant meteor was nothing more than the size of a very daunting man.  And, when it at last hit the ground, weathered and polished by its ninety year journey, it was hailed as an enigmatic masterpiece, a message from the great beyond.  Here was a stunning likeness of a male nude looking  wistfully into the sky with an intricate lacework of vines creeping around his waist and covering his  improprieties.</p>


	<p>The statue was last sold for fifty-two million dollars and stayed in the permanent exhibit at the Louvre, with the plaque:</p>


	<blockquote>
		<p>&#8220;Heavenly Nude&#8221; by Anonymous</p>
	</blockquote>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>&#8220;Who&#8217;s Lester?&#8221; said the Fox Small.</p>


	<p>&#8220;Lester&#8217;s my cab driver!  He parked at the base of Dwemthy&#8217;s Array!!&#8221;  The rabbit ricocheted madly like a screensaver for a supercomputer.  <em>&#8220;Just ask Dwemthy!!&#8221;</em></p>


	<p>&#8220;Well,&#8221; said the Fox Small.  He turned back to look up at Fox Tall, who was sitting straight and looking far into the distance.  &#8220;Wait, they have a parking lot on Dwemthy&#8217;s Array?&#8221;</p>


	<p><strong>&#8220;YEP!!</strong>  And a pretzel stand!!&#8221;</p>


	<p>&#8220;But, it&#8217;s <em>an Array</em>?  Do they sell churros?&#8221;</p>


	<p><strong>&#8220;CHOCOLAVA!!&#8221;</strong> bleeted the rabbit.</p>


	<p>&#8220;What about those glow-in-the-dark ropes that you can put in your hair?  Or you can just hold them by your side or up in the air&#8212;&#8221;</p>


	<p><strong>&#8220;BRAIDQUEST!!&#8221;</strong></p>


	<p>&#8220;You should get a cut of the salesman&#8217;s commission,&#8221; spoke Fox Small.  &#8220;Folks came out to see you kill the dragon, right?&#8221;</p>


	<p><strong>&#8220;BUT!!</strong>  I don&#8217;t operate the tongs that actually extract the chocolava.&#8221;</p>


	<p>&#8220;I&#8217;m just sayin.  You <strong>do</strong> operate the killing mechanism.  So you <em>have a stake</em> in the ensalada.&#8221;</p>


	<p>&#8220;OH NO!!  I left my favorite lettuce leaves in Dwemthy&#8217;s Array!!&#8221; squealed the rabbit, twirling like a celebratory saber through the quaking oak.  Distantly: &#8220;Or Lester&#8217;s trunk, maybe?&#8221;</p>


	<p>&#8220;You know&#8212;Gheesh, can you stay put??&#8221; said Fox Small.</p>


	<p>&#8220;My radio,&#8221; said Fox Tall, stirring to life for a moment, &#8220;in my pickup.&#8221;  The glaze still seeping from his eyes.  His stare quivered and set back into his face, recalling another time and place.  A drive out to Maryland.  Sounds of Lionel Richie coming in so clearly.  The wipers going a bit too fast.  He pulls up to a house.  His mother answers the door. She is a heavily fluffed fox.  Tears and makeup.</p>


	<p>Slumping back down, &#8220;That porcupine is changing my presets.&#8221;</p>


	<p>The rabbit bounded up on to the armrest of the park bench and spoke closely.  <strong>&#8220;BUT!!</strong> Soon I will feast on drgn&#8217;s head and the juices of drgn&#8217;s tongue!!&#8221;  The rabbit sat still and held his paws kindly.</p>


	<p>&#8220;(Which I hope will taste like cinnamon bears,)&#8221; whispered the rabbit, intimately.</p>


	<p>&#8220;I love cinammon,&#8221; said Fox Small.  &#8220;I should go killing with you some time.&#8221;</p>


	<p>&#8220;You should,&#8221; said the rabbit and the eyes shine-shined.</p>


	<p>&#8220;Although, salivating over a tongue.  You don&#8217;t salivate over it, do you?&#8221;</p>


	<p>&#8220;I DO!!&#8221; and the rabbit got so excited that Sticky Whip shot out of his eyes.  (More on Sticky Whip in a later sidebar. Don&#8217;t let me forget.  See also: <em>The Purist&#8217;s Compendium to Novelty Retinal Cremes</em> by Jory Patrick Sobgoblin, available wherever animal attachment clips are sold.)</p>


	<p>&#8220;Okay, you&#8217;ve hooked me.  I want to hear all about it,&#8221; Fox Small declared. &#8220;Please, talk freely about the chimbly.  Oh, and Dwemthy.  Who is he?  What makes him tick?  Then maybe, if I&#8217;m still around after that, you can tell me about what makes rabbits tick, and maybe you can hold our hands through this whole missing truck ordeal. I need consolation more than anything else.  I could probably use religion right now.  I could use your personal bravery and this sense of accomplishment you exude.  Do you smoke a pipe?  Could be a handy tool to coax along the pontification we must engage in.&#8221;</p>


	<p>And the rabbit began expounding upon Dwemthy and the legend of Dwemthy and the ways of Dwemthy. As with most stories of Dwemthy, the rabbit&#8217;s tales were mostly embellishments. Smotchkkiss, there are delicacies which I alone must address.</p>


	<p>Please, never ask who Dwemthy is. Obviously he is a mastermind and would never disclose his location or true identity. He has sired dynasties. He has set living ogres aflame. Horses everywhere smell him at all times. Most of all, he knows carnal pleasures. And to think that this&#8230;</p>


	<p>This is his Array.</p>


	<h3>Dwemthy&#8217;s Array</h3>

	<p><img src="i/dwemthy-asweome.gif" title="Dwemthy's Array has charmed and tormented the village folk for centuries." alt="Dwemthy's Array has charmed and tormented the village folk for centuries." /></p>


	<p>You stand at the entrance of Dwemthy&#8217;s Array.  You are a rabbit who is about to die. And deep at the end of the Array:</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">Dragon</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">life</span> <span class="number">1340</span>     <span class="comment"># tough scales</span>
   <span class="ident">strength</span> <span class="number">451</span>  <span class="comment"># bristling veins</span>
   <span class="ident">charisma</span> <span class="number">1020</span> <span class="comment"># toothy smile</span>
   <span class="ident">weapon</span> <span class="number">939</span>    <span class="comment"># fire breath</span>
 <span class="keyword">end</span></code></pre></div>
	<p>A scalding <em>SEETHING <span class="caps">LAVA</span></em> infiltrates the <strong>cacauphonous <span class="caps">ENGORGED MINESHAFTS</span></strong> deep within the ageless canopy of the <em>DWEMTHY <span class="caps">FOREST</span></em>... chalky and nocturnal screams from <strong>the belly of the <span class="caps">RAVENOUS WILD STORKUPINE</span></strong>... who eats <strong>wet goslings</strong> <em>RIGHT <span class="caps">AFTER</span></em> they&#8217;ve had a few graham crackers and a midday nap&#8230; amidst starved hippos <em>TECHNICALLY <span class="caps">ORPHANED</span></em> but truthfully sheltered by umbrellas owned jointly by car dealership conglomerates&#8230; beneath <em>uncapped vials</em> of mildly pulpy <strong>BLUE <span class="caps">ELIXIR</span></strong>... <em>which shall remain&#8230; heretofore&#8230; <strong>UNDISTURBED&#8230; <span class="caps">DWEMTHY</span>!!!</strong></em></p>


	<p><img src="i/wixl.dwemthy-2.gif" title="Luck and mother nature." alt="Luck and mother nature." /></p>


	<p><em>If you don&#8217;t understand Dwemthy&#8217;s Array, it is Dwemthy&#8217;s fault. He designed the game to complicate our lives and were it simpler, it would not be the awe-inspiring quest we&#8217;ve come to cherish in our arms this very hour.</em></p>


	<p>Dwemthy&#8217;s Array has a winding history of great depth.  It is not enough to simply say, &#8220;Dwemthy&#8217;s Array,&#8221; over and over and expect to build credentials from that act alone.  Come with me, I can take you back a couple years, back to the sixties where it all started with metaprogramming and the dolphins.</p>


	<p>You might be inclined to think that <strong>metaprogramming</strong> is another hacker word and was first overheard in private phone calls between fax machines.  Honest to God, I am here to tell you that it is stranger than that. Metaprogramming began with <em>taking drugs in the company of dolphins</em>.</p>


	<p>In the sixties, a prolific scientist named John C. Lilly began experimenting with his own senses, to uncover the workings of his body.  I can relate to this.  I do this frequently when I am standing in the middle of a road holding a pie or when I am hiding inside a cathedral.  I pause to examine my self.  This has proven to be nigh impossible.  I have filled three ruled pages with algebraic notation, none of which has explained anything.  The pie, incidentally, has been very easy to express mathematically.</p>


	<p>But the scientist Lilly went about his experiments otherwise.  He ingested <span class="caps">LSD</span> in the company of dolphins. Often in a dark, woeful isolation tank full of warm salt water.  Pretty bleak.  But it was science!  (Lest you think him criminal: until 1966, <span class="caps">LSD</span> was supplied by Sandoz Laboratories to any interested scientists, free of charge.)</p>


	<p><strong>Drugs, dolphins and deprivation.</strong>  Which led to Lilly&#8217;s foray into things meta.  He wrote books on mental programming, comparing humans and computers.  You may choose to ingest any substance you want during this next quote <del>- most likely you&#8217;re reaching for the grain of salt &#8211; </del> but I assure you that there&#8217;s no Grateful Dead show on the lawn and no ravers in the basement.</p>


	<blockquote>
		<p>When one learns to learn, one is making models, using symbols, analogizing, making metaphors, in short, inventing and using language, mathematics, art, politics, business, etc. At the critical brain (cortex) size, languages and its consequences appear. To avoid the necessity of repeating learning to learn, symbols, metaphors, models each time, I symbolize the underlying idea in these operations as metaprogramming.</p>
	</blockquote>

	<blockquote>
		<p class="attrib">John C. Lilly, <em>Programming and Metaprogramming in the Human Biocomputer</em>, New York, 1972.</p>
	</blockquote>

	<p>We learn.  But first we learn to learn.  We setup programming in our mind which is the pathway to further programming.  (Lilly is largely talking about programming the brain and the nervous system, which he collectively called the <em>biocomputer</em>.)</p>


	<p>Lilly&#8217;s metaprogramming was more about feeding yourself imagery, reinventing yourself, all that. This sort of thinking links directly to folks out there who dabble in shamanism, wave their hands over tarot cards and wake up early for karate class.  I guess you could say metaprogramming is New Age, but it&#8217;s all settled down recently into a sleeping bag with plain old nerdiness.  (If you got here from a Google search for &#8220;C++ Metaprogramming&#8221;, stick around, but I only ask that you <em>burn</em> those neural pathways that originally invoked the search.  Many thanks.)</p>


	<p>Meta itself is spoken of no differently in your author&#8217;s present day.</p>


	<blockquote>
		<p>All sensuous response to reality is an interpretation of it.  Beetles and monkeys clearly interpret their world, and act on the basis of what they see. Our physical senses are themselves organs of interpretation.  What distinguishes us from our fellow animals is that we are able in turn to interpret these interpretations.  In that sense, all human language is meta-language.  It is a second-order reflection on the &#8216;language&#8217; of our bodies&#8212;of our sensory apparatus.</p>
	</blockquote>

	<blockquote>
		<p class="attrib">Terry Eagleton, <em>After Theory</em>, London, 2003, ch. 3.</p>
	</blockquote>

	<p>To that end, you could say programming itself is a meta-language.  <em>All code</em> speaks the language of action, of a plan which hasn&#8217;t been played yet, but shortly will.  Stage directions for the players inside your machine.  I&#8217;ve waxed sentimental on this before.</p>


	<p>But now we&#8217;re advancing our study, venturing into metaprogramming, but don&#8217;t sweat it, <strong>it&#8217;s still just the Ruby you&#8217;ve seen already</strong>, which is why Dwemthy feels no qualms thrusting it at you right away.  Soon enough it will be as easy to spot as addition or subtraction.  At first it may seem intensely bright, like you&#8217;ve stumbled across your first firefly, which has flown up in your face.  Then, it becomes just <em>a little bobbing light</em> which makes living in Ohio so much nicer.</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Bread Riddles</h2>
        

        <p>Question: Can one take five bites from a bread and make the shape of a bicycle?
Answer: Yes.</p>


	<p>Question: Can one rip a bread in half and still fit the bread in an envelope?
Answer: Yes.</p>


	<p>Question: Can one man take a bread and throw it while another man sits without bread?
Answer: Yes.</p>


	<p>Question: Can four breads in a box be explained?
Answer: Yes.</p>


	<p>Question: Can a clerical error in my company books be attributed to bread?
Answer: Yes.</p>


	<p>Question: Can dancers break through a scrim of bread?
Answer: Yes.</p>


	<p>Question: Can those same dancers, when faced with an inexplicably different scrim of bread, fail to break through?
Answer: Yes.</p>


	<p>Question: Does bread understand my darkest fears and wildest dreams?
Answer: Yes.</p>


	<p>Question: Does bread desire me?
Answer: Yes.</p>


	<p>Question: Will bread be invisible to robots?
Answer: Yes.</p>


	<p>Question: Can one robot take eight bites on a bread, without knowing it&#8217;s there, and make the shape of a smaller bread?
Answer: Yes.</p>


	<p>Question: Should my clerics be equipped with bread?
Answer: Yes.</p>


	<p>Question: In relation to bread, will robots each have their own elephants?
Answer: Yes.</p>


	<p>Question: Can one rip a bread in half and not let it ruin one&#8217;s game of dominoes?
Answer: Yes.</p>


	<p>Question: Will we always love bread?
Answer: Yes.</p>


	<p>Question: Will we have more bread?
Answer: Yes.</p>


	<p>Question: Can four breads marry a robot&#8217;s elephant?
Answer: Yes.</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Metaprogramming is <em>writing code which writes code</em>.  But not as M.C. Escher would sketch it.  <strong>The program isn&#8217;t reaching back around and overwriting itself, nor is the program jumping onto your screen and wrenching the keyboard from your hands.</strong>  No, it&#8217;s much smaller than that.</p>


	<p>Let&#8217;s say it&#8217;s more like <strong>a little orange pill</strong> you won at the circus.  When you suck on it, the coating wears away and behind your teeth hatches a massive, floppy sponge brontosaurus.  He slides down your tongue and leaps free, frollicking  over the pastures, yelping, &#8220;Papa!&#8221;  And from then on, whenever he freaks out and attacks a van, well, that van is <em>sparkling clean</em> afterwards.</p>


	<p>Now, let&#8217;s say <em>someone else</em> puts <strong>their little orange pill</strong> under the faucet.  Not on their tongue, <em>under the faucet</em>.  And this triggers a different catalysm, which births a set of wailing sponge sextuplets.  <strong>Umbilical cords and everything.</strong>  Still very handy for cleaning the van. But an altogether different kind of chamois.  And, one day, these eight will stir Papa to tears when they perform the violin concerto of their lives.</p>


	<p>Metaprogramming is packing code into pill-form, such that a slender drop of water could trigger it to expand. More importantly, you can control the pill&#8217;s reaction, so that a brontosaurus is produced, scaly and lumbering. Or septulets, <strong>CERTAINLY</strong>.  Or seamstresses.  Or cat brains.  Or dragons.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">Dragon</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">life</span> <span class="number">1340</span>     <span class="comment"># tough scales</span>
   <span class="ident">strength</span> <span class="number">451</span>  <span class="comment"># bristling veins</span>
   <span class="ident">charisma</span> <span class="number">1020</span> <span class="comment"># toothy smile</span>
   <span class="ident">weapon</span> <span class="number">939</span>    <span class="comment"># fire breath</span>
 <span class="keyword">end</span></code></pre></div>
	<p>This is not metaprogramming yet.  Only the pill.  The <em>product</em> of metaprogramming.  We are pausing, looking at the beast itself before descending beneath its flesh with a scalpel and microscope.</p>


	<p>The <code><span class="constant">Dragon</span></code> is a class.  You&#8217;ve seen that many times now.  The <code><span class="constant">Dragon</span></code> is a descendant of the <code><span class="constant">Creature</span></code> class.</p>


	<p>Now, eyes up.  Look at me.  The <code><span class="constant">Creature</span></code> class contains the metaprogramming code.  You can write metaprogramming code which can be used <em>everywhere</em>, throughout Ruby, in <code><span class="constant">Creature</span></code> or <code><span class="constant">Dragon</span></code>, in <code><span class="constant">String</span></code> or in <code><span class="constant">Object</span></code>, anywhere. Our example here, since this is the most common form of meta-code, focuses on metaprogramming inside your own classes only.</p>


	<p>Each of the <code><span class="constant">Dragon</span></code>&#8217;s traits are simply <strong>class methods</strong>.  You could also write this as:</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">Dragon</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">life</span><span class="punct">(</span> <span class="number">1340</span> <span class="punct">)</span>     <span class="comment"># tough scales</span>
   <span class="ident">strength</span><span class="punct">(</span> <span class="number">451</span> <span class="punct">)</span>  <span class="comment"># bristling veins</span>
   <span class="ident">charisma</span><span class="punct">(</span> <span class="number">1020</span> <span class="punct">)</span> <span class="comment"># toothy smile</span>
   <span class="ident">weapon</span><span class="punct">(</span> <span class="number">939</span> <span class="punct">)</span>    <span class="comment"># fire breath</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Removing the parens removes clutter, so let&#8217;s leave them out.  Only use parens when you are using several methods together and you want to be very clear.</p>


	<h3>Creature Code</h3>

	<p>Now, with a lateral slice across the diaphragm, we expose the innards of <code><span class="constant">Creature</span></code>.  <strong>Save this code into a file called <code><span class="ident">dwemthy</span><span class="punct">.</span><span class="ident">rb</span></code>.</strong></p>


<div class='example'><pre><code> <span class="comment"># The guts of life force within Dwemthy's Array</span>
 <span class="keyword">class </span><span class="class">Creature</span>

   <span class="comment"># Get a metaclass for this class</span>
   <span class="keyword">def </span><span class="method">self.metaclass</span><span class="punct">;</span> <span class="keyword">class </span><span class="punct">&lt;&lt;</span> <span class="constant">self</span><span class="punct">;</span> <span class="constant">self</span><span class="punct">;</span> <span class="keyword">end</span><span class="punct">;</span> <span class="keyword">end</span>

   <span class="comment"># Advanced metaprogramming code for nice, clean traits</span>
   <span class="keyword">def </span><span class="method">self.traits</span><span class="punct">(</span> <span class="punct">*</span><span class="ident">arr</span> <span class="punct">)</span>
     <span class="keyword">return</span> <span class="attribute">@traits</span> <span class="keyword">if</span> <span class="ident">arr</span><span class="punct">.</span><span class="ident">empty?</span>

     <span class="comment"># 1. Set up accessors for each variable</span>
     <span class="ident">attr_accessor</span> <span class="punct">*</span><span class="ident">arr</span>

     <span class="comment"># 2. Add a new class method to for each trait.</span>
     <span class="ident">arr</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">a</span><span class="punct">|</span>
       <span class="ident">metaclass</span><span class="punct">.</span><span class="ident">instance_eval</span> <span class="keyword">do</span>
         <span class="ident">define_method</span><span class="punct">(</span> <span class="ident">a</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">val</span><span class="punct">|</span>
           <span class="attribute">@traits</span> <span class="punct">||=</span> <span class="punct">{}</span>
           <span class="attribute">@traits</span><span class="punct">[</span><span class="ident">a</span><span class="punct">]</span> <span class="punct">=</span> <span class="ident">val</span>
         <span class="keyword">end</span>
       <span class="keyword">end</span>
     <span class="keyword">end</span>

     <span class="comment"># 3. For each monster, the `initialize' method</span>
     <span class="comment">#    should use the default number for each trait.</span>
     <span class="ident">class_eval</span> <span class="keyword">do</span>
       <span class="ident">define_method</span><span class="punct">(</span> <span class="symbol">:initialize</span> <span class="punct">)</span> <span class="keyword">do</span>
         <span class="constant">self</span><span class="punct">.</span><span class="ident">class</span><span class="punct">.</span><span class="ident">traits</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">k</span><span class="punct">,</span><span class="ident">v</span><span class="punct">|</span>
           <span class="ident">instance_variable_set</span><span class="punct">(&quot;</span><span class="string">@<span class="expr">#{k}</span></span><span class="punct">&quot;,</span> <span class="ident">v</span><span class="punct">)</span>
         <span class="keyword">end</span>
       <span class="keyword">end</span>
     <span class="keyword">end</span>

   <span class="keyword">end</span>

   <span class="comment"># Creature attributes are read-only</span>
   <span class="ident">traits</span> <span class="symbol">:life</span><span class="punct">,</span> <span class="symbol">:strength</span><span class="punct">,</span> <span class="symbol">:charisma</span><span class="punct">,</span> <span class="symbol">:weapon</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Focus on the closing lines of code, specifically the line where the <code><span class="ident">traits</span></code> are being set up.  All of the code before that line sets up the <code><span class="ident">traits</span></code> class method.  This bears resemblance to the basic lottery tickets from the chapter previous.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">LotteryTicket</span>
   <span class="ident">attr_reader</span> <span class="symbol">:picks</span><span class="punct">,</span> <span class="symbol">:purchased</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Both <code><span class="ident">traits</span></code> and <code><span class="ident">attr_reader</span></code> are simply class methods.  When <code><span class="ident">attr_reader</span></code> is used in the <code><span class="constant">LotteryTicket</span></code>, metaprogramming kicks in behind the scenes and starts blowing up balloons, creating <strong>reader</strong> methods for the instance variables <code><span class="ident">picks</span></code> and <code><span class="ident">purchased</span></code> above.</p>


	<p>The code for the <code><span class="ident">traits</span></code> method is the metaprogramming I&#8217;ve been alluding to. Comments in the code reveal the three stages the method goes through when adding traits.</p>


<ol>
	<li>The <strong>list of traits is passed on to <code><span class="ident">attr_accessor</span></code></strong>, which builds <strong>reader</strong> and <strong>writer</strong> code for instance variables.  One for each trait.</li>
	<li><strong>Class methods are added</strong> for each trait.  (A <code><span class="ident">life</span></code> class method is added for a <code><span class="symbol">:life</span></code> trait.)  These class methods are used in the class definition just like you would use <code><span class="ident">traits</span></code> or <code><span class="ident">attr_accessor</span></code>.  This way, you can specify the trait, along with the points given for a trait to a certain creature.</li>
	<li><strong>Add an initialize method</strong> which sets up a new monster properly, grabbing the right points and <em>POWER UP! <span class="caps">POWER UP</span>!</em> the monster is alive!</li>
</ol>

	<p>The beauty of these three steps is that you&#8217;ve taught Ruby how to code monsters for you.  So when Ruby gets to the <code><span class="ident">traits</span></code>:</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">Creature</span>
   <span class="ident">traits</span> <span class="symbol">:life</span><span class="punct">,</span> <span class="symbol">:strength</span><span class="punct">,</span> <span class="symbol">:charisma</span><span class="punct">,</span> <span class="symbol">:weapon</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Ruby fills in the code behind the scenes and transplants a spiny green heart and jumpstarts the body with a pullcord. Ruby will use the metaprogramming from the <code><span class="constant">Creature</span></code> class and build out all the various methods, expanding the <code><span class="ident">traits</span></code> list like this:</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">Creature</span>

   <span class="comment"># 1. set up reader and writer methods</span>
   <span class="ident">attr_accessor</span> <span class="symbol">:life</span><span class="punct">,</span> <span class="symbol">:strength</span><span class="punct">,</span> <span class="symbol">:charisma</span><span class="punct">,</span> <span class="symbol">:weapon</span>

   <span class="comment"># 2. add new class methods to use in creature</span>
   <span class="keyword">def </span><span class="method">self.life</span><span class="punct">(</span> <span class="ident">val</span> <span class="punct">)</span>
     <span class="attribute">@traits</span> <span class="punct">||=</span> <span class="punct">{}</span>
     <span class="attribute">@traits</span><span class="punct">['</span><span class="string">life</span><span class="punct">']</span> <span class="punct">=</span> <span class="ident">val</span>
   <span class="keyword">end</span>

   <span class="keyword">def </span><span class="method">self.strength</span><span class="punct">(</span> <span class="ident">val</span> <span class="punct">)</span>
     <span class="attribute">@traits</span> <span class="punct">||=</span> <span class="punct">{}</span>
     <span class="attribute">@traits</span><span class="punct">['</span><span class="string">strength</span><span class="punct">']</span> <span class="punct">=</span> <span class="ident">val</span>
   <span class="keyword">end</span>

   <span class="keyword">def </span><span class="method">self.charisma</span><span class="punct">(</span> <span class="ident">val</span> <span class="punct">)</span>
     <span class="attribute">@traits</span> <span class="punct">||=</span> <span class="punct">{}</span>
     <span class="attribute">@traits</span><span class="punct">['</span><span class="string">charisma</span><span class="punct">']</span> <span class="punct">=</span> <span class="ident">val</span>
   <span class="keyword">end</span>

   <span class="keyword">def </span><span class="method">self.weapon</span><span class="punct">(</span> <span class="ident">val</span> <span class="punct">)</span>
     <span class="attribute">@traits</span> <span class="punct">||=</span> <span class="punct">{}</span>
     <span class="attribute">@traits</span><span class="punct">['</span><span class="string">weapon</span><span class="punct">']</span> <span class="punct">=</span> <span class="ident">val</span>
   <span class="keyword">end</span>

   <span class="comment"># 3. initialize sets the default points for</span>
   <span class="comment">#    each trait</span>
   <span class="keyword">def </span><span class="method">initialize</span>
     <span class="constant">self</span><span class="punct">.</span><span class="ident">class</span><span class="punct">.</span><span class="ident">traits</span><span class="punct">.</span><span class="ident">each</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">k</span><span class="punct">,</span><span class="ident">v</span><span class="punct">|</span>
       <span class="ident">instance_variable_set</span><span class="punct">(&quot;</span><span class="string">@<span class="expr">#{k}</span></span><span class="punct">&quot;,</span> <span class="ident">v</span><span class="punct">)</span>
     <span class="keyword">end</span>
   <span class="keyword">end</span>

 <span class="keyword">end</span></code></pre></div>
	<p>Now, Ruby will gladly accept this six-line <code><span class="constant">Dragon</span></code> code, short enough to look nice when printed on playing cards:</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">Dragon</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">life</span> <span class="number">1340</span>     <span class="comment"># tough scales</span>
   <span class="ident">strength</span> <span class="number">451</span>  <span class="comment"># bristling veins</span>
   <span class="ident">charisma</span> <span class="number">1020</span> <span class="comment"># toothy smile</span>
   <span class="ident">weapon</span> <span class="number">939</span>    <span class="comment"># fire breath</span>
 <span class="keyword">end</span></code></pre></div>
	<h3>Eval, the Littlest Metaprogrammer</h3>

	<p>While the metaprogramming code above is just plain Ruby, it can be difficult to follow still. I totally understand if you&#8217;ve come to this point and your eyes are spinning in their sockets and your knees have locked up.  The trickiest parts of the above are the lines which call the methods <code><span class="ident">instance_eval</span></code> and <code><span class="ident">class_eval</span></code>.  Just rub some tiger balm on your joints while I talk about <code><span class="ident">eval</span></code>.</p>


	<p>We&#8217;ve been talking about <strong>metaprogramming</strong>.  Writing code which writes code.  The <code><span class="ident">eval</span></code> method hangs out in this alley. The vagrant <code><span class="ident">eval</span></code> takes code you have stored up in a string and it executes that code.</p>


<div class='example'><pre><code> <span class="ident">drgn</span> <span class="punct">=</span> <span class="constant">Dragon</span><span class="punct">.</span><span class="ident">new</span>
 <span class="comment"># is identical to...</span>
 <span class="ident">drgn</span> <span class="punct">=</span> <span class="ident">eval</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">Dragon.new</span><span class="punct">&quot;</span> <span class="punct">)</span>
 <span class="comment"># or, alternatively...</span>
 <span class="ident">eval</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">drgn = Dragon.new</span><span class="punct">&quot;</span> <span class="punct">)</span></code></pre></div>
	<p>Here, let&#8217;s write a program which has a hole in it.  Instead of writing a program which creates a new <code><span class="constant">Dragon</span></code>, let&#8217;s leave a hole where the <code><span class="constant">Dragon</span></code> would be.</p>


<div class='example'><pre><code> <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">What monster class have you come to battle? </span><span class="punct">&quot;</span> 
 <span class="ident">monster_class</span> <span class="punct">=</span> <span class="ident">gets</span>
 <span class="ident">eval</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">monster = </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">monster_class</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string">.new</span><span class="punct">&quot;</span> <span class="punct">)</span>
 <span class="ident">p</span> <span class="ident">monster</span></code></pre></div>
	<p>The program asks for a monster.  If you type in <code><span class="constant">Dragon</span></code>, then the <code><span class="ident">monster_class</span></code> variable will contain the string <code><span class="punct">&quot;</span><span class="string">Dragon</span><span class="punct">&quot;</span></code>.  Inside the <code><span class="ident">eval</span></code>, a few strings get added together to make the string <code><span class="punct">&quot;</span><span class="string">monster = Dragon.new</span><span class="punct">&quot;</span></code>.  And when the <code><span class="ident">eval</span></code> executes this string, the <code><span class="ident">monster</span></code> variable contains a <code><span class="constant">Dragon</span></code> object.  Ready for battle.</p>


	<p>This is great!  Now we can leave it up to the player to pick a monster!  Of course, we&#8217;re trusting the player to supply a real monster class.  If they type in <code><span class="constant">BotanicalWitch</span></code> and there is no <code><span class="constant">BotanicalWitch</span></code> class, they&#8217;ll get an exception tossed in their face.</p>


	<p>So, in short, <code><span class="ident">eval</span></code> lets you make up code as you go.  Which can be useful and which can be dangerous as well.</p>


	<p>The <code><span class="ident">instance_eval</span></code> and <code><span class="ident">class_eval</span></code> method used in the metaprogramming for the <code><span class="constant">Creature</span></code> class are slightly different from the normal <code><span class="ident">eval</span></code>.  These two special methods run code just like <code><span class="ident">eval</span></code> does, but they duck into classes and objects and run the code there.</p>


<div class='example'><pre><code> <span class="comment"># The instance_eval method runs code as if it were run inside an</span>
 <span class="comment"># object's instance method.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">drgn</span> <span class="punct">=</span> <span class="constant">Dragon</span><span class="punct">.</span><span class="ident">new</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">drgn</span><span class="punct">.</span><span class="ident">instance_eval</span> <span class="keyword">do</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="attribute">@name</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">Tobias</span><span class="punct">&quot;</span> 
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">end</span>

 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">drgn</span><span class="punct">.</span><span class="ident">instance_variable_get</span><span class="punct">(</span> <span class="punct">&quot;</span><span class="string">@name</span><span class="punct">&quot;</span> <span class="punct">)</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Tobias</span><span class="punct">&quot;</span> 

 <span class="comment"># The class_eval method runs code is if inside a class definition.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Dragon</span><span class="punct">.</span><span class="ident">class_eval</span> <span class="keyword">do</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="keyword">def </span><span class="method">name</span><span class="punct">;</span> <span class="attribute">@name</span><span class="punct">;</span> <span class="keyword">end</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">end</span>

 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">drgn</span><span class="punct">.</span><span class="ident">name</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Tobias</span><span class="punct">&quot;</span></code></pre></div>
	<p>As you can see above, the <code><span class="ident">instance_eval</span></code> and <code><span class="ident">class_eval</span></code> methods also can take a code block instead of a string.  Which is just how things are done in Dwemthy&#8217;s Array.</p>


	<h3>Enough Belittling Instruction and Sly Juxtaposition&#8212;Where Is Dwemthy&#8217;s Array??</h3>

	<p>Tread carefully&#8212;here is <strong>the other half of <span class="caps">DWEMTHY</span>&#8217;S <span class="caps">ARRAY</span>!!</strong> <strong>Add these lines to <code><span class="ident">dwemthy</span><span class="punct">.</span><span class="ident">rb</span></code>.</strong></p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">Creature</span>

   <span class="comment"># This method applies a hit taken during a fight.</span>
   <span class="keyword">def </span><span class="method">hit</span><span class="punct">(</span> <span class="ident">damage</span> <span class="punct">)</span>
     <span class="ident">p_up</span> <span class="punct">=</span> <span class="ident">rand</span><span class="punct">(</span> <span class="ident">charisma</span> <span class="punct">)</span>
     <span class="keyword">if</span> <span class="ident">p_up</span> <span class="punct">%</span> <span class="number">9</span> <span class="punct">==</span> <span class="number">7</span>
       <span class="attribute">@life</span> <span class="punct">+=</span> <span class="ident">p_up</span> <span class="punct">/</span> <span class="number">4</span>
       <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">[<span class="expr">#{ self.class }</span> magick powers up <span class="expr">#{ p_up }</span>!]</span><span class="punct">&quot;</span> 
     <span class="keyword">end</span> 
     <span class="attribute">@life</span> <span class="punct">-=</span> <span class="ident">damage</span>
     <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">[<span class="expr">#{ self.class }</span> has died.]</span><span class="punct">&quot;</span> <span class="keyword">if</span> <span class="attribute">@life</span> <span class="punct">&lt;=</span> <span class="number">0</span>
   <span class="keyword">end</span>

   <span class="comment"># This method takes one turn in a fight.</span>
   <span class="keyword">def </span><span class="method">fight</span><span class="punct">(</span> <span class="ident">enemy</span><span class="punct">,</span> <span class="ident">weapon</span> <span class="punct">)</span>
     <span class="keyword">if</span> <span class="ident">life</span> <span class="punct">&lt;=</span> <span class="number">0</span>
       <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">[<span class="expr">#{ self.class }</span> is too dead to fight!]</span><span class="punct">&quot;</span> 
       <span class="keyword">return</span>
     <span class="keyword">end</span>

     <span class="comment"># Attack the opponent</span>
     <span class="ident">your_hit</span> <span class="punct">=</span> <span class="ident">rand</span><span class="punct">(</span> <span class="ident">strength</span> <span class="punct">+</span> <span class="ident">weapon</span> <span class="punct">)</span>
     <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">[You hit with <span class="expr">#{ your_hit }</span> points of damage!]</span><span class="punct">&quot;</span> 
     <span class="ident">enemy</span><span class="punct">.</span><span class="ident">hit</span><span class="punct">(</span> <span class="ident">your_hit</span> <span class="punct">)</span>

     <span class="comment"># Retaliation</span>
     <span class="ident">p</span> <span class="ident">enemy</span>
     <span class="keyword">if</span> <span class="ident">enemy</span><span class="punct">.</span><span class="ident">life</span> <span class="punct">&gt;</span> <span class="number">0</span>
       <span class="ident">enemy_hit</span> <span class="punct">=</span> <span class="ident">rand</span><span class="punct">(</span> <span class="ident">enemy</span><span class="punct">.</span><span class="ident">strength</span> <span class="punct">+</span> <span class="ident">enemy</span><span class="punct">.</span><span class="ident">weapon</span> <span class="punct">)</span>
       <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">[Your enemy hit with <span class="expr">#{ enemy_hit }</span> points of damage!]</span><span class="punct">&quot;</span> 
       <span class="constant">self</span><span class="punct">.</span><span class="ident">hit</span><span class="punct">(</span> <span class="ident">enemy_hit</span> <span class="punct">)</span>
     <span class="keyword">end</span>
   <span class="keyword">end</span>

 <span class="keyword">end</span>

 <span class="keyword">class </span><span class="class">DwemthysArray</span> <span class="punct">&lt;</span> <span class="constant">Array</span>
   <span class="keyword">alias</span> <span class="ident">_inspect</span> <span class="ident">inspect</span>
   <span class="keyword">def </span><span class="method">inspect</span><span class="punct">;</span> <span class="punct">&quot;</span><span class="string">#&lt;<span class="expr">#{ self.class }#{ _inspect }</span>&gt;</span><span class="punct">&quot;;</span> <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">method_missing</span><span class="punct">(</span> <span class="ident">meth</span><span class="punct">,</span> <span class="punct">*</span><span class="ident">args</span> <span class="punct">)</span>
     <span class="ident">answer</span> <span class="punct">=</span> <span class="ident">first</span><span class="punct">.</span><span class="ident">send</span><span class="punct">(</span> <span class="ident">meth</span><span class="punct">,</span> <span class="punct">*</span><span class="ident">args</span> <span class="punct">)</span>
     <span class="keyword">if</span> <span class="ident">first</span><span class="punct">.</span><span class="ident">life</span> <span class="punct">&lt;=</span> <span class="number">0</span>
       <span class="ident">shift</span>
       <span class="keyword">if</span> <span class="ident">empty?</span>
         <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">[Whoa.  You decimated Dwemthy's Array!]</span><span class="punct">&quot;</span> 
       <span class="keyword">else</span>
         <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">[Get ready. <span class="expr">#{ first.class }</span> has emerged.]</span><span class="punct">&quot;</span> 
       <span class="keyword">end</span>
     <span class="keyword">end</span>
     <span class="ident">answer</span> <span class="punct">||</span> <span class="number">0</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>This code adds two methods to <code><span class="constant">Creature</span></code>.  The <code><span class="ident">hit</span></code> method which reacts to a hit from another <code><span class="constant">Creature</span></code>.  And the <code><span class="ident">fight</span></code> method which lets you place your own blows against that <code><span class="constant">Creature</span></code>.</p>


	<p>When your <code><span class="constant">Creature</span></code> takes a hit, a bit of defense kicks in and your <code><span class="ident">charisma</span></code> value is used to generate a power-up.  Don&#8217;t ask me to explain the secrets behind this phenomenon.  A random number is picked, some simple math is done, and, if you&#8217;re lucky, you get a couple life points.  <code><span class="ident">life</span> <span class="punct">+=</span> <span class="ident">p_up</span> <span class="punct">/</span> <span class="number">4</span></code>.</p>


	<p>Then, the enemy&#8217;s blow is landed.  <code><span class="ident">life</span> <span class="punct">-=</span> <span class="ident">damage</span></code>.  That&#8217;s how the <code><span class="constant">Creature</span><span class="comment">#hit</span></code> method works.</p>


	<p>The <code><span class="ident">fight</span></code> method checks to see if your <code><span class="constant">Creature</span></code> is alive.  Next, a random hit is placed on your opponent.  If your opponent lives through the hit, it gets a chance to strike back.  Those are the workings of the <code><span class="constant">Creature</span><span class="comment">#fight</span></code> method.</p>


	<p>I&#8217;ll explain <code><span class="constant">DwemthysArray</span></code> in a second.  I really will.  I&#8217;m having fun doing it. Let&#8217;s stick with hitting and fighting for now.</p>


	<h3>Introducing: You.</h3>

	<p>You may certainly tinker with derivations on this rabbit.  But official Dwemthy Paradigms explicitly denote the code <del>- and the altogether character &#8211; </del> inscribed below.  <strong>Save this as <code><span class="ident">rabbit</span><span class="punct">.</span><span class="ident">rb</span></code>.</strong></p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">Rabbit</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">traits</span> <span class="symbol">:bombs</span>

   <span class="ident">life</span> <span class="number">10</span>
   <span class="ident">strength</span> <span class="number">2</span>
   <span class="ident">charisma</span> <span class="number">44</span>
   <span class="ident">weapon</span> <span class="number">4</span>
   <span class="ident">bombs</span> <span class="number">3</span>

   <span class="comment"># little boomerang</span>
   <span class="keyword">def </span><span class="method">^</span><span class="punct">(</span> <span class="ident">enemy</span> <span class="punct">)</span>
     <span class="ident">fight</span><span class="punct">(</span> <span class="ident">enemy</span><span class="punct">,</span> <span class="number">13</span> <span class="punct">)</span>
   <span class="keyword">end</span>
   <span class="comment"># the hero's sword is unlimited!!</span>
   <span class="keyword">def </span><span class="method">/</span><span class="punct">(</span> <span class="ident">enemy</span> <span class="punct">)</span>
     <span class="ident">fight</span><span class="punct">(</span> <span class="ident">enemy</span><span class="punct">,</span> <span class="ident">rand</span><span class="punct">(</span> <span class="number">4</span> <span class="punct">+</span> <span class="punct">(</span> <span class="punct">(</span> <span class="ident">enemy</span><span class="punct">.</span><span class="ident">life</span> <span class="punct">%</span> <span class="number">10</span> <span class="punct">)</span> <span class="punct">**</span> <span class="number">2</span> <span class="punct">)</span> <span class="punct">)</span> <span class="punct">)</span>
   <span class="keyword">end</span>
   <span class="comment"># lettuce will build your strength and extra ruffage</span>
   <span class="comment"># will fly in the face of your opponent!!</span>
   <span class="keyword">def </span><span class="method">%</span><span class="punct">(</span> <span class="ident">enemy</span> <span class="punct">)</span>
     <span class="ident">lettuce</span> <span class="punct">=</span> <span class="ident">rand</span><span class="punct">(</span> <span class="ident">charisma</span> <span class="punct">)</span>
     <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">[Healthy lettuce gives you <span class="expr">#{ lettuce }</span> life points!!]</span><span class="punct">&quot;</span> 
     <span class="attribute">@life</span> <span class="punct">+=</span> <span class="ident">lettuce</span>
     <span class="ident">fight</span><span class="punct">(</span> <span class="ident">enemy</span><span class="punct">,</span> <span class="number">0</span> <span class="punct">)</span>
   <span class="keyword">end</span>
   <span class="comment"># bombs, but you only have three!!</span>
   <span class="keyword">def </span><span class="method">*</span><span class="punct">(</span> <span class="ident">enemy</span> <span class="punct">)</span>
     <span class="keyword">if</span> <span class="attribute">@bombs</span><span class="punct">.</span><span class="ident">zero?</span>
       <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">[UHN!! You're out of bombs!!]</span><span class="punct">&quot;</span> 
       <span class="keyword">return</span>
     <span class="keyword">end</span>
     <span class="attribute">@bombs</span> <span class="punct">-=</span> <span class="number">1</span>
     <span class="ident">fight</span><span class="punct">(</span> <span class="ident">enemy</span><span class="punct">,</span> <span class="number">86</span> <span class="punct">)</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>You have four weapons.  The boomerang.  The hero&#8217;s sword.  The lettuce.  And the bombs.</p>


	<p>To start off, open up <code><span class="ident">irb</span></code> and load the libraries we&#8217;ve created above.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">require</span> <span class="punct">'</span><span class="string">dwemthy</span><span class="punct">'</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">require</span> <span class="punct">'</span><span class="string">rabbit</span><span class="punct">'</span></code></pre></div>
	<p>Now, unroll yourself.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">r</span> <span class="punct">=</span> <span class="constant">Rabbit</span><span class="punct">.</span><span class="ident">new</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">r</span><span class="punct">.</span><span class="ident">life</span>
   <span class="punct">=&gt;</span> <span class="number">10</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">r</span><span class="punct">.</span><span class="ident">strength</span>
   <span class="punct">=&gt;</span> <span class="number">2</span></code></pre></div>
	<p>Good, good.</p>


	<h3>Rabbit Fights ScubaArgentine!</h3>

	<p>You cannot just go rushing into Dwemthy&#8217;s Array, unseatbelted and merely perfumed!!  You must advance deliberately through the demonic cotillion.  Or south, through the thickets and labyrinth of coal.</p>


	<p>For now, let&#8217;s lurk covertly through the milky residue alongside the aqueducts.  And  sneak up on the <code><span class="constant">ScubaArgentine</span></code>.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">ScubaArgentine</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">life</span> <span class="number">46</span>
   <span class="ident">strength</span> <span class="number">35</span>
   <span class="ident">charisma</span> <span class="number">91</span>
   <span class="ident">weapon</span> <span class="number">2</span>
 <span class="keyword">end</span></code></pre></div>
	<p>To get the fight started, make sure you&#8217;ve created one of you and one of the <code><span class="constant">ScubaArgentine</span></code>.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">r</span> <span class="punct">=</span> <span class="constant">Rabbit</span><span class="punct">.</span><span class="ident">new</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">s</span> <span class="punct">=</span> <span class="constant">ScubaArgentine</span><span class="punct">.</span><span class="ident">new</span></code></pre></div>
	<p>Now use the little boomerang!</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">r</span> ^ <span class="ident">s</span>
 <span class="punct">[</span><span class="constant">You</span> <span class="ident">hit</span> <span class="ident">with</span> <span class="number">2</span> <span class="ident">points</span> <span class="ident">of</span> <span class="ident">damage!</span><span class="punct">]</span>
 <span class="comment">#&lt;ScubaArgentine:0x808c864 @charisma=91, @strength=35, @life=44, @weapon=2&gt;</span>
 <span class="punct">[</span><span class="constant">Your</span> <span class="ident">enemy</span> <span class="ident">hit</span> <span class="ident">with</span> <span class="number">28</span> <span class="ident">points</span> <span class="ident">of</span> <span class="ident">damage!</span><span class="punct">]</span>
 <span class="punct">[</span><span class="constant">Rabbit</span> <span class="ident">has</span> <span class="ident">died</span><span class="punct">.]</span></code></pre></div>
	<p>For crying out loud!!  Our sample rabbit died!!</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>The Shoes Which Lies Are Made Of</h2>
        

        <p><em>Earlier, I told you that &#8220;The Inadvertant Meteor&#8221; was the only story you need to know in order to understand preeventualism.  But, really, all you need to understand about preeventualism is that it is still in its infancy and any of its most basic concepts could change.</em></p>


	<p><em>Which is why I&#8217;ve authored a competing story which I believe uncovers an entirely different and very relevant intellectual scenario.</em></p>


	<p>There was a guy who had been around the block.  And he wasn&#8217;t very old, so he decided to write a biography of his life.</p>


	<p>Well, he started to lie in his biography.  He made up some stories.  But mostly little stories that were inconsequential.  Filler.  Like he had a story about a painting he&#8217;d done of a red background with elephant legs in front.</p>


	<p>But he hadn&#8217;t ever painted anything of the sort.  He further embellished the story by talking about a pricey auction he&#8217;d snuck into.  An auction in New York City where he&#8217;d he overheard his painting go to sale for twenty grand.  But that wasn&#8217;t the point of the story.  The point was that he could fold his body to fit under a lid on a banquet tray.  People would raise the lid and they wouldn&#8217;t even notice him bracing himself inside.  He didn&#8217;t even mention the price his painting sold at.</p>


	<p>Anyway, he really started to like that story (and others like it), to the point where he started to ignore his friends and family, instead preferring to watch what his lie self did after the auction.  In his head.</p>


	<p>So, then, one day he was shopping and he found a pair of shoes that had stripey laces. And he grabbed the shoes and went to the store counter, forcing them in the cashier&#8217;s face, yelling, &#8220;Look! Look at these! Look! These are the shoes my lie self would wear!&#8221;  And he bought the shoes and put them on and the whole Earth cracked open and the cash register popped open and swallowed him up and he was suddenly elsewhere, in his lie apartment, sitting down to paint dolphin noses, three of them on a green background.</p>


	<p>It was a lot of work, painting all those noses.  And he went broke for a while and had to stoop so low as to filming abominable snowman <span class="caps">NASCAR</span>.</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Grim prospects.  I can&#8217;t ask you to return to the rabbit kingdom, though. Just pretend like you didn&#8217;t die and make a whole new rabbit.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">r</span> <span class="punct">=</span> <span class="constant">Rabbit</span><span class="punct">.</span><span class="ident">new</span>

 <span class="comment"># attacking with boomerang!</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">r</span> ^ <span class="ident">s</span>

 <span class="comment"># the hero's sword slashes!</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">r</span> <span class="punct">/</span> <span class="ident">s</span>

 <span class="comment"># eating lettuce gives you life!</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">r</span> <span class="punct">%</span> <span class="ident">s</span>

 <span class="comment"># you have three bombs!</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">r</span> <span class="punct">*</span> <span class="ident">s</span></code></pre></div>
	<p>Pretty neat looking, wouldn&#8217;t you say?  The code in <code><span class="ident">rabbit</span><span class="punct">.</span><span class="ident">rb</span></code> alters a few math symbols which work only with the <code><span class="constant">Rabbit</span></code>.  Ruby allows you to change the behavior of math operators.  After all, <strong>math operators are just methods!</strong></p>


<div class='example'><pre><code> <span class="comment"># the boomerang is normally an XOR operator.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="number">1</span><span class="punct">.^(</span> <span class="number">1</span> <span class="punct">)</span>
   <span class="punct">=&gt;</span> <span class="number">0</span>

 <span class="comment"># the hero's sword normally divides numbers.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="number">10</span><span class="punct">./(</span> <span class="number">2</span> <span class="punct">)</span>
   <span class="punct">=&gt;</span> <span class="number">5</span>

 <span class="comment"># the lettuce gives the remainder of a division.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="number">10</span><span class="punct">.%(</span><span class="string"> 3 </span><span class="punct">)</span>
   <span class="punct">=&gt;</span> <span class="number">1</span>

 <span class="comment"># the bomb is for multiplication.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="number">10</span><span class="punct">.*(</span> <span class="number">3</span> <span class="punct">)</span>
   <span class="punct">=&gt;</span> <span class="number">30</span></code></pre></div>
	<p>Where it makes sense, you may choose to use math operators on some of your Classes.  Ruby uses these math operators on many of its own classes.  Arrays, for example, have a handful of math operators which you can see in the list of instance methods when you type: <code><span class="ident">ri</span> <span class="constant">Array</span></code>.</p>


<div class='example'><pre><code> <span class="comment"># the plus operator combines two arrays into a single array</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">[&quot;</span><span class="string">D</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">W</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">E</span><span class="punct">&quot;]</span> <span class="punct">+</span> <span class="punct">[&quot;</span><span class="string">M</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">T</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">H</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">Y</span><span class="punct">&quot;]</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">D</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">W</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">E</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">M</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">T</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">H</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">Y</span><span class="punct">&quot;]</span>

 <span class="comment"># minus removes all items in the second array found in the first</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">[&quot;</span><span class="string">D</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">W</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">E</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">M</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">T</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">H</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">Y</span><span class="punct">&quot;]</span> <span class="punct">-</span> <span class="punct">[&quot;</span><span class="string">W</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">T</span><span class="punct">&quot;]</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">D</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">E</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">M</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">H</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">Y</span><span class="punct">&quot;]</span>

 <span class="comment"># the multiplier repeats the elements of an array</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">[&quot;</span><span class="string">D</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">W</span><span class="punct">&quot;]</span> <span class="punct">*</span> <span class="number">3</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">D</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">W</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">D</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">W</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">D</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">W</span><span class="punct">&quot;]</span></code></pre></div>
	<p>You may be wondering: what does this mean for math, though?  What if I add the number three to an array?  What if I add a string and a number?  <strong>How is Ruby going to react?</strong></p>


	<p>Please remember these operators are just methods.  But, since these operators <em>aren&#8217;t readable words</em>, it can be harder to tell what they do.  Use <code><span class="ident">ri</span></code>.  Often you&#8217;ll find that the operators are identical to other readable methods.  You can then choose to use the operator or the method. Whichever is clearer to you.</p>


<div class='example'><pre><code> <span class="comment"># divide with an operator method ...</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="number">10</span> <span class="punct">/</span> <span class="number">3</span>
   <span class="punct">=&gt;</span> <span class="number">3</span>

 <span class="comment"># ... or a readable method?</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="number">10</span><span class="punct">.</span><span class="ident">div</span> <span class="number">3</span>
   <span class="punct">=&gt;</span> <span class="number">3</span></code></pre></div>
	<p>And that&#8217;s how the Rabbit&#8217;s sword divides.</p>


	<h3>The Harsh Realities of Dwemthy&#8217;s Array <span class="caps">AWAIT YOU TO MASH YOU</span>!!</h3>

	<p>Once you&#8217;re done playchoking the last guy with his oxygen tube, it&#8217;s time to enter The Array.  I doubt you can do it.  You left your hatchet at home.  And I hope you didn&#8217;t use all your bombs on the easy guy.</p>


	<p>You have six foes.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">IndustrialRaverMonkey</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">life</span> <span class="number">46</span>
   <span class="ident">strength</span> <span class="number">35</span>
   <span class="ident">charisma</span> <span class="number">91</span>
   <span class="ident">weapon</span> <span class="number">2</span>
 <span class="keyword">end</span>

 <span class="keyword">class </span><span class="class">DwarvenAngel</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">life</span> <span class="number">540</span>
   <span class="ident">strength</span> <span class="number">6</span>
   <span class="ident">charisma</span> <span class="number">144</span>
   <span class="ident">weapon</span> <span class="number">50</span>
 <span class="keyword">end</span>

 <span class="keyword">class </span><span class="class">AssistantViceTentacleAndOmbudsman</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">life</span> <span class="number">320</span>
   <span class="ident">strength</span> <span class="number">6</span>
   <span class="ident">charisma</span> <span class="number">144</span>
   <span class="ident">weapon</span> <span class="number">50</span>
 <span class="keyword">end</span>

 <span class="keyword">class </span><span class="class">TeethDeer</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">life</span> <span class="number">655</span>
   <span class="ident">strength</span> <span class="number">192</span>
   <span class="ident">charisma</span> <span class="number">19</span>
   <span class="ident">weapon</span> <span class="number">109</span>
 <span class="keyword">end</span>

 <span class="keyword">class </span><span class="class">IntrepidDecomposedCyclist</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">life</span> <span class="number">901</span>
   <span class="ident">strength</span> <span class="number">560</span>
   <span class="ident">charisma</span> <span class="number">422</span>
   <span class="ident">weapon</span> <span class="number">105</span>
 <span class="keyword">end</span>

 <span class="keyword">class </span><span class="class">Dragon</span> <span class="punct">&lt;</span> <span class="constant">Creature</span>
   <span class="ident">life</span> <span class="number">1340</span>     <span class="comment"># tough scales</span>
   <span class="ident">strength</span> <span class="number">451</span>  <span class="comment"># bristling veins</span>
   <span class="ident">charisma</span> <span class="number">1020</span> <span class="comment"># toothy smile</span>
   <span class="ident">weapon</span> <span class="number">939</span>    <span class="comment"># fire breath</span>
 <span class="keyword">end</span></code></pre></div>
	<p>These are the living, breathing monstrosities of Dwemthy&#8217;s Array.  I don&#8217;t know how they got there.  No one knows.  Actually, I&#8217;m guessing the <code><span class="constant">IntrepidDecomposedCyclist</span></code> rode his ten-speed.  But the others: <span class="caps">NO ONE</span> knows.</p>


	<p>If it&#8217;s really important for you to know, let&#8217;s just say the others were born there. Can we move on??</p>


	<p>As Dwemthy&#8217;s Array gets deeper, the challenge becomes more difficult.</p>


<div class='example'><pre><code> <span class="ident">dwary</span> <span class="punct">=</span> <span class="constant">DwemthysArray</span><span class="punct">[</span><span class="constant">IndustrialRaverMonkey</span><span class="punct">.</span><span class="ident">new</span><span class="punct">,</span>
                       <span class="constant">DwarvenAngel</span><span class="punct">.</span><span class="ident">new</span><span class="punct">,</span>
                       <span class="constant">AssistantViceTentacleAndOmbudsman</span><span class="punct">.</span><span class="ident">new</span><span class="punct">,</span>
                       <span class="constant">TeethDeer</span><span class="punct">.</span><span class="ident">new</span><span class="punct">,</span>
                       <span class="constant">IntrepidDecomposedCyclist</span><span class="punct">.</span><span class="ident">new</span><span class="punct">,</span>
                       <span class="constant">Dragon</span><span class="punct">.</span><span class="ident">new</span><span class="punct">]</span></code></pre></div>
	<p>Fight the Array and the monsters will appear as you go.  Godspeed and may you return with harrowing tales and nary an angel talon piercing through your shoulder.</p>


	<p>Start here:</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">r</span> <span class="punct">%</span> <span class="ident">dwary</span></code></pre></div>
	<p>Oh, and none of this &#8220;I&#8217;m too young to die&#8221; business.  I&#8217;m sick of that crap. I&#8217;m not going to have you insulting our undead young people.  They are our future. After our future is over, that is.</p>


	<p><img src="i/wixl.dwemthy-3.gif" title="The rabbit has changed us." alt="The rabbit has changed us." /></p>


	<h3>The Making of Dwemthy&#8217;s Array</h3>

	<p>Fast forward to a time when the winds have calmed.   The dragon is vanquished.  The unwashed masses bow.  We love you. We are loyal to you.</p>


	<p>But what is this centipede nibbling in your eardrum?  You dig with your finger, but you can&#8217;t get him out!  Blasted!  It&#8217;s that infernal Dwemthy&#8217;s Array again.  <strong>Explain yourself Dwemthy!</strong></p>


	<p>Here, I shall unmask the Array itself for you.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">DwemthysArray</span> <span class="punct">&lt;</span> <span class="constant">Array</span>
   <span class="keyword">alias</span> <span class="ident">_inspect</span> <span class="ident">inspect</span>
   <span class="keyword">def </span><span class="method">inspect</span><span class="punct">;</span> <span class="punct">&quot;</span><span class="string">#&lt;<span class="expr">#{ self.class }#{ inspect }</span>&gt;</span><span class="punct">&quot;;</span> <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">method_missing</span><span class="punct">(</span> <span class="ident">meth</span><span class="punct">,</span> <span class="punct">*</span><span class="ident">args</span> <span class="punct">)</span>
     <span class="ident">answer</span> <span class="punct">=</span> <span class="ident">first</span><span class="punct">.</span><span class="ident">send</span><span class="punct">(</span> <span class="ident">meth</span><span class="punct">,</span> <span class="punct">*</span><span class="ident">args</span> <span class="punct">)</span>
     <span class="keyword">if</span> <span class="ident">first</span><span class="punct">.</span><span class="ident">life</span> <span class="punct">&lt;=</span> <span class="number">0</span>
       <span class="ident">shift</span>
       <span class="keyword">if</span> <span class="ident">empty?</span>
         <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">[Whoa.  You decimated Dwemthy's Array!]</span><span class="punct">&quot;</span> 
       <span class="keyword">else</span>
         <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">[Get ready. <span class="expr">#{ first.class }</span> has emerged.]</span><span class="punct">&quot;</span> 
       <span class="keyword">end</span>
     <span class="keyword">end</span>
     <span class="ident">answer</span> <span class="punct">||</span> <span class="number">0</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>By now, you&#8217;re probably feeling very familiar with inheritance.  The <code><span class="constant">DwemthysArray</span></code> class inherits from <code><span class="constant">Array</span></code> and, thus, behaves just like one.  For being such a mystery, it&#8217;s alarmingly brief, yeah?</p>


	<p>So it&#8217;s an Array.  Filled with monsters.  But what does this extra code do?</p>


	<h3>Inspect</h3>

	<p>The <code><span class="ident">inspect</span></code> method isn&#8217;t really a necessary part of Dwemthy&#8217;s Array.  It&#8217;s something Dwemthy added as a courtesy to his guests.  (Many call him twisted, many call him  austere, but we&#8217;d all be ignorant to go without admiring the footwork he puts in for us.)</p>


	<p>Every object in Ruby has an <code><span class="ident">inspect</span></code> method.  It is defined in the <code><span class="constant">Object</span></code> class, so it trickles down through the pedigree to every wee child object just born.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">o</span> <span class="punct">=</span> <span class="constant">Object</span><span class="punct">.</span><span class="ident">new</span>
   <span class="punct">=&gt;</span> <span class="comment">#&lt;Object:0x81d60c0&gt;</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">o</span><span class="punct">.</span><span class="ident">inspect</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">#&lt;Object:0x81d60c0&gt;</span><span class="punct">&quot;</span></code></pre></div>
	<p>Have you noticed this?  Whenever we create an object in <code><span class="ident">irb</span></code>, this noisy <code><span class="comment">#&lt;Object&gt;</span></code> verbage stumbles out!  It&#8217;s a little name badge for the object.  The <code><span class="ident">inspect</span></code> method creates that name badge.  The badge is just a string.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">class </span><span class="class">Rabbit</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="ident">attr_accessor</span> <span class="symbol">:slogan</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="keyword">def </span><span class="method">initialize</span> <span class="ident">s</span><span class="punct">;</span> <span class="attribute">@slogan</span> <span class="punct">=</span> <span class="ident">s</span><span class="punct">;</span> <span class="keyword">end</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="keyword">def </span><span class="method">inspect</span><span class="punct">;</span> <span class="punct">&quot;</span><span class="string">#&lt;<span class="expr">#{ self.class }</span> says '<span class="expr">#{ @slogan }</span>'&gt;</span><span class="punct">&quot;;</span> <span class="keyword">end</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">end</span>

 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">class </span><span class="class">FakeRabbit</span> <span class="punct">&lt;</span> <span class="constant">Rabbit</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">end</span>

 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">Rabbit</span><span class="punct">.</span><span class="ident">new</span> <span class="punct">&quot;</span><span class="string">i blow'd the drgn's face off!!</span><span class="punct">&quot;</span> 
   <span class="punct">=&gt;</span> <span class="comment">#&lt;Rabbit says 'i blow'd the drgn's face off!!'&gt;</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">FakeRabbit</span><span class="punct">.</span><span class="ident">new</span> <span class="punct">&quot;</span><span class="string">Thusly and thusly and thusly...</span><span class="punct">&quot;</span> 
   <span class="punct">=&gt;</span> <span class="comment">#&lt;FakeRabbit says 'Thusly and thusly and thusly...'&gt;</span></code></pre></div>
	<p>The thing is: <code><span class="ident">irb</span></code> is talking back.  Every time you run some code in <code><span class="ident">irb</span></code>, the <em>return value</em> from that code is inspected.  How handy.  It&#8217;s a little conversation between you and <code><span class="ident">irb</span></code>.  And <code><span class="ident">irb</span></code> is just reiterating what you&#8217;re saying so you can see it for your self.</p>


	<p>You could write your own Ruby prompt very easily:</p>


<div class='example'><pre><code> <span class="ident">loop</span> <span class="keyword">do</span>
   <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">&gt;&gt; </span><span class="punct">&quot;</span> 
   <span class="ident">puts</span>  <span class="punct">&quot;</span><span class="string">=&gt; </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">eval</span><span class="punct">(</span> <span class="ident">gets</span> <span class="punct">).</span><span class="ident">inspect</span>
 <span class="keyword">end</span></code></pre></div>
	<p>This prompt won&#8217;t let you write Ruby code longer than a single line.  It&#8217;s the essence of interactive Ruby, though.  How do you like that?  Two of your recently learned concepts have come together in a most flavorful way.  The <code><span class="ident">eval</span></code> takes the typed code and runs it. The response from <code><span class="ident">eval</span></code> is then inspected.</p>


	<p>Now, as you are fighting monsters in <code><span class="ident">irb</span></code>, Dwemthy&#8217;s Array will be inspected and replying with the monsters you have left to fight.</p>


	<p><img src="i/wixl-5.gif" title="The foxes eat out." alt="The foxes eat out." /></p>


	<h3>Method Missing</h3>

	<p>Don&#8217;t you hate it when you yell &#8220;Deirdre!&#8221; and like ten people answer?  That <em>never</em> happens in Ruby.  If you call the <code><span class="ident">deirdre</span></code> method, only one <code><span class="ident">deirdre</span></code> method answers.  You can&#8217;t have two methods named the same.  If you add a second <code><span class="ident">deirdre</span></code> method, the first one disappears.</p>


	<p>You can, however, have a method which <strong>answers to many names</strong>.</p>


<div class='example'><pre><code> <span class="keyword">class </span><span class="class">NameCaller</span>
   <span class="keyword">def </span><span class="method">method_missing</span><span class="punct">(</span> <span class="ident">name</span><span class="punct">,</span> <span class="punct">*</span><span class="ident">args</span> <span class="punct">)</span>
     <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">You're calling `</span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">name</span> <span class="punct">+</span> <span class="punct">&quot;</span><span class="string">' and you say:</span><span class="punct">&quot;</span> 
     <span class="ident">args</span><span class="punct">.</span><span class="ident">each</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">say</span><span class="punct">|</span> <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">  </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">say</span> <span class="punct">}</span>
     <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">But no one is there yet.</span><span class="punct">&quot;</span> 
   <span class="keyword">end</span>
   <span class="keyword">def </span><span class="method">deirdre</span><span class="punct">(</span> <span class="punct">*</span><span class="ident">args</span> <span class="punct">)</span>
     <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">Deirdre is right here and you say:</span><span class="punct">&quot;</span> 
     <span class="ident">args</span><span class="punct">.</span><span class="ident">each</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">say</span><span class="punct">|</span> <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">  </span><span class="punct">&quot;</span> <span class="punct">+</span> <span class="ident">say</span> <span class="punct">}</span>
     <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">And she loves every second of it.</span><span class="punct">&quot;</span> 
     <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">(I think she thinks you're poetic.)</span><span class="punct">&quot;</span> 
 <span class="keyword">end</span></code></pre></div>
	<p>When you call the method <code><span class="ident">deirdre</span></code> above, I&#8217;m sure you know what will happen.  Deirdre will love every second of it, you and your dazzling poetry.</p>


	<p>But what if you call <code><span class="ident">simon</span></code>?</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="constant">NameCaller</span><span class="punct">.</span><span class="ident">new</span><span class="punct">.</span><span class="ident">simon</span><span class="punct">(</span> <span class="punct">'</span><span class="string">Hello?</span><span class="punct">',</span> <span class="punct">'</span><span class="string">Hello? Simon?</span><span class="punct">'</span> <span class="punct">)</span>
 <span class="constant">You</span><span class="punct">'</span><span class="string">re calling `simon</span><span class="punct">'</span> <span class="keyword">and</span> <span class="ident">you</span> <span class="ident">say</span><span class="punct">:</span>
   <span class="constant">Hello</span><span class="punct">?</span>
   <span class="constant">Hello</span><span class="char">? </span><span class="constant">Simon</span><span class="punct">?</span>
 <span class="constant">But</span> <span class="ident">no</span> <span class="ident">one</span> <span class="ident">is</span> <span class="ident">there</span> <span class="ident">yet</span><span class="punct">.</span></code></pre></div>
	<p>Yes, <code><span class="ident">method_missing</span></code> is like an answering machine, which intercepts your method call.  In Dwemthy&#8217;s Array we use call forwarding, so that when you attack the Array, it passes that attack on straight to the first monster in the Array.</p>


<div class='example'><pre><code> <span class="keyword">def </span><span class="method">method_missing</span><span class="punct">(</span> <span class="ident">meth</span><span class="punct">,</span> <span class="punct">*</span><span class="ident">args</span> <span class="punct">)</span>
   <span class="ident">answer</span> <span class="punct">=</span> <span class="ident">first</span><span class="punct">.</span><span class="ident">send</span><span class="punct">(</span> <span class="ident">meth</span><span class="punct">,</span> <span class="punct">*</span><span class="ident">args</span> <span class="punct">)</span>
   <span class="comment"># ... snipped code here ...</span>
 <span class="keyword">end</span></code></pre></div>
	<p>See!  See!  That skinny little <code><span class="ident">method_missing</span></code> passes the buck!</p>

    
    
        
        <a name="section4" />
        <h2>4. So, Let's Be Clear: The Porcupine Is Now To The Sea</h2>

        <p><img src="i/porcupine-2.gif" title="The porcupine and his kite." alt="The porcupine and his kite." /></p>

    
    
        
        <a name="section5" />
        <h2>5. Walking, Walking, Walking, Walking and So Forth</h2>

        <p>The evening grew dark around the pair of foxes.  They had wound their way through alleys packed with singing possums, and streets where giraffes in rumpled sportscoats bumped past them with their briefcases.  They kept walking.</p>


	<p>And now the stores rolled shut their corrugated metal lids.   Crickets crawled out from the gutters and nudged at the loose change.</p>


	<p><img src="i/wixl-6.gif" title="Why such hard feelings?" alt="Why such hard feelings?" /></p>


	<p>&#8220;Anyway, you must admit he&#8217;s a terrible President,&#8221; said Fox Small. <em>&#8220;Why</em> does President Marcos have a rabbit as Vice President of the Foxes.&#8221;</p>


	<p>&#8220;The Vice President?  The rabbit with the <em>eyebrows</em>?&#8221;</p>


	<p>&#8220;No, the rabbit with the <strong>huge sausage lips</strong>,&#8221; said Fox Small.</p>


	<p>But their conversation was abruptly interupted by a freckly cat head which popped from the sky just above the sidewalk.</p>


	<p><img src="i/wixl.blix-1.gif" title="At least they're still in the book..." alt="At least they're still in the book..." /></p>


	<p>What is this about?!</p>


	<p><img src="i/wixl-14.gif" title="Will the book finish?" alt="Will the book finish?" /></p>


	<p>Oh, come on.  This is rich.  More meta.</p>


	<p>I&#8217;m not going to bother illustrating this discussion Blixy had with the foxes at this point! It&#8217;s all a <strong>bunch of <em>conjecture</em></strong>.  <em>HOW</em> can they presume to know the landscape of my family drama? I love my sister.  For a long time, I <em>worshipped</em> her. (This is my sister Quil.)</p>


	<p>I admit that there was a pretty painful day a few months ago and I kind of freaked out.  I was laid out on the long patio chair by the pool in my mom&#8217;s backyard.  I had a Dr. Pepper and a bit of german chocolate cake.  I was eating with a kid fork.  Everything else was in the dishwasher, that&#8217;s all they had.  Three prongs.</p>


	<p>My mom started talking about Quil.  All about how much money she was blowing on pants and purses. A five-hundred dollar purse.  And then she said, &#8220;She&#8217;s losing it. She sounded totally high on the phone.&#8221; (She nailed it on the head, Quil was smoking dope and loving it.)</p>


	<p>So I&#8217;d been noticing how observant my mom could be.  That&#8217;s why, when she said, &#8220;I actually think she&#8217;s on cocaine,&#8221; I <em>physically</em> stood up and chucked my soda across the yard.</p>


	<p>It sailed off into the woods somewhere.  We had been talking awhile, so it was dark when the can flew. I paced a bit.  And then I screamed at the top of my lungs.</p>


	<p>My uncle Mike was standing there with the glass door open, staring at me.  He said something totally nervous like, &#8220;Oh, okay.  Well, I&#8217;ll&#8212;&#8221;  And the tea in his glass was swishing back and forth, sloshing all over.  He disappeared.  He&#8217;s not very good at saying things to people.  He&#8217;s more of a whistler.  And resonant.</p>


	<p><img src="i/wixl.blix-2.gif" title="Moving along." alt="Moving along." /></p>


	<p>So, to be completely honest, yes, I got a little mad.  I got mad.  You know.  I dealt with it. Quil calls me regularly.  For some stupid reason, I rarely call her.</p>


	<p>Plus, she didn&#8217;t end up killing herself.  So it&#8217;s just not an issue.  Who knows if it was real. She just had a lot of vodka.  And she&#8217;s little.  So it was just scary to see Quil guzzling it down like that. I mean forcing it down.</p>


	<p>But why talk about it?  It&#8217;ll just make her feel like I&#8217;m disappointed.  Or like I&#8217;m a jerk.</p>


	<p>Well, I got off track there a bit.  Where was I?  Blix is basically helping the foxes around, getting them on the trail of their truck.  Yeah, back to all that.</p>


	<p><img src="i/wixl-3.gif" title="Frogs who save seats on the bus." alt="Frogs who save seats on the bus." /></p>


	<p>&#8220;We can&#8217;t squeeze on to this bus,&#8221; said the smallest fox.</p>


	<p>&#8220;Guys, walk on up,&#8221; said Blix.  &#8220;What&#8217;s the hold up?  Oh, the frogs.  Yeah, just squeeze through.&#8221; Blixy pushed from behind.</p>


	<p>&#8220;Hey,&#8221; said the Tall Fox.  &#8220;I&#8217;m crammed on this little step!  Somebody move!&#8221;</p>


	<p>&#8220;Did you get through&#8212;young fox??&#8221; said the cat.</p>


	<p>&#8220;No,&#8221; said Fox Small, &#8220;can&#8217;t you see?  The driver keeps shaking his head and it&#8217;s <em>really</em> making me nervous.  I don&#8217;t think he wants us on.&#8221;</p>


	<p>&#8220;Go,&#8221; said Blix.  He stepped down from his step and walked around the bus, peering through the plexiglass windows.  &#8220;Well, I don&#8217;t know, guys.  I dunno.  I guess it&#8217;s got a lot of frogs.&#8221;  He pounded on the window.  &#8220;Hey!  Move over!&#8221;</p>


	<p>And that&#8217;s the reality of riding intercity transit in Wixl.  It&#8217;s terribly competitive.  The morning bus is so crowded that most white collar animals get frogs to hold their seat through the nighttime. For whatever reason, it works.  It&#8217;s become this staple of their workflow and their economy.</p>


	<p>If you can muster up a bit of imagination, you can see a <strong>percent sign</strong> as a frog&#8217;s slanted face. Got the picture in your head?  Now let me show you frogs that camp out inside strings.</p>


<div class='example'><pre><code> <span class="comment"># The %s format is for placing full strings.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">Seats are taken by %s and %s.</span><span class="punct">&quot;</span> <span class="punct">%</span> <span class="punct">['</span><span class="string">a frog</span><span class="punct">',</span> <span class="punct">'</span><span class="string">a frog with teeth</span><span class="punct">']</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Seats are taken by a frog and a frog with teeth.</span><span class="punct">&quot;</span> 

 <span class="comment"># The %d format is for placing numbers, while the %f format is for</span>
 <span class="comment"># floats (decimal numbers).</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">frogs</span> <span class="punct">=</span> <span class="punct">[</span><span class="number">44</span><span class="punct">,</span> <span class="number">162.30</span><span class="punct">]</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">stats</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">Frogs have filled %d seats and paid %f blue crystals.</span><span class="punct">&quot;</span> 
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">stats</span> <span class="punct">%</span> <span class="ident">frogs</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Frogs have filled 44 seats and paid 162.30 blue crystals.</span><span class="punct">&quot;</span> 

 <span class="comment"># Formatting is flexible with types, you can pass in strings</span>
 <span class="comment"># and format them like numbers.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">frogs</span> <span class="punct">=</span> <span class="punct">['</span><span class="string">44</span><span class="punct">',</span> <span class="punct">'</span><span class="string">162.30</span><span class="punct">']</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">stats</span> <span class="punct">%</span> <span class="ident">frogs</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Frogs have filled 44 seats and paid 162.30 blue crystals.</span><span class="punct">&quot;</span></code></pre></div>
	<p>What you are seeing above uses the <code>%</code> method in the <code><span class="constant">String</span></code> class. This method takes <strong>a string</strong> and <strong>an array</strong> and slurps them in together to create a new string.  The items from the list are yanked out (in order) and placed in their saved seats.  It&#8217;s the open of the business day and the frogs have done their job.</p>


<div class='example'><pre><code> <span class="comment"># See, here's the String#% method called like other methods.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">Please move over, %s.</span><span class="punct">&quot;.%(</span><span class="string"> 'toothless frog' </span><span class="punct">)</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Please move over, toothless frog</span><span class="punct">&quot;</span> 

 <span class="comment"># Now let's call it the prettier way, with the percent sign</span>
 <span class="comment"># right between the string and the array.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">Here is your 1098 statement for the year, %s.</span><span class="punct">&quot;</span> <span class="punct">%</span> <span class="punct">['</span><span class="string">teeth frog</span><span class="punct">']</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Here is your 1098 statement for the year, teeth frog.</span><span class="punct">&quot;</span></code></pre></div>
	<p>This is also available as the <code><span class="constant">Kernel</span><span class="punct">::</span><span class="ident">format</span></code> method or <code><span class="constant">Kernel</span><span class="punct">::</span><span class="ident">sprintf</span></code> method.  (In the C language, there is a <code><span class="ident">sprintf</span></code> method which operates just like this.)</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">format</span> <span class="punct">&quot;</span><span class="string">Frogs are piled %d deep and travel at %d mph.</span><span class="punct">&quot;,</span> <span class="punct">[</span><span class="number">5</span><span class="punct">,</span> <span class="number">56</span><span class="punct">]</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Frogs are piled 5 deep and travel at 56 mph.</span><span class="punct">&quot;</span></code></pre></div>
	<p>For the most part, you&#8217;ll only need <code>%s</code> (strings), <code>%d</code> (integer numbers) or <code>%f</code> (float numbers) format specifiers.  The <code>%p</code> placeholder will run <code><span class="ident">inspect</span></code> on an object.</p>


	<p>Yeah, so, frog formatting is really handy for building strings that are assembled from different kinds of data.  You can learn all the various kinds of format specifiers by reading the <code><span class="ident">ri</span> <span class="ident">sprintf</span></code> page.  I&#8217;m just going to give you a few quick pointers.</p>


	<p>Let&#8217;s say you have the array but you want the items to appear in <strong>a different order</strong> in the string.  In such a situation, you can identify specific items by placing a number (<code><span class="number">1</span><span class="global">$</span></code> for the first item, <code><span class="number">2</span><span class="global">$</span></code> for the second, and so on) right after the percent sign.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">This bus has %1$d more stops before %2$d o'clock.  That's %1$d more stops.</span><span class="punct">&quot;</span> <span class="punct">%</span> <span class="punct">[</span><span class="number">16</span><span class="punct">,</span> <span class="number">8</span><span class="punct">]</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">This bus has 16 more stops before 8 o'clock.  That's 16 more stops.</span><span class="punct">&quot;</span></code></pre></div>
	<p>The second tip I have for you is that you can allot a certain number of characters for each item, a width.  And if an item is smaller than the width, extra spaces will be used before the item.  To pad it. If the width is a negative number, the item will be forced to left and the padding will come after it.</p>


<div class='example'><pre><code> <span class="comment"># Give one item 30 characters of width</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">In the back of the bus: %30s.</span><span class="punct">&quot;</span> <span class="punct">%</span> <span class="punct">['</span><span class="string">frogs</span><span class="punct">']</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">In the back of the bus:                          frogs.</span><span class="punct">&quot;</span> 

 <span class="comment"># Give one left-justified item 30 characters of width</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">At the front of the bus: %-30s.</span><span class="punct">&quot;</span> <span class="punct">%</span> <span class="punct">['</span><span class="string">frogs</span><span class="punct">']</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">At the front of the bus: frogs                         .</span><span class="punct">&quot;</span></code></pre></div>
	<p>Fox Small kept looking up at the bus driver.  Remember, he wouldn&#8217;t enter the bus!</p>


	<p>&#8220;What&#8217;s the deal?&#8221; said Fox Tall.  &#8220;Can&#8217;t you just get on and we&#8217;ll just stand in the aisle?&#8221;</p>


	<p>&#8220;You really want to get on this bus?  That driver has no hands,&#8221; said Fox Small, speaking close and hushed to Fox Tall, &#8220;and all he has, instead of hands, are sucker cups.&#8221;</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>More From The Chilling Ongoing Preview of The Scarf Eaters</h2>
        

        <p>(<em>from Chapter <span class="caps">XII</span>: Thank Heaven for Little Men</em>.)</p>


	<p>&#8220;Close the door,&#8221; Spencer repeated, but Lara&#8217;s hand trembled and she fumbled sloppily at the latch. Her dad hadn&#8217;t taught her to close doors like this one.</p>


	<p>&#8220;Yes, it&#8217;s an unusual door,&#8221; said Brent.  He walked over and closed the door for her. Then, he held her hand and looked into her eyes.  His eyes lit up like huge matchsticks that would be too huge to be practical.  &#8220;It&#8217;s an unusual handle, which ensures that those who don&#8217;t eat scarves stay out.&#8221;</p>


	<p>&#8220;Sit down, everyone,&#8221; Spencer demanded, as he bounded across the room and took command. &#8220;I command this organization,&#8221; he stated.  &#8220;The secret organization of The Scarf Eaters!&#8221;</p>


	<p>The torches encircling the room blazed like invincibly huge matches and the handful of teenagers sat.  Except for Spencer who stood high and mighty, drawing all the oxygen in the entire room into his nostrils before speaking.</p>


	<p>&#8220;One of us,&#8221; he said, dramatically and invincibly, &#8220;is missing!&#8221;</p>


	<p>The entire room gasped, which also used oxygen.  The room was abuzz.  &#8220;Who?&#8221;  &#8220;How?&#8221; &#8220;Who was it?&#8221;  Nobody knew.  Except for Spencer, who lept across the room and took charge.</p>


	<p>&#8220;Our dear friend Steve Bridell has been stolen from us,&#8221; announced Spencer in a deafeningly loud voice, as if thousands of giant matchsticks were struck against a brittle surface in unison amidst a pile of oxygen.  &#8220;Steve Bridell.  Do any of you know Steve Bridell?&#8221;</p>


	<p>The hall was silent.</p>


	<p>Spencer continued.  &#8220;Steve Bridell was an incredible resource and you all knew him and loved him.  He carved this enormous wooden man we use as our podium.&#8221;  Spencer pointed. &#8220;He also made the set of wooden cymbals that are back in our instrument closet right now.&#8221;</p>


	<p>Some of the audience stood.</p>


	<p>&#8220;Wait,&#8221; instructed Spencer.  &#8220;Don&#8217;t go back there.   I&#8217;ve already checked.  The cymbals are gone!&#8221;</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>&#8220;So what?  You don&#8217;t think animals with tentacles can drive?&#8221;</p>


	<p>&#8220;Well, not only is he going to flub up the steering wheel but he has all these legs all over the foot pedals.  This is not smart.  Let&#8217;s get another bus.  Come on.&#8221;</p>


	<p>&#8220;You know, he&#8217;s probably been driving like that all day.  Is he really going to start crashing at this point in his career?&#8221;</p>


	<p>&#8220;Buses do crash,&#8221; said Fox Small.  &#8220;Some do.  This smells crashworthy.&#8221;</p>


	<p>&#8220;Sheer doo-doo!&#8221;  And Fox Tall yelled to the driver, &#8220;Hey, cabby, how long have you been driving this bus for?&#8221;</p>


	<p>The bus driver peered over darkly under his cap and started to turn toward them, but his tentacles were stuck to the wheel.  He jerked swiftly at his forelegs and, failing their release, he turned to the wheel and focused his energies on milking his glands for some slicker secretions.  Bubbles of mucus oozed.</p>


	<p>&#8220;Let&#8217;s get outta here,&#8221; said Fox Tall and the two ran off into the street, slamming right into the cat Blix.</p>


	<p>&#8220;Alright, well, the bus is full,&#8221; said Blix.  &#8220;I don&#8217;t know why the driver stopped if he knew the bus was crammed with hoppers.&#8221;</p>


	<p>&#8220;We&#8217;re thinking he was about to crash into us,&#8221; said Fox Tall, &#8220;and he opened the door to make it look like a planned route stop.&#8221;</p>


	<p>&#8220;Keep in mind, Blix, we hadn&#8217;t really discussed that possibility out loud, so I haven&#8217;t had a chance to formally agree,&#8221; said Fox Small.  &#8220;Nevertheless, it sounds rational to me.&#8221;</p>


	<p>&#8220;I&#8217;m thinking all the buses are going to be full like this.&#8221;  Blix bit his lip, thinking and flicking his eyes about.  &#8220;Let&#8217;s just-<del>&#8221;  He pointed down the circuitry of apartment buildings that wound to the south.  &#8220;But maybe</del>-&#8221;  He looked up and surveyed the stars, scratching his head and counting the constellations with very small poking motions from the tip of his finger.</p>


	<p>&#8220;Are you getting our bearings from the stars and planets?&#8221; asked Fox Small.</p>


	<p>Blix didn&#8217;t speak, he ducked off to the north through a poorly laid avenue back behind the paint store. But before we follow them down that service road, Smotchkkiss, I have one more frog for you, perched on a long lilypad that stretches out to hold anything at all.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">cat</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">Blix</span><span class="punct">&quot;</span> 
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">Does <span class="expr">#{ cat }</span> see what's up?  Is <span class="expr">#{ cat }</span> aware??</span><span class="punct">&quot;</span> 
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Does Blix see what's up?  Is Blix aware??</span><span class="punct">&quot;</span></code></pre></div>
	<p>The little frogs from earlier (<code>%s</code> or <code>%d</code>) were only placeholders for single strings.  Saving places in the string.</p>


	<p>The lilypads above start with a flower bud, the <strong>octothorpe</strong>.  You&#8217;ve also seen it as a pound sign on telephones.  After the flower bud, two leaves form the edges of the lilypad.  The leaves are <strong>curly braces</strong>, also seen many times before as the <em>crab pincers</em> for a code block.</p>


	<blockquote>
		<p>An empty lilypad <code><span class="punct">&quot;</span><span class="string"><span class="expr">#{}</span></span><span class="punct">&quot;</span></code> becomes an empty string <code><span class="punct">&quot;</span><span class="string"></span><span class="punct">&quot;</span></code>.</p>
	</blockquote>

	<p>When the lilypad is found in a <strong>double-quoted</strong> string, Ruby runs any code found in between the two leaves of the lilypad.  The lilypad is lifted out and the result of the code is placed there in the string.  This lilypad swap is called <em>string interpolation</em>.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">fellows</span> <span class="punct">=</span> <span class="punct">['</span><span class="string">Blix</span><span class="punct">',</span> <span class="punct">'</span><span class="string">Fox Tall</span><span class="punct">',</span> <span class="punct">'</span><span class="string">Fox Small</span><span class="punct">']</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">Let us follow <span class="expr">#{ fellows.join ' and ' }</span> on their journey.</span><span class="punct">&quot;</span> 
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Let us follow Blix and Fox Tall and Fox Small on their journey.</span><span class="punct">&quot;</span></code></pre></div>
	<p>The lilypad is very durable and can hold any kind of code inside.  Above we are using <code><span class="constant">Array</span><span class="comment">#join</span></code>, but you can do anything you like inside.  Call object methods, conditional <code><span class="keyword">if</span></code> or <code><span class="keyword">case</span></code> statements, even define classes.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">blix_went</span> <span class="punct">=</span> <span class="symbol">:north</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">Blix didn't speak, he ducked off to the <span class="expr">#{ blix_went }</span> through <span class="expr">#{
             if blix_went  :north
               'a poorly laid avenue behind the paint store'
             elsif blix_went  :south
               &amp;#8216;the circuitry of apartment buildings&amp;#8217;
             else
               &amp;#8217;... well, who knows where he went.&amp;#8217;
             end }</span>.  But before we follow them&amp;#8230;&amp;#8221; 
 =&gt; &amp;#8220;Blix didn&amp;#8217;t speak, he ducked off to the north through a poorly laid avenue
     behind the paint store.  But before we follow them&amp;#8230;&amp;#8221;</span></code></pre></div>
	<p>The foxes followed Blixy off behind the paint store and down the cracked, uneven asphalt. All of the stores on the dilapidated lane leaned at angles to each other.  In some places, slabs of sidewalk jutted up from the ground, forming a perilous walkway, a disorderly stack of ledges.  Almost as if the city planners had hoped to pay tribute to the techtonic plates.  One small drug store had slid below the surface, nearly out of eyesight.</p>


	<p>Truly, it was colorful, though.  The paint store had been tossing out old paints directly onto its neighbors.  The shops nearest the paint store were clogged with hundreds of colors, along the windowsills and in the rain gutters.  Yes, on the walls and pavement.</p>


	<p>Basically, beginning with the back porch of the paint store, the avenue erupted into a giant incongruous and poorly-dyed market.</p>


	<p>Further down, a dentist&#8217;s office was primed with red paint and, over that, a fledgling artist had depicted a large baby who had fallen through a chimney and arrived in a fireplace full of soot. Crude black strokes marked the cloud of ashes raised during impact, easily mistaken for thick hair on the child&#8217;s arms and back.  The child looked far too young to have much hair, but there they were: rich, blonde curls which toppled liberally from the child&#8217;s head.  Under the child&#8217;s legs was painted the word <em>BREWSTER</em>.</p>


	<p>The same artist had hit the library next store and had hastily slapped together a mural of a green sports car being pulled from the mud by a team of legless babies tugging with shiny chains. Again, the drastically blonde curls!</p>


	<p>&#8220;I need answers,&#8221; said the Fox Tall, who had ground to a halt in front of the scenery.</p>


	<p>&#8220;I&#8217;m starting to believe there&#8217;s no such thing,&#8221; said Fox Small.  &#8220;Maybe these are the answers.&#8221;</p>


	<p>&#8220;Brewster?&#8221; said Fox Tall.  He walked nearer to the library and touched the cheek of one of the legless children who was closer in perspective.  The child&#8217;s cheek appeared to contain a myriad of jawbones.</p>


	<p>Blix was another two houses down, navigating through the askew brickwork, the paved gully that led to <em>R.K.&#8217;s Gorilla Mint</em>, as the metallic sticker on the door read.  The building was plastered with miniature logos for the variety of payment options and identification acceptable at <em>R.K.&#8217;s Gorilla Mint</em>.  Even the bars over the window were lined with insurance disclosures and security warnings and seals of government authorization, as well as addendums to all of these, carbon paper covering stickers covering torn posters and advertising.  And all mingled with paint splashes that intruded wherever they pleased.</p>


	<p><img src="i/wixl-9.gif" title="R.K.'s Gorilla Mint." alt="R.K.'s Gorilla Mint." /></p>


	<p>&#8220;I like the way the fresh paper feels against my tongue,&#8221; said the gorilla at the counter. His fingers rubbed quietly against the bills.  He drew his face near to the fanned currency and whisked his nose along the pulpy cash.</p>


	<p>&#8220;Is R.K. in this evening?&#8221; asked Blix.</p>


	<p>&#8220;R.K. is not,&#8221; said the gorilla cashier.  He turned to the three travellers and spread his money out on the counter&#8217;s surface, evenly spacing them apart and lining up all the edges neatly.  &#8220;Now, which one of these do you think is worth the most?&#8221;</p>


	<p>The foxes looked over the different bills and Fox Small muttered to himself, &#8220;Well, maybe&#8212;no, but I&#8217;ll bet&#8212;Wait, does one of these have bananas on it?  &#8216;Cause that one&#8212;nope, no fruit or rope swings or&#8212;Terrible, this is difficult!&#8221;  And in a lower voice, &#8220;So difficult to read.  What does this one say?  Symbols or something? If all these bills have are symbols, it&#8217;s going to be impossible for us to figure out which one is of the greatest value.&#8221;</p>


	<p>&#8220;That&#8217;s why I said, &#8216;<em>Guess</em>.&#8217;&#8221;  The gorilla tapped each bill in order.  &#8220;See, you&#8217;ve got a 1 in 5 chance.&#8221;</p>


	<p>&#8220;Unless the symbols mean something,&#8221; said Fox Tall.  &#8220;Unless we can figure it out.&#8221;</p>


	<p>&#8220;We can figure it out,&#8221; said Fox Small.</p>


	<p>&#8220;No,&#8221; said the gorilla.  &#8220;The symbols are meaningless.&#8221;</p>


	<p>&#8220;Whoever created the money intended some meaning for them,&#8221; said Fox Small.  &#8220;Why use <em>this</em> symbol?&#8221;  He pointed to an ampersand printed in dark ink.</p>


	<p>&#8220;Yeah, we saw you sniffing the money and fantasizing about it back there,&#8221; said Fox Tall.  &#8220;I&#8217;ll bet these symbols mean all kinds of things to you!&#8221;</p>


	<p>&#8220;No, I don&#8217;t think so,&#8221; said the gorilla.</p>


	<p>If I can weigh in at this point, I think the symbols do have meaning.  They may not be <em>loaded</em> with meaning, it may not be oozing out through the cracks, but I&#8217;m sure there&#8217;s a sliver of meaning.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$:</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">/usr/lib/ruby/site_ruby/1.8</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">/usr/lib/ruby/site_ruby/1.8/i686-linux</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">/usr/lib/ruby/site_ruby</span><span class="punct">&quot;,</span> 
       <span class="punct">&quot;</span><span class="string">/usr/lib/ruby/1.8</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">/usr/lib/ruby/1.8/i686-linux</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">.</span><span class="punct">&quot;]</span></code></pre></div> 
	<p>Variables which start with the American cash sign are global variables.  They can be seen from anywhere in the program, <strong>from inside any scope</strong>.  (Dr. Cham used this variable while snooping around The Originals&#8217; computer bay.)</p>


	<p>So why does the <strong>cash sign followed by a colon</strong> represent an array of <strong>all directories where Ruby will search when you try to load a file with <code><span class="ident">require</span></code></strong>?  The cash sign means &#8220;global.&#8221;  But why the colon?</p>


	<p>Historically, on many operating systems, a list of directories contains colons which separated each entry.  I like to see the colon as a pair of eyes, scanning the directories for files.  We store our lookout list behind the eyes.</p>


	<p>Here&#8217;s a few more special global variables:</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$&quot;</span>      <span class="comment"># The $&quot; variable contains all files which have been loaded with `require'</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">irb.rb</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">e2mmap.rb</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">irb/init.rb</span><span class="punct">&quot;,</span> <span class="punct">...</span> <span class="punct">&quot;</span><span class="string">rbconfig.rb</span><span class="punct">&quot;]</span>
              <span class="comment"># These files are stored somewhere else, but their code is being used</span>
              <span class="comment"># in this program.  Much like quoting someone else's work -- these are the</span>
              <span class="comment"># footnotes -- hence the double-quote.</span>

 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$0</span>      <span class="comment"># The $0 variable contains the running program's filename.</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">irb</span><span class="punct">&quot;</span>   <span class="comment"># A zero can be considered the beginning of a number count.</span>
              <span class="comment"># This variable answers the question, &quot;Where did this program begin?&quot; </span>

 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$*</span>      <span class="comment"># The $* variable contains all the arguments passed into a program.</span>
   <span class="punct">=&gt;</span> <span class="punct">['</span><span class="string">--prompt</span><span class="punct">',</span> <span class="punct">'</span><span class="string">simple</span><span class="punct">']</span>
              <span class="comment"># This one is easy to remember, if you remember that Ruby methods</span>
              <span class="comment"># also use the asterisk to capture arguments into an array.</span>

 <span class="comment"># The $! contains the current exception raised.</span>
 <span class="comment"># The exclamation indicates a state of alarm.  An exception!</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">begin</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="keyword">raise</span> <span class="constant">TypeError</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">I don't believe this information.</span><span class="punct">&quot;</span> 
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">rescue</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="ident">p</span> <span class="global">$!</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">end</span>
   <span class="punct">=&gt;</span> <span class="comment">#&lt;TypeError: I don't believe this information.&gt;</span>

 <span class="comment"># The $@ contains the current backtrace, if an exception was raised.</span>
 <span class="comment"># The backtrace shows were Ruby was _at_ when the exception fired.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">begin</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="keyword">raise</span> <span class="constant">TypeError</span><span class="punct">,</span> <span class="punct">&quot;</span><span class="string">I don't believe this information.</span><span class="punct">&quot;</span> 
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">rescue</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="ident">p</span> <span class="global">$@</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">end</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">(irb):25:in `irb_binding'</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">/usr/lib/ruby/1.8/irb/workspace.rb:52:in `irb_binding'</span><span class="punct">&quot;,</span> 
       <span class="punct">&quot;</span><span class="string">/usr/lib/ruby/1.8/irb/workspace.rb:52</span><span class="punct">&quot;]</span></code></pre></div>
	<p>&#8220;I don&#8217;t remember you.&#8221;  Blix looked at the gorilla with great interest. &#8220;Are you one of R.K.&#8217;s kids or something?&#8221;</p>


	<p>&#8220;Oh, come on!&#8221; said Fox Small, holding up a bill with an exclamation mark on it up to the gorilla&#8217;s nose. &#8220;Don&#8217;t tell me this means <em>nothing</em> to you!  This one is probably <em>really important</em> since it has an exclamation on it.  Maybe it pays for emergency stuff!  Hospital bills or something!&#8221;</p>


	<p><strong>&#8220;Yeah, surgery!&#8221;</strong> said Fox Tall.</p>


	<p>The gorilla looked at the foxes with disgust from under the brim of his cap.  &#8220;No, you&#8217;re wrong.  You can&#8217;t pay for surgeries with that.&#8221;</p>


	<p>&#8220;But you see our point,&#8221; said the small fox.  He grabbed some of the other bills. &#8220;And you say this bill <em>cannot</em> pay for surgeries?  Well that sounds like it has a specific <em>non-surgery-related</em> purpose.  Now, the question mark one.  Oh, what would that one be for?&#8221;</p>


	<p>&#8220;Hey, give me those,&#8221; the gorilla snatched at the bills over the counter, but  his long thumb kept getting in the way and every time he thought he had grabbed bills,  it turned out he had only grabbed his long thumb.</p>


	<p>&#8220;Hey, hey, look, he&#8217;s mad,&#8221; said Fox Tall, happily clapping.  &#8220;I wonder why.  Did you notice how mad he started getting once we mentioned all these interesting meanings?  <strong>We&#8217;re on to you!  We figured out your game so fast!&#8221;</strong></p>


	<p>&#8220;We totally did!&#8221; said Fox Small, one of his elbows caught in the grip of the gorilla, the other arm waving a bill that featured an underscore. &#8220;This one&#8217;s for buying floor supplies, maybe even big rolls of tile and linoleum.&#8221;</p>


	<p>&#8220;See,&#8221; said Fox Tall, working to pry the gorilla&#8217;s fingers free, &#8220;we just have to figure out which is more expensive: surgery or linoleum!  This is <em>so easy!&#8221;</em></p>


	<p><strong>&#8220;NO IT&#8217;S <span class="caps">NOT</span>!&#8221;</strong> yelled the gorilla, yanking at the smaller fox and battering the fox with his palms.  <strong>&#8220;YOU <span class="caps">DON</span>&#8217;T <span class="caps">KNOW ANYTHING ABOUT MONKEY MONEY</span>!!  <span class="caps">YOU DON</span>&#8217;T <span class="caps">EVEN</span> <em>HAVE</em> YOUR <span class="caps">OWN KINDS OF MONEY</span>!!&#8221;</strong></p>


&#8220;We could <em>easily</em> have our own kinds of money!&#8221; said Fox Tall, taking the chimp&#8217;s hat and tossing it to the back of the room, where it sailed behind a wall of safety deposit boxes.  &#8220;And&#8212;<em>your hat is outta here!</em>&#8220;

	<p>&#8220;Come on, give him back his bills,&#8221; said Blix, waving his arms helplessly from the sidelines.  &#8220;We could really use this guy&#8217;s help.&#8221;</p>


	<p>&#8220;Stop hitting me!&#8221; screamed the littlest fox.  &#8220;I&#8217;ve almost figured out this one with the dots on it!!&#8221;</p>


	<p>Suddenly, with great precision and without warning, Fox Tall grabbed the monkey&#8217;s nose and slammed his face down against the counter.  The pens and inkpads on its surface rattled and &#8220;Bam!&#8221; said the fox.  The gorilla&#8217;s eyes spun sleepily as his arms&#8230; then his neck&#8230; then his head slithered to the floor behind the counter.</p>


	<p>Here are a few more global variables you might care to use:</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$/</span>      <span class="comment"># The $/ is the line separator, it is normally set to \n, which represents _Enter_</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string"><span class="escape">\n</span></span><span class="punct">&quot;</span>    <span class="comment"># or &quot;end of line&quot;.  The slash represents a sword slashing lines in a file.</span>

 <span class="comment"># The line separator controls how methods like each_line or readlines breaks up strings.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">Jeff,Jerry,Jill<span class="escape">\n</span>Michael,Mary,Myrtle</span><span class="punct">&quot;.</span><span class="ident">each_line</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">names</span><span class="punct">|</span> <span class="ident">p</span> <span class="ident">names</span> <span class="punct">}</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Jeff,Jerry,Jill<span class="escape">\n</span></span><span class="punct">&quot;</span> 
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Michael,Mary,Myrtle</span><span class="punct">&quot;</span> 

 <span class="comment"># If you change the line separator, you change how many methods work, such as each_line.</span>
 <span class="comment"># See what happens when I change the line separator to a comma.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$/</span> <span class="punct">=</span> <span class="punct">'</span><span class="string">,</span><span class="punct">'</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">Jeff,Jerry,Jill<span class="escape">\n</span>Michael,Mary,Myrtle</span><span class="punct">&quot;.</span><span class="ident">each_line</span> <span class="punct">{</span> <span class="punct">|</span><span class="ident">names</span><span class="punct">|</span> <span class="ident">p</span> <span class="ident">names</span> <span class="punct">}</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Jeff,</span><span class="punct">&quot;</span> 
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Jerry,</span><span class="punct">&quot;</span> 
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Jill<span class="escape">\n</span>Michael,</span><span class="punct">&quot;</span> 
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Mary,</span><span class="punct">&quot;</span> 
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Myrtle</span><span class="punct">&quot;</span> 

 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$,</span>     <span class="comment"># The $, variable is the join separator, used when joining strings with</span>
   <span class="punct">=&gt;</span> <span class="constant">nil</span>    <span class="comment"># Array#join or Kernel::print.  The comma is a common join character.</span>

 <span class="comment"># The join separator is normally empty.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">['</span><span class="string">candle</span><span class="punct">',</span> <span class="punct">'</span><span class="string">soup</span><span class="punct">',</span> <span class="punct">'</span><span class="string">mackarel</span><span class="punct">'].</span><span class="ident">join</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">candlesoupmackarel</span><span class="punct">&quot;</span> 
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$,</span> <span class="punct">=</span> <span class="punct">'</span><span class="string"> * </span><span class="punct">';</span> <span class="punct">['</span><span class="string">candle</span><span class="punct">',</span> <span class="punct">'</span><span class="string">soup</span><span class="punct">',</span> <span class="punct">'</span><span class="string">mackarel</span><span class="punct">'].</span><span class="ident">join</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">candle * soup * mackarel</span><span class="punct">&quot;</span> 

 <span class="comment"># But, usually, you won't need the global variable.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">['</span><span class="string">candle</span><span class="punct">',</span> <span class="punct">'</span><span class="string">soup</span><span class="punct">',</span> <span class="punct">'</span><span class="string">mackarel</span><span class="punct">'].</span><span class="ident">join</span> <span class="punct">'</span><span class="string"> # </span><span class="punct">'</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">candle # soup # mackarel</span><span class="punct">&quot;</span> 

 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$;</span>     <span class="comment"># The $; variable is the split separator, used when splitting strings</span>
   <span class="punct">=&gt;</span> <span class="constant">nil</span>    <span class="comment"># with String#split.</span>

 <span class="comment"># The split separator is normally empty, which means String#split will separate</span>
 <span class="comment"># the string where there is whitespace.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">candle  soup<span class="escape">\n</span>mackarel</span><span class="punct">&quot;.</span><span class="ident">split</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">candle</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">soup</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">mackarel</span><span class="punct">&quot;]</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$;</span> <span class="punct">=</span> <span class="punct">'</span><span class="string">a</span><span class="punct">';</span> <span class="punct">&quot;</span><span class="string">candle  soup<span class="escape">\n</span>mackarel</span><span class="punct">&quot;.</span><span class="ident">split</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">c</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">ndle  soup<span class="escape">\n</span>m</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">ck</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">rel</span><span class="punct">&quot;]</span>

 <span class="comment"># But, usually, you won't need the global variable.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">candle # soup # mackarel</span><span class="punct">&quot;.</span><span class="ident">split</span> <span class="punct">'</span><span class="string"> # </span><span class="punct">'</span>
   <span class="punct">=&gt;</span> <span class="punct">['</span><span class="string">candle</span><span class="punct">',</span> <span class="punct">'</span><span class="string">soup</span><span class="punct">',</span> <span class="punct">'</span><span class="string">mackarel</span><span class="punct">']</span></code></pre></div>
	<p>Outside the <em>Gorilla Mint</em>, Blix scolded the foxes.  &#8220;We could have used that guy&#8217;s help!  If he knows where R.K. is, we could use his cunning!&#8221;</p>


	<p>&#8220;<strong>We don&#8217;t need that ape&#8217;s money!</strong>&#8221; said Fox Small.  &#8220;<strong>We can make our <em>own</em> money!</strong>&#8220;</p>


	<p>&#8220;<strong>We could support electronic wristbands!</strong>&#8221; said Fox Tall.</p>


	<p>&#8220;His money is worthless,&#8221; said Blix.  &#8220;It&#8217;s gorilla money.  It has no value.  It&#8217;s worse than blue crystals.&#8221;</p>


	<p>&#8220;But it serves a purpose,&#8221; said Fox Tall.</p>


	<p>&#8220;No it doesn&#8217;t,&#8221; said Fox Small.  &#8220;He just said it&#8217;s worthless.&#8221;</p>


	<p>&#8220;But what about linoleum and surgeries?&#8221; said Fox Tall.</p>


	<p>&#8220;Yeah,&#8221; said Fox Small, up at Blix.  &#8220;What about linoleum and surgeries?&#8221;</p>


	<p>&#8220;If all the hospitals were staffed by gorillas and all the home improvement chains were strictly operated by gorillas, then <del>- <span class="caps">YES</span> &#8211; </del> you could buy linoleum and surgeries.  But I <em>guarantee</em> that you would have very sloppy linoleum and very hideous surgeries.  I don&#8217;t think you&#8217;d make it out of that economy alive.&#8221;</p>


	<p>&#8220;So, if R.K. is so cunning,&#8221; said Fox Tall, grinning slyly, &#8220;why does he print such worthless currency?&#8221;</p>


	<p>&#8220;It&#8217;s a cover for other activities,&#8221; said Blix.  &#8220;Besides, if you&#8217;re so smart, why did you resort to violently pounding that poor gorilla?&#8221;</p>


	<p>&#8220;I guess that was a bad play,&#8221; said Fox Tall, hanging his head.  &#8220;My friend here will tell you that I&#8217;ve been on edge all day.&#8221;</p>


	<p>&#8220;And your rage finally reared its fuming snout!&#8221; said Fox Small.  &#8220;You&#8217;re finally living up to your goatee.&#8221;</p>


	<p><img src="i/wixl-10.gif" alt="" /></p>


	<p>Down the lanes they travelled, the two foxes oblivious to their direction, but having a good time now that they had Blix leading the way with such urgency.  They lapsed into a careless wandering right behind Blix and spent their afternoon heckling most of the passersby.</p>


	<p>One such target of their ongoing commentary was The Winged Scroll Carriers, pairs of bats that carry documents which need to be immediately sworn and notarized.  There can be no delay, they must go swift, there is not even time to roll up the scroll, no, they must drop their swiss cheese and be out the door.</p>


	<p>These couriers resemble a kind of Ruby construct called <strong>delimited types</strong>.  A long series of characters comprises the scroll, flanked on each side by a bat bracing its curly wings to hold the scroll together. The opening bat wears a hat on which is written <code>%w</code>, which identifies the scroll as a set of words.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">bats</span> <span class="punct">=</span> <span class="punct">%w{</span><span class="string">The Winged Scroll Carriers</span><span class="punct">}</span>
   <span class="punct">=&gt;</span> <span class="punct">['</span><span class="string">The</span><span class="punct">',</span> <span class="punct">'</span><span class="string">Winged</span><span class="punct">',</span> <span class="punct">'</span><span class="string">Scroll</span><span class="punct">',</span> <span class="punct">'</span><span class="string">Carriers</span><span class="punct">']</span></code></pre></div>
	<p>The <code>%w</code> bats and their scroll, when fed into Ruby, emerge as an array of words.  This syntax is a shortcut in case you don&#8217;t want to go through the trouble of decorating each word with commas and quotes.  You are in a hurry, too, there can be no delay.  You jot out the words between the bats and let Ruby figure out where to cut.</p>


	<p>Other bats, other hats.  For instance, the <code>%x</code> hat runs an external program.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">%w{</span><span class="string">ruby --help</span><span class="punct">}</span>
   <span class="punct">=&gt;</span> <span class="punct">[&quot;</span><span class="string">ruby</span><span class="punct">&quot;,</span> <span class="punct">&quot;</span><span class="string">--help</span><span class="punct">&quot;]</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">%x{</span><span class="string">ruby --help</span><span class="punct">}</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">Usage: ruby [switches] [--] [programfile] [arguments] ...</span><span class="punct">&quot;</span></code></pre></div>
	<p>My favorite is the <code>%Q</code> hat, which can also be written as just <code>%</code>.  This acts just like a double-quoted string, but looks nice when used with strings that run-on for many lines.  Like, say you&#8217;re adding a new method with <code><span class="ident">eval</span></code>.</p>


<div class='example'><pre><code> <span class="ident">m</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">bats!</span><span class="punct">&quot;</span> 
 <span class="ident">eval</span> <span class="punct">%{</span><span class="string">
   def <span class="expr">#{ m }</span>
     puts &quot;{&quot; * 100
   end
 </span><span class="punct">}</span></code></pre></div>
	<p>Just like a double-quoted string, you can use the string interpolation lilypads inside.</p>


	<p><img src="i/wixl-15.png" title="Cloneberries: The More You Eat, The More *You*." alt="Cloneberries: The More You Eat, The More *You*." /></p>


	<p>Blixy wagged his head.  &#8220;Oh, dear me.&#8221;</p>


	<p>&#8220;Egads! My hand is pregnant,&#8221; said Fox Tall, watching the little fox embryo slide about in his palm.</p>


	<p>&#8220;They are good berries, though,&#8221; said Blix.  &#8220;The wine they make from these berries will make ya grow a few eyeballs in your teeth.  But no more than that.&#8221;</p>


	<p>&#8220;Ah, pain!&#8221; yelled Fox Small, as his miniature squeezed out through the pores in his scalp.  But soon he was cradling his little self and murmuring lullablies.  <em>Nevermore, nevermore, sweetly sang the nightingale.  Winking starlight, sleeping still, whilst perched on a Sycamore stump.</em></p>


	<p>Making duplicates of Ruby objects is no more than a berry&#8217;s worth of code.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">tree</span> <span class="punct">=</span> <span class="punct">[</span><span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">]</span>
   <span class="punct">=&gt;</span> <span class="punct">[</span><span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">]</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">treechild</span> <span class="punct">=</span> <span class="ident">tree</span><span class="punct">.</span><span class="ident">clone</span>
   <span class="punct">=&gt;</span> <span class="punct">[</span><span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">]</span></code></pre></div>
	<p>The <code><span class="ident">clone</span></code> method makes an exact copy of a Ruby object.  How does this differ from regular assignment?</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">tree_charles_william_iii</span> <span class="punct">=</span> <span class="ident">tree</span>
   <span class="punct">=&gt;</span> <span class="punct">[</span><span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">]</span></code></pre></div>
	<p>Assigning object to variables only creates more nicknames.  The above Array can be called <code><span class="ident">tree_charles_william_iii</span></code> now.  Or the shorter <code><span class="ident">tree</span></code>.  The same object, but different names.</p>


	<p>However, a clone is a copy of an object.  You can modify it without affecting the original.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">treechild</span> <span class="punct">&lt;&lt;</span> <span class="punct">'</span><span class="string">flower</span><span class="punct">'</span>
   <span class="punct">=&gt;</span> <span class="punct">[</span><span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">,</span> <span class="punct">'</span><span class="string">flower</span><span class="punct">']</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">tree</span>
   <span class="punct">=&gt;</span> <span class="punct">[</span><span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">,</span> <span class="symbol">:berry</span><span class="punct">]</span></code></pre></div>
	<p>The <code><span class="ident">clone</span></code> method doesn&#8217;t make copies of everything attached to the object, though.  In the array above, only the array is copied, not all the symbols and strings inside.</p>


	<p>You may also see the <code><span class="ident">dup</span></code> method used to copy objects.  The <code><span class="ident">dup</span></code> method makes copies which aren&#8217;t as exact.  For example, there are objects in Ruby which are &#8220;frozen&#8221; and can&#8217;t be altered.  If you <code><span class="ident">clone</span></code> the object, you get an exact copy which is also frozen.  If you use <code><span class="ident">dup</span></code>, you get an unfrozen copy that you can change if you like.</p>


	<p>The <code><span class="ident">clone</span></code> method also copies the metaclass of an object, whereas <code><span class="ident">dup</span></code> does not.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">o</span> <span class="punct">=</span> <span class="constant">Object</span><span class="punct">.</span><span class="ident">new</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">class </span><span class="punct">&lt;&lt;</span> <span class="ident">o</span>
 <span class="ident">irb</span><span class="punct">&gt;</span>   <span class="keyword">def </span><span class="method">nevermore</span><span class="punct">;</span> <span class="symbol">:nevermore</span><span class="punct">;</span> <span class="keyword">end</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="keyword">end</span>

 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">o</span><span class="punct">.</span><span class="ident">clone</span><span class="punct">.</span><span class="ident">nevermore</span>
   <span class="punct">=&gt;</span> <span class="symbol">:nevermore</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">o</span><span class="punct">.</span><span class="ident">dup</span><span class="punct">.</span><span class="ident">nevermore</span>
 <span class="comment"># NoMethodError: undefined method `nevermore' for #&lt;Object:0xb7d4a484&gt;</span>
 <span class="comment">#         from (irb):7</span></code></pre></div>
	<p>You don&#8217;t always need to make copies of objects, though, since many methods like <code><span class="ident">collect</span></code> and <code><span class="ident">gsub</span></code> and <code><span class="ident">format</span></code> make copies for you as part of their work.</p>


	<p><img src="i/wixl-4.gif" title="Deer of the Smoky Pink Puffing." alt="Deer of the Smoky Pink Puffing." /></p>


	<p>Over the hills and down the valleys, they ran through the grass where the Deer of the Smoky Pink Puffing roam.  The sun was obscured by the lumbering pink clouds, emblazened with deer language, tinting the horizon a gradient of grapefruit and secreting a glow over the meadow.  The clouds slid past each other, some bobbing upwards, destined for Canadian relatives.  Others landing a readable distance from a recipient&#8217;s hooves.</p>


	<p>&#8220;Let&#8217;s stop!  <em>Please!</em>&#8221; yelled Fox Tall.  &#8220;You can&#8217;t expect us to run in this <strong>unbreathable fluff!</strong>&#8220;</p>


	<p>&#8220;Why are you yelling?&#8221; said Blix, as a thin stratus telegram wafted behind his legs.  &#8220;You don&#8217;t need to raise your voice above a whisper.  These long skinny clouds are usually just a mumble or a sigh.  They may not even make it all the way.&#8221;</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Steaks &#8216;n&#8217; Slides</h2>
        

        <p>My uncles love waterslides and they also love steakhouses.  They have these waterslide days which are directly followed by a trip over to Joey&#8217;s Steakhouse.  I <em>hate</em> Joey&#8217;s Steakhouse.  It&#8217;s all big, brown shoe meat.  Floppy and galoshy.  Mixed with the stench of the uncles&#8217; chlorine.</p>


	<p>Pruny fingers on meat slabs is The Revolting.</p>


	<p>It&#8217;s time for steaks and waterslides to come together in a truly repugnant manner. My uncles have had steaks and waterslides their whole lives.  The dynasty of steaks and waterslides must come to a close.  I will marry them in ways against nature!</p>


	<p>Like this:</p>


<ul>
	<li>Hand steaks to riders as they board the waterslide.  Rider looks at the lifeguard. Lifeguard says wait.  Rider looks again.  The lifeguard pauses.  Then.  Okay, it&#8217;s time. <em>Go, kid, go!</em>  And the look on that kid&#8217;s face as he rushes down the slope, paws full of chuck!  <em>Go, kid, go!</em></li>
	<li>Kids slide on top of steaks.  For safety, we&#8217;d want the slides stacked five steaks deep.</li>
	<li>Or, steaks do the sliding.  In their own little swim trunks.</li>
	<li>Or, people.  With steak swim trunks.</li>
	<li>People and steaks, side-by-side.</li>
	<li>Steaks travelling down waterslides composed of steaks.</li>
	<li>Steaks travelling down waterslides made of people.</li>
	<li>And, of course, people eating steaks, but their tongues come out as waterslides and they have to push the steaks up the waterslides.  Which is impossible and a lifeguard has to climb up the waterslide and manually insert the steak into the esophagus.</li>
	<li>Waterslides eating people and steaks eating people.</li>
	<li>Waterslides and steaks becoming friends after smelling people on each other&#8217;s breath.</li>
	<li>Or, steaks befriending waterslides, but waterslides not reciprocating.  Waterslides become increasingly despondent and detached, getting into bad crowds and sinking into political extremity.  Steaks make ankle bracelets out of people and leave them in the waterslides&#8217; trouser pockets, when the trousers are unattended.  They sneak out of the waterslide commune via a huge waterslide made of steak swim trunks.</li>
	<li>Or, like I said, people with steak swim trunks.</li>
</ul>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>&#8220;All that writing on the cloud is deer talk?&#8221; said Fox Small.</p>


	<p>&#8220;Help!  <em>Where are you guys?</em>&#8221;  The taller fox ducked through a stormy tirade comprised of thick, billowing smoke and sharp wisps.  He whirled in every direction, &#8220;Somebody yell if you&#8217;re there!&#8221;</p>


	<p>He searched for a fissure in the dense matter, combing forward with his hands.  The verbose, angry clouds responded by prodding him ahead, forcing him into tight corners in their brief pause between sentences.  He landed in a sinkhole and kept his head down as the cascades of smoke surged forward.</p>


	<p>&#8220;Yeah, deer can read this stuff,&#8221; said Blix.  &#8220;They just face their target and shoot it out of their nostrils.  I once heard of a guy who <strong>rode</strong> a stag&#8217;s love poem.&#8221;</p>


	<p>&#8220;No way,&#8221; said Fox Small.</p>


	<p>&#8220;Yep,&#8221; said Blix.  &#8220;And that guy was me.&#8221;  Blix reached over his shoulder and latched onto a spiral column of smoke that was twisting just above his head.  &#8220;You just have to know which clouds are wimpy and which clouds are grandiloquent.&#8221;  Blix let the cloud pull him along and when the cloud banked upwards, Blix loosed his grip and kept his feet moving slowly along the ground.  &#8220;See, here&#8217;s a good one, long like a broom handle.  A guy found one once and it was shaped <em>exactly</em> like a car: windshield, driver&#8217;s side airbag, power steering. Uncanny!&#8221;</p>


&#8220;<em>And that guy was&#8212;</em>&#8220;

	<p><strong>&#8220;It was!&#8221;</strong>  And Blix climbed up atop the long icy cloud, with its dangling glyphs, and stood proudly, floating high above the small fox&#8217;s pointy shadow.</p>


	<p>&#8220;Oh, I could do that,&#8221; said Fox Small.  &#8220;Tall and I go jetskiing all the time.  <em>I&#8217;ve stood up on my jetski.</em>  It&#8217;s just like that.&#8221;</p>


	<p>Fox Tall dashed through a descending puff, shattering its sentence, which letters came unglued and littered the ground with scrambled words, but he had only succeeded in reaching the depressive portions of the deer correspondence, which manifested itself as a dank and opaque mist.</p>


	<p>Meanwhile, his smaller counterpart grabbed a narrow train of smoke that passed under his arm.  He was airborned and yelled, <strong>&#8220;Tallyho!&#8221;</strong>  But he held too tightly and the cloud evaporated under his arm and sent him back down with a short hop.</p>


	<p>Since you&#8217;re just beginning your use of Ruby, you may not fully grasp regular expressions (or <em>regexps</em>) at first.  You may even find yourself clipping out regexps from the <a href="http://regexlib.com/DisplayPatterns.aspx">Regular Expression Library</a> and pasting them into your code without having the foggiest idea why the expression works.  Or <em>if</em> it works!</p>


<div class='example'><pre><code> <span class="ident">loop</span> <span class="keyword">do</span>
   <span class="ident">print</span> <span class="punct">&quot;</span><span class="string">Enter your password: </span><span class="punct">&quot;</span> 
   <span class="ident">password</span> <span class="punct">=</span> <span class="ident">gets</span>
   <span class="keyword">if</span> <span class="ident">password</span><span class="punct">.</span><span class="ident">match</span><span class="punct">(</span> <span class="punct">/</span><span class="regex">^<span class="escape">\w</span>{8,15}$</span><span class="punct">/</span> <span class="punct">)</span>
     <span class="keyword">break</span>
   <span class="keyword">else</span>
     <span class="ident">puts</span> <span class="punct">&quot;</span><span class="string">** Bad password! Must be 8 to 15 characters!</span><span class="punct">&quot;</span> 
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>Do you see the unreadable deer language in the example code?  The <code><span class="punct">/</span><span class="regex">^<span class="escape">\w</span>{8,15)$</span><span class="punct">/</span></code> is a regular expression.  If I may translate, the regexp is saying, <em>Please only allow letters, numbers or underscores.  No less than eight and no more than fifteen.</em></p>


	<p>Regular expressions are a mini-language built into Ruby and many other programming languages. I really shouldn&#8217;t say <em>mini</em>, though, since regexps can be twisted and complicated and much more difficult than any Ruby program.</p>


	<p>Using regular expressions is extremely simple.  It is like the Deer: making the smoke is an arduous process.  But hooking your elbow around the smoke and driving it to the Weinerschnitzel to get mustard pretzel dogs is easy.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">good_password</span><span class="punct">&quot;.</span><span class="ident">match</span><span class="punct">(</span> <span class="punct">/</span><span class="regex">^<span class="escape">\w</span>{8,15}$</span><span class="punct">/</span> <span class="punct">)</span>
   <span class="punct">=&gt;</span> <span class="comment">#&lt;MatchData:0xb7d54218&gt;</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">this_bad_password_too_long</span><span class="punct">&quot;.</span><span class="ident">match</span><span class="punct">(</span> <span class="punct">/</span><span class="regex">^<span class="escape">\w</span>{8,15}$</span><span class="punct">/</span> <span class="punct">)</span>
   <span class="punct">=&gt;</span> <span class="constant">nil</span></code></pre></div>
	<p>The <code><span class="constant">String</span><span class="comment">#match</span></code> method is the <em>simplest practical use</em> of regexps.  The <code><span class="ident">match</span></code> method checks to see if the string meets the rules inside the regexp.  A regexp is only useful with strings, to test strings for a series of conditions.  If the conditions are met, a <code><span class="constant">MatchData</span></code> object is returned.  If not, you get <code><span class="constant">nil</span></code>.</p>


	<p>The most basic regular expressions are for <strong>performing searches</strong> inside strings.  Let&#8217;s say you&#8217;ve got a big file and you want to search it for a word or phrase.  Since a bit of time has passed, let&#8217;s search the Preeventualist&#8217;s Losing and Finding Registry again.</p>


<div class='example'><pre><code> <span class="ident">require</span> <span class="punct">'</span><span class="string">preeventualist</span><span class="punct">'</span>
 <span class="constant">PreEventualist</span><span class="punct">.</span><span class="ident">searchfound</span><span class="punct">(</span> <span class="punct">'</span><span class="string">truck</span><span class="punct">'</span> <span class="punct">)</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">page</span><span class="punct">|</span>
   <span class="ident">page</span><span class="punct">.</span><span class="ident">each_line</span> <span class="keyword">do</span> <span class="punct">|</span><span class="ident">line</span><span class="punct">|</span>
     <span class="ident">puts</span> <span class="ident">line</span> <span class="keyword">if</span> <span class="ident">line</span><span class="punct">.</span><span class="ident">match</span><span class="punct">(</span> <span class="punct">/</span><span class="regex">truck</span><span class="punct">/</span> <span class="punct">)</span>
   <span class="keyword">end</span>
 <span class="keyword">end</span></code></pre></div>
	<p>This isn&#8217;t too different from the code we used earlier to search for lines with the word &#8220;truck&#8221;.  Earlier we used <code><span class="ident">puts</span> <span class="ident">line</span> <span class="keyword">if</span> <span class="ident">line</span><span class="punct">['</span><span class="string">truck</span><span class="punct">']</span></code>, which is actually a simpler way of searching a string, if you&#8217;re just looking for a simple word.  The regexp <code><span class="punct">/</span><span class="regex">truck</span><span class="punct">/</span></code> is identical.  Find the word &#8220;truck&#8221;.  Anywhere in the string.</p>


	<p>Uhm, what if truck is capitalized.  <strong>Truck.</strong>  What then?</p>


<div class='example'><pre><code> <span class="ident">puts</span> <span class="ident">line</span> <span class="keyword">if</span> <span class="ident">line</span><span class="punct">.</span><span class="ident">match</span><span class="punct">(</span> <span class="punct">/</span><span class="regex">[Tt][Rr][Uu][Cc][Kk]</span><span class="punct">/</span><span class="ident">i</span> <span class="punct">)</span></code></pre></div>
	<p>The <strong>character classes</strong> are the sections surrounded by <strong>square brackets</strong>.  Each character class gives a list of characters which are valid matches for that spot.  (The first spot matches either an uppercase <code><span class="constant">T</span></code> or a lowercase <code><span class="ident">t</span></code>.  The second spot matches an <code><span class="constant">R</span></code> or an <code><span class="ident">r</span></code>.  And so on.)</p>


	<p>But a simpler way to write it is like this:</p>


<div class='example'><pre><code> <span class="ident">puts</span> <span class="ident">line</span> <span class="keyword">if</span> <span class="ident">line</span><span class="punct">.</span><span class="ident">match</span><span class="punct">(</span> <span class="punct">/</span><span class="regex">truck</span><span class="punct">/</span><span class="ident">i</span> <span class="punct">)</span></code></pre></div>
	<p>The letter <code><span class="ident">i</span></code> modifier at the end of the regexp indicates that the search is <strong>not case-sensitive</strong>.  It will match Truck.  And <span class="caps">TRUCK</span>.  And TrUcK.  And other ups and downs.</p>


	<p>Oh, and maybe you&#8217;re truck is a certain model number.  <span class="caps">A T</span>-1000.  Or a T-2000.  You can&#8217;t remember.  It&#8217;s a T <em>something</em> thousand.</p>


<div class='example'><pre><code> <span class="ident">puts</span> <span class="ident">line</span> <span class="keyword">if</span> <span class="ident">line</span><span class="punct">.</span><span class="ident">match</span><span class="punct">(</span> <span class="punct">/</span><span class="regex">T-<span class="escape">\d</span>000</span><span class="punct">/</span> <span class="punct">)</span></code></pre></div>
	<p>See, deer language.  The <code>\<span class="ident">d</span></code> represents a <strong>digit</strong>.  It&#8217;s a place holder in the regexp for any type of number.  The regexp will now match T-1000, T-2000, all the way up to T-9000.</p>


	<table>
		<tr>
			<td colspan="3"><strong>Character Classes</strong> </td>
		</tr>
		<tr>
			<td> <code>\<span class="ident">d</span></code> </td>
			<td> matches digits </td>
			<td> can also be written <code><span class="punct">[</span><span class="number">0</span><span class="punct">-</span><span class="number">9</span><span class="punct">]</span></code> </td>
		</tr>
		<tr>
			<td> <code>\<span class="ident">w</span></code> </td>
			<td> matches word characters (letters, numbers and the underscore) </td>
			<td> can also be written <code><span class="punct">[</span><span class="constant">A</span><span class="punct">-</span><span class="constant">Za</span><span class="punct">-</span><span class="ident">z0</span><span class="punct">-</span><span class="number">9_</span><span class="punct">]</span></code> </td>
		</tr>
		<tr>
			<td> <code>\<span class="ident">s</span></code> </td>
			<td> matches whitespace (spaces, tabs, carriage returns, line feeds) </td>
			<td> a.k.a. <code><span class="punct">[</span> \<span class="ident">t\r\n</span><span class="punct">]</span></code> </td>
		</tr>
		<tr>
			<td> <code>\<span class="constant">D</span></code> </td>
			<td> matches everything <em>but</em> digits </td>
			<td> a negated set <code><span class="punct">[^\</span><span class="ident">d</span><span class="punct">]</span></code> </td>
		</tr>
		<tr>
			<td> <code>\<span class="constant">W</span></code> </td>
			<td> matches everything <em>but</em> word chars </td>
			<td> just like <code><span class="punct">[^\</span><span class="ident">w</span><span class="punct">]</span></code> </td>
		</tr>
		<tr>
			<td> <code>\<span class="constant">S</span></code> </td>
			<td> matches everything <em>but</em> whitespace </td>
			<td> also <code><span class="punct">[^\</span><span class="ident">s</span><span class="punct">]</span></code> </td>
		</tr>
		<tr>
			<td> <code><span class="punct">.</span></code> </td>
			<td> the period matches <strong>everything</strong>. </td>
		</tr>
	</table>



	<p>Building a regexp involves chaining these placeholders together to express your search.  If you&#8217;re looking for a number, followed by whitespace: <code><span class="punct">/</span><span class="regex"><span class="escape">\d\s</span></span><span class="punct">/</span></code>.  If you&#8217;re looking for three numbers in a row: <code><span class="punct">/</span><span class="regex"><span class="escape">\d\d\d</span></span><span class="punct">/</span></code>.  <strong>The opening and closing slashes mark the beginning and end of the regexp.</strong></p>


	<p>A search for three numbers in a row can also be written as: <code><span class="punct">/</span><span class="regex"><span class="escape">\d</span>{3}</span><span class="punct">/</span></code>.  Immediately following a character class like <code>\<span class="ident">d</span></code>, you can use a quantifier symbol to mark how many times you want the character class to be repeat.</p>


	<table>
		<tr>
			<td colspan="3"><strong>Quantifiers</strong> </td>
		</tr>
		<tr>
			<td> <code><span class="punct">{</span><span class="ident">n</span><span class="punct">}</span></code> </td>
			<td> match exactly <em>n</em> times </td>
			<td> Precisely three numbers in a row is <code><span class="punct">/</span><span class="regex"><span class="escape">\d</span>{3}</span><span class="punct">/</span></code> </td>
		</tr>
		<tr>
			<td> <code><span class="punct">{</span><span class="ident">n</span><span class="punct">,}</span></code> </td>
			<td> matches <em>n_ times or _more</em> </td>
			<td> Three or more letters in a row is <code><span class="punct">/</span><span class="regex">[a-z]{3,}</span><span class="punct">/</span><span class="ident">i</span></code> </td>
		</tr>
		<tr>
			<td> <code><span class="punct">{</span><span class="ident">n</span><span class="punct">,</span><span class="ident">n2</span><span class="punct">}</span></code> </td>
			<td> matches at least <em>n_ times but no more than _n2</em> times </td>
			<td> So, <code><span class="punct">/</span><span class="regex">[<span class="escape">\d</span>,]{3,9}</span><span class="punct">/</span></code> matches between three and nine characters which are numbers or commas </td>
		</tr>
		<tr>
			<td> <code><span class="punct">*</span></code> </td>
			<td> the asterisk <code><span class="punct">*</span></code> is short for <code><span class="punct">{</span><span class="number">0</span><span class="punct">,}</span></code> </td>
			<td> To match a colon, followed by zero or more word characters: <code><span class="punct">/</span><span class="regex">:<span class="escape">\w</span>*</span><span class="punct">/</span></code> </td>
		</tr>
		<tr>
			<td> <code><span class="punct">+</span></code> </td>
			<td> the plus is short for <code><span class="punct">{</span><span class="number">1</span><span class="punct">,}</span></code> </td>
			<td> To match one or more minus or plus signs, use <code><span class="punct">/</span><span class="regex">[-+]+</span><span class="punct">/</span></code> </td>
		</tr>
		<tr>
			<td> <code><span class="punct">?</span></code> </td>
			<td> the question mark is short for <code><span class="punct">{</span><span class="number">0</span><span class="punct">,</span><span class="number">1</span><span class="punct">}</span></code> </td>
			<td> To match three numbers followed by an optional period: <code><span class="punct">/</span><span class="regex"><span class="escape">\d</span>{3}[.]?</span><span class="punct">/</span></code> </td>
		</tr>
	</table>



	<p>A really common regular expression is for matching phone numbers.  American phone numbers (including an area code) can be matched using the digit character class and the precise quantifiers.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">Call 909-375-4434</span><span class="punct">&quot;</span> <span class="punct">=~</span> <span class="punct">/</span><span class="regex"><span class="escape">\d</span>{3}-<span class="escape">\d</span>{3}-<span class="escape">\d</span>{4}</span><span class="punct">/</span>
   <span class="punct">=&gt;</span> <span class="number">5</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">The number is (909) 375-4434</span><span class="punct">&quot;</span> <span class="punct">=~</span> <span class="punct">/</span><span class="regex">[(]<span class="escape">\d</span>{3}[)]<span class="escape">\s</span>*<span class="escape">\d</span>{3}-<span class="escape">\d</span>{4}</span><span class="punct">/</span>
   <span class="punct">=&gt;</span> <span class="number">14</span></code></pre></div>
	<p>This time, instead of using <code><span class="ident">match</span></code> to search for the expression, the <code><span class="punct">=~</span></code> operator was used.  This operator is the <strong>match operator</strong>, an equals sign followed by <strong>a tilde</strong>.  The tilde is like a bit of smoke coming off the edge of a smokestack.  Remember the deer, the smoke they blow, a cryptic language just like regular expressions.  The smoky tilde points toward the regexp.</p>


	<p>The match operator returns a number.  The number is the spot in the string where the regular expression matched. So when the match operator returns <code><span class="number">5</span></code>, it&#8217;s saying, &#8220;Before the match, there are five characters in the string.&#8221;</p>


	<p>If you need to get the full string matched, you can use the special <code><span class="global">$&amp;</span></code> global variable if you&#8217;re using the match operator.  Or, if you&#8217;re using the <code><span class="ident">match</span></code> method, you can get the full string by converting the <code><span class="constant">MatchData</span></code> object to a string.</p>


<div class='example'><pre><code> <span class="comment"># Using =~ and $&amp; together.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="punct">&quot;</span><span class="string">The number is (909) 375-4434</span><span class="punct">&quot;</span> <span class="punct">=~</span> <span class="punct">/</span><span class="regex">[(]<span class="escape">\d</span>{3}[)]<span class="escape">\s</span>*<span class="escape">\d</span>{3}-<span class="escape">\d</span>{4}</span><span class="punct">/</span>
   <span class="punct">=&gt;</span> <span class="number">14</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="global">$&amp;</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">(909) 375-4434</span><span class="punct">&quot;</span> 

 <span class="comment"># Using the MatchData object.</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">phone</span> <span class="punct">=</span> <span class="punct">/</span><span class="regex">[(]<span class="escape">\d</span>{3}[)]<span class="escape">\s</span>*<span class="escape">\d</span>{3}-<span class="escape">\d</span>{4}</span><span class="punct">/.</span><span class="ident">match</span><span class="punct">(&quot;</span><span class="string">The number is (909) 375-4434</span><span class="punct">&quot;)</span>     
   <span class="punct">=&gt;</span> <span class="comment">#&lt;MatchData:0xb7d51680&gt;</span>
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">phone</span><span class="punct">.</span><span class="ident">to_s</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">(909) 375-4434</span><span class="punct">&quot;</span></code></pre></div>
	<p>Most Rubyists prefer the second approach, as it uses an object within a <em>local variable</em> rather than a <em>global variable</em>. Global variables are kind of sketchy, since they can be easily overwritten.  If you run two regular expressions in a row, the global variable gets overwritten the second time.  But with local variables, you can keep both matches around as long as the variables are named differently.</p>


	<p>Other than matching, another common use of regular expression is to do <strong>search-and-replace</strong> from within Ruby. You can search for the word &#8220;cat&#8221; and replace it with the word &#8220;banjo.&#8221;  Sure, you can do that with strings or regexps.</p>


<div class='example'><pre><code> <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">song</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">I swiped your cat / And I stole your cathodes</span><span class="punct">&quot;</span> 
 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">song</span><span class="punct">.</span><span class="ident">gsub</span> <span class="punct">'</span><span class="string">cat</span><span class="punct">',</span> <span class="punct">'</span><span class="string">banjo</span><span class="punct">'</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">I swiped your banjo / And I stole your banjohodes</span><span class="punct">&quot;</span> 

 <span class="ident">irb</span><span class="punct">&gt;</span> <span class="ident">song</span><span class="punct">.</span><span class="ident">gsub</span> <span class="punct">/\</span><span class="ident">bcat\b</span><span class="punct">/,</span> <span class="punct">'</span><span class="string">banjo</span><span class="punct">'</span>
   <span class="punct">=&gt;</span> <span class="punct">&quot;</span><span class="string">I swiped your banjo / And I stole your cathodes</span><span class="punct">&quot;</span></code></pre></div>
	<p>The <code><span class="ident">gsub</span></code> method is named for &#8220;global substitution.&#8221;  Notice how in the first example it replaced the word &#8220;cat&#8221; and the first three letters of &#8220;cathodes.&#8221;  Strings also have a simple <code><span class="ident">sub</span></code> method which will substite only once.</p>


	<p>And so this chapter ends, with Blix and the Foxes cruising aloft the solid pink belched from a very outspoken deer somewhere in those pastures.</p>

    
    
        
        <a name="section6" />
        <h2>6. Just Stopping To Assure You That the Porcupine Hasn't Budged</h2>

        <p><img src="i/porcupine-3.gif" title="The porcupine and his kite again." alt="The porcupine and his kite again." /></p>

    
    
        
        <a name="section7" />
        <h2>7. I'm Out</h2>

        <p style="float:right"><img src="i/quil-1.png" alt="" /></p>


	<p style="float:left"><img src="i/quil-2.png" alt="" /></p>


	<p>One day, back around the time I met Bigelow (that dog who walked off with the balloons), I came back to my apartment hauling some board games I&#8217;d bought at a garage sale.  And Quil was on my porch.  Which stunned me since she&#8217;d been in San Antonio for like three years.  She was sleeping in a sleeping bag on my porch.</p>


	<p>She had run out of money to go to art school, so she stayed at my place for five months or so.</p>


	<p>I found this used bunkbed for our place.  At night we&#8217;d sit in our beds and read each other stories  from our notebooks.  I was writing a book about a kid who&#8217;s a detective and he&#8217;s trying to figure out who killed this kid on his tennis team and all these animals end up helping him figure it out.  She was writing a book about this kid who puts an ad in the classifieds to get other kids to join his made-up cult and they end up building a rocket ship.  But during most of her book these kids are lost in the woods and pretty directionless, which I got a kick out of hearing each night.</p>


	<p>Yeah, each night it was poetry or stories or ideas for tricking our neighbors.  Our neighbor Justin was a big fan of Warhammer and he had all these real swords and tunics.  We decided to make suits of armor out of tin foil and go attack his apartment.  We started ransacking his apartment and he loved it.  So he made his own suit of armor out of tin foil and we all went to a professional glamour studio and had a quality group shot taken.</p>


	<p style="float:right"><img src="i/quil-3.png" alt="" /></p>


	<p>I&#8217;m not saying my life is any better than yours.  I just miss my sister.  Life isn&#8217;t like that now. We&#8217;re dissolved or something.</p>


	<p>I don&#8217;t know.  I&#8217;m confused.  Is this growing up?  Watching all your feathers come off?  And even though some of those feathers were the most lovely things?</p>


	<p>I&#8217;m having a hard time telling who stopped it all up.  Who stopped loving who?  Did I stop caring?  Maybe I only saw her in two-dimensions and I didn&#8217;t care to look at the other angles.  I only saw planes.  Then she shimmied up the z-axis when I wasn&#8217;t looking and I never did the homework to trace the coordinates.  A limb on a geometrical tree and I am insisting on circles.</p>


	<p>Blix was right.  I&#8217;m in so shape to write this book.  Goodbye until I can shake this.</p>


	<p><img src="i/departure.png" alt="" /></p>

    
    

    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>7.</h3>
        <h1>When You Wish Upon a Beard</h1>
        <p><img src="i/chapter.poignant.guide-7.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/wish.upon.a.beard-1.gif" alt="" /></p>


	<p><span class="caps">HEY THIS CHAPTER GOT DROPPED IN MY LAP</span>.  <span class="caps">SOON I</span>&#8217;LL <span class="caps">HAVE</span> it <span class="caps">READY</span>.  <span class="caps">I WILL</span>.</p>

    
    

    </div>
</div>

</div>
</body>
</html>
